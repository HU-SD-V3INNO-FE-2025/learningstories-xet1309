(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();var rd={exports:{}},ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function CA(){if(Xy)return ol;Xy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var g in l)g!=="key"&&(c[g]=l[g])}else c=l;return l=c.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:c}}return ol.Fragment=t,ol.jsx=n,ol.jsxs=n,ol}var $y;function DA(){return $y||($y=1,rd.exports=CA()),rd.exports}var W=DA(),sd={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function OA(){if(Wy)return St;Wy=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.iterator;function x(D){return D===null||typeof D!="object"?null:(D=C&&D[C]||D["@@iterator"],typeof D=="function"?D:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,J={};function $(D,X,at){this.props=D,this.context=X,this.refs=J,this.updater=at||B}$.prototype.isReactComponent={},$.prototype.setState=function(D,X){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,X,"setState")},$.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function pt(){}pt.prototype=$.prototype;function ft(D,X,at){this.props=D,this.context=X,this.refs=J,this.updater=at||B}var _t=ft.prototype=new pt;_t.constructor=ft,Q(_t,$.prototype),_t.isPureReactComponent=!0;var jt=Array.isArray,vt={H:null,A:null,T:null,S:null},Dt=Object.prototype.hasOwnProperty;function M(D,X,at,et,nt,bt){return at=bt.ref,{$$typeof:r,type:D,key:X,ref:at!==void 0?at:null,props:bt}}function w(D,X){return M(D.type,X,void 0,void 0,void 0,D.props)}function S(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function I(D){var X={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(at){return X[at]})}var V=/\/+/g;function P(D,X){return typeof D=="object"&&D!==null&&D.key!=null?I(""+D.key):X.toString(36)}function R(){}function ye(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(R,R):(D.status="pending",D.then(function(X){D.status==="pending"&&(D.status="fulfilled",D.value=X)},function(X){D.status==="pending"&&(D.status="rejected",D.reason=X)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function he(D,X,at,et,nt){var bt=typeof D;(bt==="undefined"||bt==="boolean")&&(D=null);var At=!1;if(D===null)At=!0;else switch(bt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(D.$$typeof){case r:case t:At=!0;break;case A:return At=D._init,he(At(D._payload),X,at,et,nt)}}if(At)return nt=nt(D),At=et===""?"."+P(D,0):et,jt(nt)?(at="",At!=null&&(at=At.replace(V,"$&/")+"/"),he(nt,X,at,"",function(ie){return ie})):nt!=null&&(S(nt)&&(nt=w(nt,at+(nt.key==null||D&&D.key===nt.key?"":(""+nt.key).replace(V,"$&/")+"/")+At)),X.push(nt)),1;At=0;var fe=et===""?".":et+":";if(jt(D))for(var xt=0;xt<D.length;xt++)et=D[xt],bt=fe+P(et,xt),At+=he(et,X,at,bt,nt);else if(xt=x(D),typeof xt=="function")for(D=xt.call(D),xt=0;!(et=D.next()).done;)et=et.value,bt=fe+P(et,xt++),At+=he(et,X,at,bt,nt);else if(bt==="object"){if(typeof D.then=="function")return he(ye(D),X,at,et,nt);throw X=String(D),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return At}function tt(D,X,at){if(D==null)return D;var et=[],nt=0;return he(D,et,"","",function(bt){return X.call(at,bt,nt++)}),et}function dt(D){if(D._status===-1){var X=D._result;X=X(),X.then(function(at){(D._status===0||D._status===-1)&&(D._status=1,D._result=at)},function(at){(D._status===0||D._status===-1)&&(D._status=2,D._result=at)}),D._status===-1&&(D._status=0,D._result=X)}if(D._status===1)return D._result.default;throw D._result}var lt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ht(){}return St.Children={map:tt,forEach:function(D,X,at){tt(D,function(){X.apply(this,arguments)},at)},count:function(D){var X=0;return tt(D,function(){X++}),X},toArray:function(D){return tt(D,function(X){return X})||[]},only:function(D){if(!S(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},St.Component=$,St.Fragment=n,St.Profiler=l,St.PureComponent=ft,St.StrictMode=s,St.Suspense=p,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=vt,St.act=function(){throw Error("act(...) is not supported in production builds of React.")},St.cache=function(D){return function(){return D.apply(null,arguments)}},St.cloneElement=function(D,X,at){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var et=Q({},D.props),nt=D.key,bt=void 0;if(X!=null)for(At in X.ref!==void 0&&(bt=void 0),X.key!==void 0&&(nt=""+X.key),X)!Dt.call(X,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&X.ref===void 0||(et[At]=X[At]);var At=arguments.length-2;if(At===1)et.children=at;else if(1<At){for(var fe=Array(At),xt=0;xt<At;xt++)fe[xt]=arguments[xt+2];et.children=fe}return M(D.type,nt,void 0,void 0,bt,et)},St.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},St.createElement=function(D,X,at){var et,nt={},bt=null;if(X!=null)for(et in X.key!==void 0&&(bt=""+X.key),X)Dt.call(X,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(nt[et]=X[et]);var At=arguments.length-2;if(At===1)nt.children=at;else if(1<At){for(var fe=Array(At),xt=0;xt<At;xt++)fe[xt]=arguments[xt+2];nt.children=fe}if(D&&D.defaultProps)for(et in At=D.defaultProps,At)nt[et]===void 0&&(nt[et]=At[et]);return M(D,bt,void 0,void 0,null,nt)},St.createRef=function(){return{current:null}},St.forwardRef=function(D){return{$$typeof:g,render:D}},St.isValidElement=S,St.lazy=function(D){return{$$typeof:A,_payload:{_status:-1,_result:D},_init:dt}},St.memo=function(D,X){return{$$typeof:v,type:D,compare:X===void 0?null:X}},St.startTransition=function(D){var X=vt.T,at={};vt.T=at;try{var et=D(),nt=vt.S;nt!==null&&nt(at,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(Ht,lt)}catch(bt){lt(bt)}finally{vt.T=X}},St.unstable_useCacheRefresh=function(){return vt.H.useCacheRefresh()},St.use=function(D){return vt.H.use(D)},St.useActionState=function(D,X,at){return vt.H.useActionState(D,X,at)},St.useCallback=function(D,X){return vt.H.useCallback(D,X)},St.useContext=function(D){return vt.H.useContext(D)},St.useDebugValue=function(){},St.useDeferredValue=function(D,X){return vt.H.useDeferredValue(D,X)},St.useEffect=function(D,X){return vt.H.useEffect(D,X)},St.useId=function(){return vt.H.useId()},St.useImperativeHandle=function(D,X,at){return vt.H.useImperativeHandle(D,X,at)},St.useInsertionEffect=function(D,X){return vt.H.useInsertionEffect(D,X)},St.useLayoutEffect=function(D,X){return vt.H.useLayoutEffect(D,X)},St.useMemo=function(D,X){return vt.H.useMemo(D,X)},St.useOptimistic=function(D,X){return vt.H.useOptimistic(D,X)},St.useReducer=function(D,X,at){return vt.H.useReducer(D,X,at)},St.useRef=function(D){return vt.H.useRef(D)},St.useState=function(D){return vt.H.useState(D)},St.useSyncExternalStore=function(D,X,at){return vt.H.useSyncExternalStore(D,X,at)},St.useTransition=function(){return vt.H.useTransition()},St.version="19.0.0",St}var Zy;function Jd(){return Zy||(Zy=1,sd.exports=OA()),sd.exports}var ee=Jd(),ad={exports:{}},ll={},od={exports:{}},ld={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function NA(){return Jy||(Jy=1,function(r){function t(tt,dt){var lt=tt.length;tt.push(dt);t:for(;0<lt;){var Ht=lt-1>>>1,D=tt[Ht];if(0<l(D,dt))tt[Ht]=dt,tt[lt]=D,lt=Ht;else break t}}function n(tt){return tt.length===0?null:tt[0]}function s(tt){if(tt.length===0)return null;var dt=tt[0],lt=tt.pop();if(lt!==dt){tt[0]=lt;t:for(var Ht=0,D=tt.length,X=D>>>1;Ht<X;){var at=2*(Ht+1)-1,et=tt[at],nt=at+1,bt=tt[nt];if(0>l(et,lt))nt<D&&0>l(bt,et)?(tt[Ht]=bt,tt[nt]=lt,Ht=nt):(tt[Ht]=et,tt[at]=lt,Ht=at);else if(nt<D&&0>l(bt,lt))tt[Ht]=bt,tt[nt]=lt,Ht=nt;else break t}}return dt}function l(tt,dt){var lt=tt.sortIndex-dt.sortIndex;return lt!==0?lt:tt.id-dt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var p=[],v=[],A=1,C=null,x=3,B=!1,Q=!1,J=!1,$=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;function _t(tt){for(var dt=n(v);dt!==null;){if(dt.callback===null)s(v);else if(dt.startTime<=tt)s(v),dt.sortIndex=dt.expirationTime,t(p,dt);else break;dt=n(v)}}function jt(tt){if(J=!1,_t(tt),!Q)if(n(p)!==null)Q=!0,ye();else{var dt=n(v);dt!==null&&he(jt,dt.startTime-tt)}}var vt=!1,Dt=-1,M=5,w=-1;function S(){return!(r.unstable_now()-w<M)}function I(){if(vt){var tt=r.unstable_now();w=tt;var dt=!0;try{t:{Q=!1,J&&(J=!1,pt(Dt),Dt=-1),B=!0;var lt=x;try{e:{for(_t(tt),C=n(p);C!==null&&!(C.expirationTime>tt&&S());){var Ht=C.callback;if(typeof Ht=="function"){C.callback=null,x=C.priorityLevel;var D=Ht(C.expirationTime<=tt);if(tt=r.unstable_now(),typeof D=="function"){C.callback=D,_t(tt),dt=!0;break e}C===n(p)&&s(p),_t(tt)}else s(p);C=n(p)}if(C!==null)dt=!0;else{var X=n(v);X!==null&&he(jt,X.startTime-tt),dt=!1}}break t}finally{C=null,x=lt,B=!1}dt=void 0}}finally{dt?V():vt=!1}}}var V;if(typeof ft=="function")V=function(){ft(I)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,R=P.port2;P.port1.onmessage=I,V=function(){R.postMessage(null)}}else V=function(){$(I,0)};function ye(){vt||(vt=!0,V())}function he(tt,dt){Dt=$(function(){tt(r.unstable_now())},dt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(tt){tt.callback=null},r.unstable_continueExecution=function(){Q||B||(Q=!0,ye())},r.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<tt?Math.floor(1e3/tt):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return n(p)},r.unstable_next=function(tt){switch(x){case 1:case 2:case 3:var dt=3;break;default:dt=x}var lt=x;x=dt;try{return tt()}finally{x=lt}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(tt,dt){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var lt=x;x=tt;try{return dt()}finally{x=lt}},r.unstable_scheduleCallback=function(tt,dt,lt){var Ht=r.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?Ht+lt:Ht):lt=Ht,tt){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=lt+D,tt={id:A++,callback:dt,priorityLevel:tt,startTime:lt,expirationTime:D,sortIndex:-1},lt>Ht?(tt.sortIndex=lt,t(v,tt),n(p)===null&&tt===n(v)&&(J?(pt(Dt),Dt=-1):J=!0,he(jt,lt-Ht))):(tt.sortIndex=D,t(p,tt),Q||B||(Q=!0,ye())),tt},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(tt){var dt=x;return function(){var lt=x;x=dt;try{return tt.apply(this,arguments)}finally{x=lt}}}}(ld)),ld}var t_;function VA(){return t_||(t_=1,od.exports=NA()),od.exports}var ud={exports:{}},Fe={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function MA(){if(e_)return Fe;e_=1;var r=Jd();function t(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,v,A){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:C==null?null:""+C,children:p,containerInfo:v,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Fe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fe.createPortal=function(p,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(t(299));return c(p,v,null,A)},Fe.flushSync=function(p){var v=d.T,A=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=v,s.p=A,s.d.f()}},Fe.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(p,v))},Fe.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Fe.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var A=v.as,C=g(A,v.crossOrigin),x=typeof v.integrity=="string"?v.integrity:void 0,B=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?s.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:C,integrity:x,fetchPriority:B}):A==="script"&&s.d.X(p,{crossOrigin:C,integrity:x,fetchPriority:B,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Fe.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=g(v.as,v.crossOrigin);s.d.M(p,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(p)},Fe.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,C=g(A,v.crossOrigin);s.d.L(p,A,{crossOrigin:C,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Fe.preloadModule=function(p,v){if(typeof p=="string")if(v){var A=g(v.as,v.crossOrigin);s.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(p)},Fe.requestFormReset=function(p){s.d.r(p)},Fe.unstable_batchedUpdates=function(p,v){return p(v)},Fe.useFormState=function(p,v,A){return d.H.useFormState(p,v,A)},Fe.useFormStatus=function(){return d.H.useHostTransitionStatus()},Fe.version="19.0.0",Fe}var n_;function UA(){if(n_)return ud.exports;n_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ud.exports=MA(),ud.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i_;function kA(){if(i_)return ll;i_=1;var r=VA(),t=Jd(),n=UA();function s(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),_t=Symbol.for("react.offscreen"),jt=Symbol.for("react.memo_cache_sentinel"),vt=Symbol.iterator;function Dt(e){return e===null||typeof e!="object"?null:(e=vt&&e[vt]||e["@@iterator"],typeof e=="function"?e:null)}var M=Symbol.for("react.client.reference");function w(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===M?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case g:return"Portal";case A:return"Profiler";case v:return"StrictMode";case J:return"Suspense";case $:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case Q:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pt:return i=e.displayName||null,i!==null?i:w(e.type)||"Memo";case ft:i=e._payload,e=e._init;try{return w(e(i))}catch{}}return null}var S=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,V,P;function R(e){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||"",P=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+V+e+P}var ye=!1;function he(e,i){if(!e||ye)return"";ye=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(H){var z=H}Reflect.construct(e,[],K)}else{try{K.call()}catch(H){z=H}e.call(K.prototype)}}else{try{throw Error()}catch(H){z=H}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(H){if(H&&z&&typeof H.stack=="string")return[H.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),_=f[0],E=f[1];if(_&&E){var b=_.split(`
`),N=E.split(`
`);for(h=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;if(o===b.length||h===N.length)for(o=b.length-1,h=N.length-1;1<=o&&0<=h&&b[o]!==N[h];)h--;for(;1<=o&&0<=h;o--,h--)if(b[o]!==N[h]){if(o!==1||h!==1)do if(o--,h--,0>h||b[o]!==N[h]){var q=`
`+b[o].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=o&&0<=h);break}}}finally{ye=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?R(a):""}function tt(e){switch(e.tag){case 26:case 27:case 5:return R(e.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function dt(e){try{var i="";do i+=tt(e),e=e.return;while(e);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function lt(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function Ht(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function D(e){if(lt(e)!==e)throw Error(s(188))}function X(e){var i=e.alternate;if(!i){if(i=lt(e),i===null)throw Error(s(188));return i!==e?null:e}for(var a=e,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return D(h),e;if(f===o)return D(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=h,o=f;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,o=f;break}if(E===o){_=!0,o=h,a=f;break}E=E.sibling}if(!_){for(E=f.child;E;){if(E===a){_=!0,a=f,o=h;break}if(E===o){_=!0,o=f,a=h;break}E=E.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:i}function at(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=at(e),i!==null)return i;e=e.sibling}return null}var et=Array.isArray,nt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt={pending:!1,data:null,method:null,action:null},At=[],fe=-1;function xt(e){return{current:e}}function ie(e){0>fe||(e.current=At[fe],At[fe]=null,fe--)}function Gt(e,i){fe++,At[fe]=e.current,e.current=i}var Xe=xt(null),di=xt(null),gn=xt(null),Yi=xt(null);function Xi(e,i){switch(Gt(gn,i),Gt(di,e),Gt(Xe,null),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?by(i):0;break;default:if(e=e===8?i.parentNode:i,i=e.tagName,e=e.namespaceURI)e=by(e),i=wy(e,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(Xe),Gt(Xe,i)}function mi(){ie(Xe),ie(di),ie(gn)}function eo(e){e.memoizedState!==null&&Gt(Yi,e);var i=Xe.current,a=wy(i,e.type);i!==a&&(Gt(di,e),Gt(Xe,a))}function js(e){di.current===e&&(ie(Xe),ie(di)),Yi.current===e&&(ie(Yi),nl._currentValue=bt)}var Hs=Object.prototype.hasOwnProperty,Yr=r.unstable_scheduleCallback,qs=r.unstable_cancelCallback,sh=r.unstable_shouldYield,no=r.unstable_requestPaint,en=r.unstable_now,Pl=r.unstable_getCurrentPriorityLevel,_e=r.unstable_ImmediatePriority,Ie=r.unstable_UserBlockingPriority,gi=r.unstable_NormalPriority,xl=r.unstable_LowPriority,io=r.unstable_IdlePriority,ah=r.log,Xr=r.unstable_setDisableYieldValue,$i=null,He=null;function ro(e){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot($i,e,void 0,(e.current.flags&128)===128)}catch{}}function Fn(e){if(typeof ah=="function"&&Xr(e),He&&typeof He.setStrictMode=="function")try{He.setStrictMode($i,e)}catch{}}var $e=Math.clz32?Math.clz32:zl,so=Math.log,Ll=Math.LN2;function zl(e){return e>>>=0,e===0?32:31-(so(e)/Ll|0)|0}var Gn=128,Wi=4194304;function Mn(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function pn(e,i){var a=e.pendingLanes;if(a===0)return 0;var o=0,h=e.suspendedLanes,f=e.pingedLanes,_=e.warmLanes;e=e.finishedLanes!==0;var E=a&134217727;return E!==0?(a=E&~h,a!==0?o=Mn(a):(f&=E,f!==0?o=Mn(f):e||(_=E&~_,_!==0&&(o=Mn(_))))):(E=a&~h,E!==0?o=Mn(E):f!==0?o=Mn(f):e||(_=a&~_,_!==0&&(o=Mn(_)))),o===0?0:i!==0&&i!==o&&!(i&h)&&(h=o&-o,_=i&-i,h>=_||h===32&&(_&4194176)!==0)?i:o}function Zi(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Fs(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ao(){var e=Gn;return Gn<<=1,!(Gn&4194176)&&(Gn=128),e}function Ji(){var e=Wi;return Wi<<=1,!(Wi&62914560)&&(Wi=4194304),e}function Gs(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function le(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Bl(e,i,a,o,h,f){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,N=e.hiddenUpdates;for(a=_&~a;0<a;){var q=31-$e(a),K=1<<q;E[q]=0,b[q]=-1;var z=N[q];if(z!==null)for(N[q]=null,q=0;q<z.length;q++){var H=z[q];H!==null&&(H.lane&=-536870913)}a&=~K}o!==0&&tr(e,o,0),f!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=f&~(_&~i))}function tr(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-$e(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194218}function er(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-$e(a),h=1<<o;h&i|e[o]&i&&(e[o]|=i),a&=~h}}function jl(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Hl(){var e=nt.p;return e!==0?e:(e=window.event,e===void 0?32:qy(e.type))}function nr(e,i){var a=nt.p;try{return nt.p=e,i()}finally{nt.p=a}}var Qn=Math.random().toString(36).slice(2),Ce="__reactFiber$"+Qn,ve="__reactProps$"+Qn,pi="__reactContainer$"+Qn,$r="__reactEvents$"+Qn,Qs="__reactListeners$"+Qn,Kn="__reactHandles$"+Qn,oo="__reactResources$"+Qn,ir="__reactMarker$"+Qn;function Wr(e){delete e[Ce],delete e[ve],delete e[$r],delete e[Qs],delete e[Kn]}function Un(e){var i=e[Ce];if(i)return i;for(var a=e.parentNode;a;){if(i=a[pi]||a[Ce]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Cy(e);e!==null;){if(a=e[Ce])return a;e=Cy(e)}return i}e=a,a=e.parentNode}return null}function yi(e){if(e=e[Ce]||e[pi]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function rr(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(s(33))}function sr(e){var i=e[oo];return i||(i=e[oo]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Zt(e){e[ir]=!0}var lo=new Set,Ks={};function an(e,i){nn(e,i),nn(e+"Capture",i)}function nn(e,i){for(Ks[e]=i,e=0;e<i.length;e++)lo.add(i[e])}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uo={},co={};function ql(e){return Hs.call(co,e)?!0:Hs.call(uo,e)?!1:oh.test(e)?co[e]=!0:(uo[e]=!0,!1)}function ar(e,i,a){if(ql(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function or(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function yn(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}function We(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fl(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function lh(e){var i=Fl(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),o=""+e[i];if(!e.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,f.call(this,_)}}),Object.defineProperty(e,i,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Zr(e){e._valueTracker||(e._valueTracker=lh(e))}function ho(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=Fl(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function Ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _i=/[\n"\\]/g;function re(e){return e.replace(_i,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function lr(e,i,a,o,h,f,_,E){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+We(i)):e.value!==""+We(i)&&(e.value=""+We(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?Xs(e,_,We(i)):a!=null?Xs(e,_,We(a)):o!=null&&e.removeAttribute("value"),h==null&&f!=null&&(e.defaultChecked=!!f),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+We(E):e.removeAttribute("name")}function Jr(e,i,a,o,h,f,_,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+We(a):"",i=i!=null?""+We(i):a,E||i===e.value||(e.value=i),e.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_)}function Xs(e,i,a){i==="number"&&Ys(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Lt(e,i,a,o){if(e=e.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=i.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&o&&(e[a].defaultSelected=!0)}else{for(a=""+We(a),i=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function ts(e,i,a){if(i!=null&&(i=""+We(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+We(a):""}function ur(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(s(92));if(et(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=We(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function _n(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var uh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fo(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||uh.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function Gl(e,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&fo(e,h,o)}else for(var f in i)i.hasOwnProperty(f)&&fo(e,f,i[f])}function mo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ch=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yn(e){return hh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var vn=null;function $s(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vi=null,Ei=null;function Ti(e){var i=yi(e);if(i&&(e=i.stateNode)){var a=e[ve]||null;t:switch(e=i.stateNode,i.type){case"input":if(lr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+re(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var h=o[ve]||null;if(!h)throw Error(s(90));lr(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&ho(o)}break t;case"textarea":ts(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Lt(e,!!a.multiple,i,!1)}}}var go=!1;function Ql(e,i,a){if(go)return e(i,a);go=!0;try{var o=e(i);return o}finally{if(go=!1,(vi!==null||Ei!==null)&&(xu(),vi&&(i=vi,e=Ei,Ei=vi=null,Ti(i),e)))for(i=0;i<e.length;i++)Ti(e[i])}}function es(e,i){var a=e.stateNode;if(a===null)return null;var o=a[ve]||null;if(o===null)return null;a=o[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var En=!1;if(on)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){En=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{En=!1}var Xn=null,cr=null,Ai=null;function po(){if(Ai)return Ai;var e,i=cr,a=i.length,o,h="value"in Xn?Xn.value:Xn.textContent,f=h.length;for(e=0;e<a&&i[e]===h[e];e++);var _=a-e;for(o=1;o<=_&&i[a-o]===h[f-o];o++);return Ai=h.slice(e,1<o?1-o:void 0)}function $n(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function yo(){return!1}function De(e){function i(a,o,h,f,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:yo,this.isPropagationStopped=yo,this}return I(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=De(qt),is=I({},qt,{view:0,detail:0}),Kl=De(is),Zs,Js,Zn,rs=I({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zn&&(Zn&&e.type==="mousemove"?(Zs=e.screenX-Zn.screenX,Js=e.screenY-Zn.screenY):Js=Zs=0,Zn=e),Zs)},movementY:function(e){return"movementY"in e?e.movementY:Js}}),Tn=De(rs),Yl=I({},rs,{dataTransfer:0}),fh=De(Yl),ss=I({},is,{relatedTarget:0}),ta=De(ss),_o=I({},qt,{animationName:0,elapsedTime:0,pseudoElement:0}),ea=De(_o),Xl=I({},qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),na=De(Xl),dh=I({},qt,{data:0}),vo=De(dh),as={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$l={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eo(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Wl[e])?!!i[e]:!1}function os(){return Eo}var Zl=I({},is,{key:function(e){if(e.key){var i=as[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=$n(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$l[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(e){return e.type==="keypress"?$n(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$n(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ia=De(Zl),Jl=I({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),To=De(Jl),Si=I({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),tu=De(Si),eu=I({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),nu=De(eu),iu=I({},rs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ra=De(iu),Ze=I({},qt,{newState:0,oldState:0}),ru=De(Ze),su=[9,13,27,32],Jn=on&&"CompositionEvent"in window,u=null;on&&"documentMode"in document&&(u=document.documentMode);var m=on&&"TextEvent"in window&&!u,y=on&&(!Jn||u&&8<u&&11>=u),T=" ",k=!1;function j(e,i){switch(e){case"keyup":return su.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mt=!1;function Ee(e,i){switch(e){case"compositionend":return Z(i);case"keypress":return i.which!==32?null:(k=!0,T);case"textInput":return e=i.data,e===T&&k?null:e;default:return null}}function Ut(e,i){if(Mt)return e==="compositionend"||!Jn&&j(e,i)?(e=po(),Ai=cr=Xn=null,Mt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var Oe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Te(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Oe[e.type]:i==="textarea"}function bi(e,i,a,o){vi?Ei?Ei.push(o):Ei=[o]:vi=o,i=Hu(i,"onChange"),0<i.length&&(a=new Ws("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var ke=null,ti=null;function Ao(e){vy(e,0)}function au(e){var i=rr(e);if(ho(i))return e}function Ym(e,i){if(e==="change")return i}var Xm=!1;if(on){var mh;if(on){var gh="oninput"in document;if(!gh){var $m=document.createElement("div");$m.setAttribute("oninput","return;"),gh=typeof $m.oninput=="function"}mh=gh}else mh=!1;Xm=mh&&(!document.documentMode||9<document.documentMode)}function Wm(){ke&&(ke.detachEvent("onpropertychange",Zm),ti=ke=null)}function Zm(e){if(e.propertyName==="value"&&au(ti)){var i=[];bi(i,ti,e,$s(e)),Ql(Ao,i)}}function r0(e,i,a){e==="focusin"?(Wm(),ke=i,ti=a,ke.attachEvent("onpropertychange",Zm)):e==="focusout"&&Wm()}function s0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return au(ti)}function a0(e,i){if(e==="click")return au(i)}function o0(e,i){if(e==="input"||e==="change")return au(i)}function l0(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var ln=typeof Object.is=="function"?Object.is:l0;function So(e,i){if(ln(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Hs.call(i,h)||!ln(e[h],i[h]))return!1}return!0}function Jm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tg(e,i){var a=Jm(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Jm(a)}}function eg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?eg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function ng(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ys(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ys(e.document)}return i}function ph(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function u0(e,i){var a=ng(i);i=e.focusedElem;var o=e.selectionRange;if(a!==i&&i&&i.ownerDocument&&eg(i.ownerDocument.documentElement,i)){if(o!==null&&ph(i)){if(e=o.start,a=o.end,a===void 0&&(a=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(a,i.value.length);else if(a=(e=i.ownerDocument||document)&&e.defaultView||window,a.getSelection){a=a.getSelection();var h=i.textContent.length,f=Math.min(o.start,h);o=o.end===void 0?f:Math.min(o.end,h),!a.extend&&f>o&&(h=o,o=f,f=h),h=tg(i,f);var _=tg(i,o);h&&_&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==_.node||a.focusOffset!==_.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),a.removeAllRanges(),f>o?(a.addRange(e),a.extend(_.node,_.offset)):(e.setEnd(_.node,_.offset),a.addRange(e)))}}for(e=[],a=i;a=a.parentNode;)a.nodeType===1&&e.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)a=e[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var c0=on&&"documentMode"in document&&11>=document.documentMode,sa=null,yh=null,bo=null,_h=!1;function ig(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_h||sa==null||sa!==Ys(o)||(o=sa,"selectionStart"in o&&ph(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),bo&&So(bo,o)||(bo=o,o=Hu(yh,"onSelect"),0<o.length&&(i=new Ws("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=sa)))}function ls(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var aa={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},vh={},rg={};on&&(rg=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function us(e){if(vh[e])return vh[e];if(!aa[e])return e;var i=aa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in rg)return vh[e]=i[a];return e}var sg=us("animationend"),ag=us("animationiteration"),og=us("animationstart"),h0=us("transitionrun"),f0=us("transitionstart"),d0=us("transitioncancel"),lg=us("transitionend"),ug=new Map,cg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kn(e,i){ug.set(e,i),an(i,[e])}var An=[],oa=0,Eh=0;function ou(){for(var e=oa,i=Eh=oa=0;i<e;){var a=An[i];An[i++]=null;var o=An[i];An[i++]=null;var h=An[i];An[i++]=null;var f=An[i];if(An[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}f!==0&&hg(a,h,f)}}function lu(e,i,a,o){An[oa++]=e,An[oa++]=i,An[oa++]=a,An[oa++]=o,Eh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Th(e,i,a,o){return lu(e,i,a,o),uu(e)}function hr(e,i){return lu(e,null,null,i),uu(e)}function hg(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(h=!0)),e=f,f=f.return;h&&i!==null&&e.tag===3&&(f=e.stateNode,h=31-$e(a),f=f.hiddenUpdates,e=f[h],e===null?f[h]=[i]:e.push(i),i.lane=a|536870912)}function uu(e){if(50<Xo)throw Xo=0,Cf=null,Error(s(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var la={},fg=new WeakMap;function Sn(e,i){if(typeof e=="object"&&e!==null){var a=fg.get(e);return a!==void 0?a:(i={value:e,source:i,stack:dt(i)},fg.set(e,i),i)}return{value:e,source:i,stack:dt(i)}}var ua=[],ca=0,cu=null,hu=0,bn=[],wn=0,cs=null,wi=1,Ri="";function hs(e,i){ua[ca++]=hu,ua[ca++]=cu,cu=e,hu=i}function dg(e,i,a){bn[wn++]=wi,bn[wn++]=Ri,bn[wn++]=cs,cs=e;var o=wi;e=Ri;var h=32-$e(o)-1;o&=~(1<<h),a+=1;var f=32-$e(i)+h;if(30<f){var _=h-h%5;f=(o&(1<<_)-1).toString(32),o>>=_,h-=_,wi=1<<32-$e(i)+h|a<<h|o,Ri=f+e}else wi=1<<f|a<<h|o,Ri=e}function Ah(e){e.return!==null&&(hs(e,1),dg(e,1,0))}function Sh(e){for(;e===cu;)cu=ua[--ca],ua[ca]=null,hu=ua[--ca],ua[ca]=null;for(;e===cs;)cs=bn[--wn],bn[wn]=null,Ri=bn[--wn],bn[wn]=null,wi=bn[--wn],bn[wn]=null}var Je=null,Pe=null,zt=!1,Pn=null,ei=!1,bh=Error(s(519));function fs(e){var i=Error(s(418,""));throw Io(Sn(i,e)),bh}function mg(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[Ce]=e,i[ve]=o,a){case"dialog":Vt("cancel",i),Vt("close",i);break;case"iframe":case"object":case"embed":Vt("load",i);break;case"video":case"audio":for(a=0;a<Wo.length;a++)Vt(Wo[a],i);break;case"source":Vt("error",i);break;case"img":case"image":case"link":Vt("error",i),Vt("load",i);break;case"details":Vt("toggle",i);break;case"input":Vt("invalid",i),Jr(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Zr(i);break;case"select":Vt("invalid",i);break;case"textarea":Vt("invalid",i),ur(i,o.value,o.defaultValue,o.children),Zr(i)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Sy(i.textContent,a)?(o.popover!=null&&(Vt("beforetoggle",i),Vt("toggle",i)),o.onScroll!=null&&Vt("scroll",i),o.onScrollEnd!=null&&Vt("scrollend",i),o.onClick!=null&&(i.onclick=qu),i=!0):i=!1,i||fs(e)}function gg(e){for(Je=e.return;Je;)switch(Je.tag){case 3:case 27:ei=!0;return;case 5:case 13:ei=!1;return;default:Je=Je.return}}function wo(e){if(e!==Je)return!1;if(!zt)return gg(e),zt=!0,!1;var i=!1,a;if((a=e.tag!==3&&e.tag!==27)&&((a=e.tag===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Gf(e.type,e.memoizedProps)),a=!a),a&&(i=!0),i&&Pe&&fs(e),gg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(i===0){Pe=Ln(e.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;e=e.nextSibling}Pe=null}}else Pe=Je?Ln(e.stateNode.nextSibling):null;return!0}function Ro(){Pe=Je=null,zt=!1}function Io(e){Pn===null?Pn=[e]:Pn.push(e)}var Co=Error(s(460)),pg=Error(s(474)),wh={then:function(){}};function yg(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fu(){}function _g(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(fu,fu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Co?Error(s(483)):e;default:if(typeof i.status=="string")i.then(fu,fu);else{if(e=Xt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Co?Error(s(483)):e}throw Do=i,Co}}var Do=null;function vg(){if(Do===null)throw Error(s(459));var e=Do;return Do=null,e}var ha=null,Oo=0;function du(e){var i=Oo;return Oo+=1,ha===null&&(ha=[]),_g(ha,e,i)}function No(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function mu(e,i){throw i.$$typeof===c?Error(s(525)):(e=Object.prototype.toString.call(i),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Eg(e){var i=e._init;return i(e._payload)}function Tg(e){function i(U,O){if(e){var L=U.deletions;L===null?(U.deletions=[O],U.flags|=16):L.push(O)}}function a(U,O){if(!e)return null;for(;O!==null;)i(U,O),O=O.sibling;return null}function o(U){for(var O=new Map;U!==null;)U.key!==null?O.set(U.key,U):O.set(U.index,U),U=U.sibling;return O}function h(U,O){return U=Sr(U,O),U.index=0,U.sibling=null,U}function f(U,O,L){return U.index=L,e?(L=U.alternate,L!==null?(L=L.index,L<O?(U.flags|=33554434,O):L):(U.flags|=33554434,O)):(U.flags|=1048576,O)}function _(U){return e&&U.alternate===null&&(U.flags|=33554434),U}function E(U,O,L,F){return O===null||O.tag!==6?(O=Ef(L,U.mode,F),O.return=U,O):(O=h(O,L),O.return=U,O)}function b(U,O,L,F){var rt=L.type;return rt===p?q(U,O,L.props.children,F,L.key):O!==null&&(O.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ft&&Eg(rt)===O.type)?(O=h(O,L.props),No(O,L),O.return=U,O):(O=Vu(L.type,L.key,L.props,null,U.mode,F),No(O,L),O.return=U,O)}function N(U,O,L,F){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=Tf(L,U.mode,F),O.return=U,O):(O=h(O,L.children||[]),O.return=U,O)}function q(U,O,L,F,rt){return O===null||O.tag!==7?(O=As(L,U.mode,F,rt),O.return=U,O):(O=h(O,L),O.return=U,O)}function K(U,O,L){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ef(""+O,U.mode,L),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case d:return L=Vu(O.type,O.key,O.props,null,U.mode,L),No(L,O),L.return=U,L;case g:return O=Tf(O,U.mode,L),O.return=U,O;case ft:var F=O._init;return O=F(O._payload),K(U,O,L)}if(et(O)||Dt(O))return O=As(O,U.mode,L,null),O.return=U,O;if(typeof O.then=="function")return K(U,du(O),L);if(O.$$typeof===B)return K(U,Du(U,O),L);mu(U,O)}return null}function z(U,O,L,F){var rt=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return rt!==null?null:E(U,O,""+L,F);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case d:return L.key===rt?b(U,O,L,F):null;case g:return L.key===rt?N(U,O,L,F):null;case ft:return rt=L._init,L=rt(L._payload),z(U,O,L,F)}if(et(L)||Dt(L))return rt!==null?null:q(U,O,L,F,null);if(typeof L.then=="function")return z(U,O,du(L),F);if(L.$$typeof===B)return z(U,O,Du(U,L),F);mu(U,L)}return null}function H(U,O,L,F,rt){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return U=U.get(L)||null,E(O,U,""+F,rt);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case d:return U=U.get(F.key===null?L:F.key)||null,b(O,U,F,rt);case g:return U=U.get(F.key===null?L:F.key)||null,N(O,U,F,rt);case ft:var It=F._init;return F=It(F._payload),H(U,O,L,F,rt)}if(et(F)||Dt(F))return U=U.get(L)||null,q(O,U,F,rt,null);if(typeof F.then=="function")return H(U,O,L,du(F),rt);if(F.$$typeof===B)return H(U,O,L,Du(O,F),rt);mu(O,F)}return null}function st(U,O,L,F){for(var rt=null,It=null,ot=O,ht=O=0,Me=null;ot!==null&&ht<L.length;ht++){ot.index>ht?(Me=ot,ot=null):Me=ot.sibling;var Bt=z(U,ot,L[ht],F);if(Bt===null){ot===null&&(ot=Me);break}e&&ot&&Bt.alternate===null&&i(U,ot),O=f(Bt,O,ht),It===null?rt=Bt:It.sibling=Bt,It=Bt,ot=Me}if(ht===L.length)return a(U,ot),zt&&hs(U,ht),rt;if(ot===null){for(;ht<L.length;ht++)ot=K(U,L[ht],F),ot!==null&&(O=f(ot,O,ht),It===null?rt=ot:It.sibling=ot,It=ot);return zt&&hs(U,ht),rt}for(ot=o(ot);ht<L.length;ht++)Me=H(ot,U,ht,L[ht],F),Me!==null&&(e&&Me.alternate!==null&&ot.delete(Me.key===null?ht:Me.key),O=f(Me,O,ht),It===null?rt=Me:It.sibling=Me,It=Me);return e&&ot.forEach(function(Or){return i(U,Or)}),zt&&hs(U,ht),rt}function Et(U,O,L,F){if(L==null)throw Error(s(151));for(var rt=null,It=null,ot=O,ht=O=0,Me=null,Bt=L.next();ot!==null&&!Bt.done;ht++,Bt=L.next()){ot.index>ht?(Me=ot,ot=null):Me=ot.sibling;var Or=z(U,ot,Bt.value,F);if(Or===null){ot===null&&(ot=Me);break}e&&ot&&Or.alternate===null&&i(U,ot),O=f(Or,O,ht),It===null?rt=Or:It.sibling=Or,It=Or,ot=Me}if(Bt.done)return a(U,ot),zt&&hs(U,ht),rt;if(ot===null){for(;!Bt.done;ht++,Bt=L.next())Bt=K(U,Bt.value,F),Bt!==null&&(O=f(Bt,O,ht),It===null?rt=Bt:It.sibling=Bt,It=Bt);return zt&&hs(U,ht),rt}for(ot=o(ot);!Bt.done;ht++,Bt=L.next())Bt=H(ot,U,ht,Bt.value,F),Bt!==null&&(e&&Bt.alternate!==null&&ot.delete(Bt.key===null?ht:Bt.key),O=f(Bt,O,ht),It===null?rt=Bt:It.sibling=Bt,It=Bt);return e&&ot.forEach(function(IA){return i(U,IA)}),zt&&hs(U,ht),rt}function oe(U,O,L,F){if(typeof L=="object"&&L!==null&&L.type===p&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case d:t:{for(var rt=L.key;O!==null;){if(O.key===rt){if(rt=L.type,rt===p){if(O.tag===7){a(U,O.sibling),F=h(O,L.props.children),F.return=U,U=F;break t}}else if(O.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===ft&&Eg(rt)===O.type){a(U,O.sibling),F=h(O,L.props),No(F,L),F.return=U,U=F;break t}a(U,O);break}else i(U,O);O=O.sibling}L.type===p?(F=As(L.props.children,U.mode,F,L.key),F.return=U,U=F):(F=Vu(L.type,L.key,L.props,null,U.mode,F),No(F,L),F.return=U,U=F)}return _(U);case g:t:{for(rt=L.key;O!==null;){if(O.key===rt)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){a(U,O.sibling),F=h(O,L.children||[]),F.return=U,U=F;break t}else{a(U,O);break}else i(U,O);O=O.sibling}F=Tf(L,U.mode,F),F.return=U,U=F}return _(U);case ft:return rt=L._init,L=rt(L._payload),oe(U,O,L,F)}if(et(L))return st(U,O,L,F);if(Dt(L)){if(rt=Dt(L),typeof rt!="function")throw Error(s(150));return L=rt.call(L),Et(U,O,L,F)}if(typeof L.then=="function")return oe(U,O,du(L),F);if(L.$$typeof===B)return oe(U,O,Du(U,L),F);mu(U,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,O!==null&&O.tag===6?(a(U,O.sibling),F=h(O,L),F.return=U,U=F):(a(U,O),F=Ef(L,U.mode,F),F.return=U,U=F),_(U)):a(U,O)}return function(U,O,L,F){try{Oo=0;var rt=oe(U,O,L,F);return ha=null,rt}catch(ot){if(ot===Co)throw ot;var It=Dn(29,ot,null,U.mode);return It.lanes=F,It.return=U,It}finally{}}}var ds=Tg(!0),Ag=Tg(!1),fa=xt(null),gu=xt(0);function Sg(e,i){e=xi,Gt(gu,e),Gt(fa,i),xi=e|i.baseLanes}function Rh(){Gt(gu,xi),Gt(fa,fa.current)}function Ih(){xi=gu.current,ie(fa),ie(gu)}var Rn=xt(null),ni=null;function fr(e){var i=e.alternate;Gt(Ae,Ae.current&1),Gt(Rn,e),ni===null&&(i===null||fa.current!==null||i.memoizedState!==null)&&(ni=e)}function bg(e){if(e.tag===22){if(Gt(Ae,Ae.current),Gt(Rn,e),ni===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ni=e)}}else dr()}function dr(){Gt(Ae,Ae.current),Gt(Rn,Rn.current)}function Ii(e){ie(Rn),ni===e&&(ni=null),ie(Ae)}var Ae=xt(0);function pu(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var m0=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},g0=r.unstable_scheduleCallback,p0=r.unstable_NormalPriority,Se={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ch(){return{controller:new m0,data:new Map,refCount:0}}function Vo(e){e.refCount--,e.refCount===0&&g0(p0,function(){e.controller.abort()})}var Mo=null,Dh=0,da=0,ma=null;function y0(e,i){if(Mo===null){var a=Mo=[];Dh=0,da=Pf(),ma={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Dh++,i.then(wg,wg),i}function wg(){if(--Dh===0&&Mo!==null){ma!==null&&(ma.status="fulfilled");var e=Mo;Mo=null,da=0,ma=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function _0(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Rg=S.S;S.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&y0(e,i),Rg!==null&&Rg(e,i)};var ms=xt(null);function Oh(){var e=ms.current;return e!==null?e:Xt.pooledCache}function yu(e,i){i===null?Gt(ms,ms.current):Gt(ms,i.pool)}function Ig(){var e=Oh();return e===null?null:{parent:Se._currentValue,pool:e}}var mr=0,wt=null,Qt=null,de=null,_u=!1,ga=!1,gs=!1,vu=0,Uo=0,pa=null,v0=0;function ue(){throw Error(s(321))}function Nh(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!ln(e[a],i[a]))return!1;return!0}function Vh(e,i,a,o,h,f){return mr=f,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,S.H=e===null||e.memoizedState===null?ps:gr,gs=!1,f=a(o,h),gs=!1,ga&&(f=Dg(i,a,o,h)),Cg(e),f}function Cg(e){S.H=ii;var i=Qt!==null&&Qt.next!==null;if(mr=0,de=Qt=wt=null,_u=!1,Uo=0,pa=null,i)throw Error(s(300));e===null||Ne||(e=e.dependencies,e!==null&&Cu(e)&&(Ne=!0))}function Dg(e,i,a,o){wt=e;var h=0;do{if(ga&&(pa=null),Uo=0,ga=!1,25<=h)throw Error(s(301));if(h+=1,de=Qt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}S.H=ys,f=i(a,o)}while(ga);return f}function E0(){var e=S.H,i=e.useState()[0];return i=typeof i.then=="function"?ko(i):i,e=e.useState()[0],(Qt!==null?Qt.memoizedState:null)!==e&&(wt.flags|=1024),i}function Mh(){var e=vu!==0;return vu=0,e}function Uh(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function kh(e){if(_u){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}_u=!1}mr=0,de=Qt=wt=null,ga=!1,Uo=vu=0,pa=null}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?wt.memoizedState=de=e:de=de.next=e,de}function me(){if(Qt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Qt.next;var i=de===null?wt.memoizedState:de.next;if(i!==null)de=i,Qt=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Qt=e,e={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},de===null?wt.memoizedState=de=e:de=de.next=e}return de}var Eu;Eu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ko(e){var i=Uo;return Uo+=1,pa===null&&(pa=[]),e=_g(pa,e,i),i=wt,(de===null?i.memoizedState:de.next)===null&&(i=i.alternate,S.H=i===null||i.memoizedState===null?ps:gr),e}function Tu(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ko(e);if(e.$$typeof===B)return qe(e)}throw Error(s(438,String(e)))}function Ph(e){var i=null,a=wt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=wt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Eu(),wt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=jt;return i.index++,a}function Ci(e,i){return typeof i=="function"?i(e):i}function Au(e){var i=me();return xh(i,Qt,e)}function xh(e,i,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var h=e.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,o.pending=null}if(f=e.baseState,h===null)e.memoizedState=f;else{i=h.next;var E=_=null,b=null,N=i,q=!1;do{var K=N.lane&-536870913;if(K!==N.lane?(kt&K)===K:(mr&K)===K){var z=N.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),K===da&&(q=!0);else if((mr&z)===z){N=N.next,z===da&&(q=!0);continue}else K={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},b===null?(E=b=K,_=f):b=b.next=K,wt.lanes|=z,br|=z;K=N.action,gs&&a(f,K),f=N.hasEagerState?N.eagerState:a(f,K)}else z={lane:K,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},b===null?(E=b=z,_=f):b=b.next=z,wt.lanes|=K,br|=K;N=N.next}while(N!==null&&N!==i);if(b===null?_=f:b.next=E,!ln(f,e.memoizedState)&&(Ne=!0,q&&(a=ma,a!==null)))throw a;e.memoizedState=f,e.baseState=_,e.baseQueue=b,o.lastRenderedState=f}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Lh(e){var i=me(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=e(f,_.action),_=_.next;while(_!==h);ln(f,i.memoizedState)||(Ne=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function Og(e,i,a){var o=wt,h=me(),f=zt;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!ln((Qt||h).memoizedState,a);if(_&&(h.memoizedState=a,Ne=!0),h=h.queue,jh(Mg.bind(null,o,h,e),[e]),h.getSnapshot!==i||_||de!==null&&de.memoizedState.tag&1){if(o.flags|=2048,ya(9,Vg.bind(null,o,h,a,i),{destroy:void 0},null),Xt===null)throw Error(s(349));f||mr&60||Ng(o,i,a)}return a}function Ng(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i=Eu(),wt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Vg(e,i,a,o){i.value=a,i.getSnapshot=o,Ug(i)&&kg(e)}function Mg(e,i,a){return a(function(){Ug(i)&&kg(e)})}function Ug(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!ln(e,a)}catch{return!0}}function kg(e){var i=hr(e,2);i!==null&&tn(i,e,2)}function zh(e){var i=rn();if(typeof e=="function"){var a=e;if(e=a(),gs){Fn(!0);try{a()}finally{Fn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},i}function Pg(e,i,a,o){return e.baseState=a,xh(e,Qt,typeof o=="function"?o:Ci)}function T0(e,i,a,o,h){if(wu(e))throw Error(s(485));if(e=i.action,e!==null){var f={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};S.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,xg(i,f)):(f.next=a.next,i.pending=a.next=f)}}function xg(e,i){var a=i.action,o=i.payload,h=e.state;if(i.isTransition){var f=S.T,_={};S.T=_;try{var E=a(h,o),b=S.S;b!==null&&b(_,E),Lg(e,i,E)}catch(N){Bh(e,i,N)}finally{S.T=f}}else try{f=a(h,o),Lg(e,i,f)}catch(N){Bh(e,i,N)}}function Lg(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){zg(e,i,o)},function(o){return Bh(e,i,o)}):zg(e,i,a)}function zg(e,i,a){i.status="fulfilled",i.value=a,Bg(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,xg(e,a)))}function Bh(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Bg(i),i=i.next;while(i!==o)}e.action=null}function Bg(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function jg(e,i){return i}function Hg(e,i){if(zt){var a=Xt.formState;if(a!==null){t:{var o=wt;if(zt){if(Pe){e:{for(var h=Pe,f=ei;h.nodeType!==8;){if(!f){h=null;break e}if(h=Ln(h.nextSibling),h===null){h=null;break e}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){Pe=Ln(h.nextSibling),o=h.data==="F!";break t}}fs(o)}o=!1}o&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:i},a.queue=o,a=ap.bind(null,wt,o),o.dispatch=a,o=zh(!1),f=Qh.bind(null,wt,!1,o.queue),o=rn(),h={state:i,dispatch:null,action:e,pending:null},o.queue=h,a=T0.bind(null,wt,h,f,a),h.dispatch=a,o.memoizedState=e,[i,a,!1]}function qg(e){var i=me();return Fg(i,Qt,e)}function Fg(e,i,a){i=xh(e,i,jg)[0],e=Au(Ci)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?ko(i):i;var o=me(),h=o.queue,f=h.dispatch;return a!==o.memoizedState&&(wt.flags|=2048,ya(9,A0.bind(null,h,a),{destroy:void 0},null)),[i,f,e]}function A0(e,i){e.action=i}function Gg(e){var i=me(),a=Qt;if(a!==null)return Fg(i,a,e);me(),i=i.memoizedState,a=me();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function ya(e,i,a,o){return e={tag:e,create:i,inst:a,deps:o,next:null},i=wt.updateQueue,i===null&&(i=Eu(),wt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function Qg(){return me().memoizedState}function Su(e,i,a,o){var h=rn();wt.flags|=e,h.memoizedState=ya(1|i,a,{destroy:void 0},o===void 0?null:o)}function bu(e,i,a,o){var h=me();o=o===void 0?null:o;var f=h.memoizedState.inst;Qt!==null&&o!==null&&Nh(o,Qt.memoizedState.deps)?h.memoizedState=ya(i,a,f,o):(wt.flags|=e,h.memoizedState=ya(1|i,a,f,o))}function Kg(e,i){Su(8390656,8,e,i)}function jh(e,i){bu(2048,8,e,i)}function Yg(e,i){return bu(4,2,e,i)}function Xg(e,i){return bu(4,4,e,i)}function $g(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Wg(e,i,a){a=a!=null?a.concat([e]):null,bu(4,4,$g.bind(null,i,e),a)}function Hh(){}function Zg(e,i){var a=me();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Nh(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Jg(e,i){var a=me();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Nh(i,o[1]))return o[0];if(o=e(),gs){Fn(!0);try{e()}finally{Fn(!1)}}return a.memoizedState=[o,i],o}function qh(e,i,a){return a===void 0||mr&1073741824?e.memoizedState=i:(e.memoizedState=a,e=ey(),wt.lanes|=e,br|=e,a)}function tp(e,i,a,o){return ln(a,i)?a:fa.current!==null?(e=qh(e,a,o),ln(e,i)||(Ne=!0),e):mr&42?(e=ey(),wt.lanes|=e,br|=e,i):(Ne=!0,e.memoizedState=a)}function ep(e,i,a,o,h){var f=nt.p;nt.p=f!==0&&8>f?f:8;var _=S.T,E={};S.T=E,Qh(e,!1,i,a);try{var b=h(),N=S.S;if(N!==null&&N(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var q=_0(b,o);Po(e,i,q,fn(e))}else Po(e,i,o,fn(e))}catch(K){Po(e,i,{then:function(){},status:"rejected",reason:K},fn())}finally{nt.p=f,S.T=_}}function S0(){}function Fh(e,i,a,o){if(e.tag!==5)throw Error(s(476));var h=np(e).queue;ep(e,h,i,bt,a===null?S0:function(){return ip(e),a(o)})}function np(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:bt,baseState:bt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:bt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function ip(e){var i=np(e).next.queue;Po(e,i,{},fn())}function Gh(){return qe(nl)}function rp(){return me().memoizedState}function sp(){return me().memoizedState}function b0(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=fn();e=_r(a);var o=vr(i,e,a);o!==null&&(tn(o,i,a),zo(o,i,a)),i={cache:Ch()},e.payload=i;return}i=i.return}}function w0(e,i,a){var o=fn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},wu(e)?op(i,a):(a=Th(e,i,a,o),a!==null&&(tn(a,e,o),lp(a,i,o)))}function ap(e,i,a){var o=fn();Po(e,i,a,o)}function Po(e,i,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(wu(e))op(i,h);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,E=f(_,a);if(h.hasEagerState=!0,h.eagerState=E,ln(E,_))return lu(e,i,h,0),Xt===null&&ou(),!1}catch{}finally{}if(a=Th(e,i,h,o),a!==null)return tn(a,e,o),lp(a,i,o),!0}return!1}function Qh(e,i,a,o){if(o={lane:2,revertLane:Pf(),action:o,hasEagerState:!1,eagerState:null,next:null},wu(e)){if(i)throw Error(s(479))}else i=Th(e,a,o,2),i!==null&&tn(i,e,2)}function wu(e){var i=e.alternate;return e===wt||i!==null&&i===wt}function op(e,i){ga=_u=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function lp(e,i,a){if(a&4194176){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,er(e,a)}}var ii={readContext:qe,use:Tu,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useLayoutEffect:ue,useInsertionEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useSyncExternalStore:ue,useId:ue};ii.useCacheRefresh=ue,ii.useMemoCache=ue,ii.useHostTransitionStatus=ue,ii.useFormState=ue,ii.useActionState=ue,ii.useOptimistic=ue;var ps={readContext:qe,use:Tu,useCallback:function(e,i){return rn().memoizedState=[e,i===void 0?null:i],e},useContext:qe,useEffect:Kg,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Su(4194308,4,$g.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Su(4194308,4,e,i)},useInsertionEffect:function(e,i){Su(4,2,e,i)},useMemo:function(e,i){var a=rn();i=i===void 0?null:i;var o=e();if(gs){Fn(!0);try{e()}finally{Fn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=rn();if(a!==void 0){var h=a(i);if(gs){Fn(!0);try{a(i)}finally{Fn(!1)}}}else h=i;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=w0.bind(null,wt,e),[o.memoizedState,e]},useRef:function(e){var i=rn();return e={current:e},i.memoizedState=e},useState:function(e){e=zh(e);var i=e.queue,a=ap.bind(null,wt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:Hh,useDeferredValue:function(e,i){var a=rn();return qh(a,e,i)},useTransition:function(){var e=zh(!1);return e=ep.bind(null,wt,e.queue,!0,!1),rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=wt,h=rn();if(zt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Xt===null)throw Error(s(349));kt&60||Ng(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Kg(Mg.bind(null,o,f,e),[e]),o.flags|=2048,ya(9,Vg.bind(null,o,f,a,i),{destroy:void 0},null),a},useId:function(){var e=rn(),i=Xt.identifierPrefix;if(zt){var a=Ri,o=wi;a=(o&~(1<<32-$e(o)-1)).toString(32)+a,i=":"+i+"R"+a,a=vu++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=v0++,i=":"+i+"r"+a.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return rn().memoizedState=b0.bind(null,wt)}};ps.useMemoCache=Ph,ps.useHostTransitionStatus=Gh,ps.useFormState=Hg,ps.useActionState=Hg,ps.useOptimistic=function(e){var i=rn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Qh.bind(null,wt,!0,a),a.dispatch=i,[e,i]};var gr={readContext:qe,use:Tu,useCallback:Zg,useContext:qe,useEffect:jh,useImperativeHandle:Wg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Jg,useReducer:Au,useRef:Qg,useState:function(){return Au(Ci)},useDebugValue:Hh,useDeferredValue:function(e,i){var a=me();return tp(a,Qt.memoizedState,e,i)},useTransition:function(){var e=Au(Ci)[0],i=me().memoizedState;return[typeof e=="boolean"?e:ko(e),i]},useSyncExternalStore:Og,useId:rp};gr.useCacheRefresh=sp,gr.useMemoCache=Ph,gr.useHostTransitionStatus=Gh,gr.useFormState=qg,gr.useActionState=qg,gr.useOptimistic=function(e,i){var a=me();return Pg(a,Qt,e,i)};var ys={readContext:qe,use:Tu,useCallback:Zg,useContext:qe,useEffect:jh,useImperativeHandle:Wg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Jg,useReducer:Lh,useRef:Qg,useState:function(){return Lh(Ci)},useDebugValue:Hh,useDeferredValue:function(e,i){var a=me();return Qt===null?qh(a,e,i):tp(a,Qt.memoizedState,e,i)},useTransition:function(){var e=Lh(Ci)[0],i=me().memoizedState;return[typeof e=="boolean"?e:ko(e),i]},useSyncExternalStore:Og,useId:rp};ys.useCacheRefresh=sp,ys.useMemoCache=Ph,ys.useHostTransitionStatus=Gh,ys.useFormState=Gg,ys.useActionState=Gg,ys.useOptimistic=function(e,i){var a=me();return Qt!==null?Pg(a,Qt,e,i):(a.baseState=e,[e,a.queue.dispatch])};function Kh(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:I({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Yh={isMounted:function(e){return(e=e._reactInternals)?lt(e)===e:!1},enqueueSetState:function(e,i,a){e=e._reactInternals;var o=fn(),h=_r(o);h.payload=i,a!=null&&(h.callback=a),i=vr(e,h,o),i!==null&&(tn(i,e,o),zo(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=fn(),h=_r(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=vr(e,h,o),i!==null&&(tn(i,e,o),zo(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=fn(),o=_r(a);o.tag=2,i!=null&&(o.callback=i),i=vr(e,o,a),i!==null&&(tn(i,e,a),zo(i,e,a))}};function up(e,i,a,o,h,f,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,_):i.prototype&&i.prototype.isPureReactComponent?!So(a,o)||!So(h,f):!0}function cp(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&Yh.enqueueReplaceState(i,i.state,null)}function _s(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=I({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var Ru=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function hp(e){Ru(e)}function fp(e){console.error(e)}function dp(e){Ru(e)}function Iu(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function mp(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Xh(e,i,a){return a=_r(a),a.tag=3,a.payload={element:null},a.callback=function(){Iu(e,i)},a}function gp(e){return e=_r(e),e.tag=3,e}function pp(e,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;e.payload=function(){return h(f)},e.callback=function(){mp(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){mp(i,a,o),typeof h!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function R0(e,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Lo(i,a,h,!0),a=Rn.current,a!==null){switch(a.tag){case 13:return ni===null?Nf():a.alternate===null&&ae===0&&(ae=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===wh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),Mf(e,o,h)),!1;case 22:return a.flags|=65536,o===wh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),Mf(e,o,h)),!1}throw Error(s(435,a.tag))}return Mf(e,o,h),Nf(),!1}if(zt)return i=Rn.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==bh&&(e=Error(s(422),{cause:o}),Io(Sn(e,a)))):(o!==bh&&(i=Error(s(423),{cause:o}),Io(Sn(i,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Sn(o,a),h=Xh(e.stateNode,o,h),hf(e,h),ae!==4&&(ae=2)),!1;var f=Error(s(520),{cause:o});if(f=Sn(f,a),Ko===null?Ko=[f]:Ko.push(f),ae!==4&&(ae=2),i===null)return!0;o=Sn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Xh(a.stateNode,o,e),hf(a,e),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(wr===null||!wr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=gp(h),pp(h,e,a,o),hf(a,h),!1}a=a.return}while(a!==null);return!1}var yp=Error(s(461)),Ne=!1;function xe(e,i,a,o){i.child=e===null?Ag(i,null,a,o):ds(i,e.child,a,o)}function _p(e,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var _={};for(var E in o)E!=="ref"&&(_[E]=o[E])}else _=o;return Es(i),o=Vh(e,i,a,_,f,h),E=Mh(),e!==null&&!Ne?(Uh(e,i,h),Di(e,i,h)):(zt&&E&&Ah(i),i.flags|=1,xe(e,i,o,h),i.child)}function vp(e,i,a,o,h){if(e===null){var f=a.type;return typeof f=="function"&&!vf(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Ep(e,i,f,o,h)):(e=Vu(a.type,null,o,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(f=e.child,!sf(e,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:So,a(_,o)&&e.ref===i.ref)return Di(e,i,h)}return i.flags|=1,e=Sr(f,o),e.ref=i.ref,e.return=i,i.child=e}function Ep(e,i,a,o,h){if(e!==null){var f=e.memoizedProps;if(So(f,o)&&e.ref===i.ref)if(Ne=!1,i.pendingProps=o=f,sf(e,h))e.flags&131072&&(Ne=!0);else return i.lanes=e.lanes,Di(e,i,h)}return $h(e,i,a,o,h)}function Tp(e,i,a){var o=i.pendingProps,h=o.children,f=(i.stateNode._pendingVisibility&2)!==0,_=e!==null?e.memoizedState:null;if(xo(e,i),o.mode==="hidden"||f){if(i.flags&128){if(o=_!==null?_.baseLanes|a:a,e!==null){for(h=i.child=e.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~o}else i.childLanes=0,i.child=null;return Ap(e,i,o,a)}if(a&536870912)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&yu(i,_!==null?_.cachePool:null),_!==null?Sg(i,_):Rh(),bg(i);else return i.lanes=i.childLanes=536870912,Ap(e,i,_!==null?_.baseLanes|a:a,a)}else _!==null?(yu(i,_.cachePool),Sg(i,_),dr(),i.memoizedState=null):(e!==null&&yu(i,null),Rh(),dr());return xe(e,i,h,a),i.child}function Ap(e,i,a,o){var h=Oh();return h=h===null?null:{parent:Se._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},e!==null&&yu(i,null),Rh(),bg(i),e!==null&&Lo(e,i,o,!0),null}function xo(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(i.flags|=2097664)}}function $h(e,i,a,o,h){return Es(i),a=Vh(e,i,a,o,void 0,h),o=Mh(),e!==null&&!Ne?(Uh(e,i,h),Di(e,i,h)):(zt&&o&&Ah(i),i.flags|=1,xe(e,i,a,h),i.child)}function Sp(e,i,a,o,h,f){return Es(i),i.updateQueue=null,a=Dg(i,o,a,h),Cg(e),o=Mh(),e!==null&&!Ne?(Uh(e,i,f),Di(e,i,f)):(zt&&o&&Ah(i),i.flags|=1,xe(e,i,a,f),i.child)}function bp(e,i,a,o,h){if(Es(i),i.stateNode===null){var f=la,_=a.contextType;typeof _=="object"&&_!==null&&(f=qe(_)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Yh,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},uf(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?qe(_):la,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Kh(i,a,_,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Yh.enqueueReplaceState(f,f.state,null),jo(i,o,f,h),Bo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){f=i.stateNode;var E=i.memoizedProps,b=_s(a,E);f.props=b;var N=f.context,q=a.contextType;_=la,typeof q=="object"&&q!==null&&(_=qe(q));var K=a.getDerivedStateFromProps;q=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||N!==_)&&cp(i,f,o,_),yr=!1;var z=i.memoizedState;f.state=z,jo(i,o,f,h),Bo(),N=i.memoizedState,E||z!==N||yr?(typeof K=="function"&&(Kh(i,a,K,o),N=i.memoizedState),(b=yr||up(i,a,b,o,z,N,_))?(q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=N),f.props=o,f.state=N,f.context=_,o=b):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,cf(e,i),_=i.memoizedProps,q=_s(a,_),f.props=q,K=i.pendingProps,z=f.context,N=a.contextType,b=la,typeof N=="object"&&N!==null&&(b=qe(N)),E=a.getDerivedStateFromProps,(N=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==K||z!==b)&&cp(i,f,o,b),yr=!1,z=i.memoizedState,f.state=z,jo(i,o,f,h),Bo();var H=i.memoizedState;_!==K||z!==H||yr||e!==null&&e.dependencies!==null&&Cu(e.dependencies)?(typeof E=="function"&&(Kh(i,a,E,o),H=i.memoizedState),(q=yr||up(i,a,q,o,z,H,b)||e!==null&&e.dependencies!==null&&Cu(e.dependencies))?(N||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,H,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,H,b)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=H),f.props=o,f.state=H,f.context=b,o=q):(typeof f.componentDidUpdate!="function"||_===e.memoizedProps&&z===e.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&z===e.memoizedState||(i.flags|=1024),o=!1)}return f=o,xo(e,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,e!==null&&o?(i.child=ds(i,e.child,null,h),i.child=ds(i,null,a,h)):xe(e,i,a,h),i.memoizedState=f.state,e=i.child):e=Di(e,i,h),e}function wp(e,i,a,o){return Ro(),i.flags|=256,xe(e,i,a,o),i.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function Zh(e){return{baseLanes:e,cachePool:Ig()}}function Jh(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=On),e}function Rp(e,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=e!==null&&e.memoizedState===null?!1:(Ae.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(zt){if(h?fr(i):dr(),zt){var E=Pe,b;if(b=E){t:{for(b=E,E=ei;b.nodeType!==8;){if(!E){E=null;break t}if(b=Ln(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(i.memoizedState={dehydrated:E,treeContext:cs!==null?{id:wi,overflow:Ri}:null,retryLane:536870912},b=Dn(18,null,null,0),b.stateNode=E,b.return=i,i.child=b,Je=i,Pe=null,b=!0):b=!1}b||fs(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return E.data==="$!"?i.lanes=16:i.lanes=536870912,null;Ii(i)}return E=o.children,o=o.fallback,h?(dr(),h=i.mode,E=ef({mode:"hidden",children:E},h),o=As(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,h=i.child,h.memoizedState=Zh(a),h.childLanes=Jh(e,_,a),i.memoizedState=Wh,o):(fr(i),tf(i,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)i.flags&256?(fr(i),i.flags&=-257,i=nf(e,i,a)):i.memoizedState!==null?(dr(),i.child=e.child,i.flags|=128,i=null):(dr(),h=o.fallback,E=i.mode,o=ef({mode:"visible",children:o.children},E),h=As(h,E,a,null),h.flags|=2,o.return=i,h.return=i,o.sibling=h,i.child=o,ds(i,e.child,null,a),o=i.child,o.memoizedState=Zh(a),o.childLanes=Jh(e,_,a),i.memoizedState=Wh,i=h);else if(fr(i),E.data==="$!"){if(_=E.nextSibling&&E.nextSibling.dataset,_)var N=_.dgst;_=N,o=Error(s(419)),o.stack="",o.digest=_,Io({value:o,source:null,stack:null}),i=nf(e,i,a)}else if(Ne||Lo(e,i,a,!1),_=(a&e.childLanes)!==0,Ne||_){if(_=Xt,_!==null){if(o=a&-a,o&42)o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(o=o&(_.suspendedLanes|a)?0:o,o!==0&&o!==b.retryLane)throw b.retryLane=o,hr(e,o),tn(_,e,o),yp}E.data==="$?"||Nf(),i=nf(e,i,a)}else E.data==="$?"?(i.flags|=128,i.child=e.child,i=j0.bind(null,e),E._reactRetry=i,i=null):(e=b.treeContext,Pe=Ln(E.nextSibling),Je=i,zt=!0,Pn=null,ei=!1,e!==null&&(bn[wn++]=wi,bn[wn++]=Ri,bn[wn++]=cs,wi=e.id,Ri=e.overflow,cs=i),i=tf(i,o.children),i.flags|=4096);return i}return h?(dr(),h=o.fallback,E=i.mode,b=e.child,N=b.sibling,o=Sr(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&31457280,N!==null?h=Sr(N,h):(h=As(h,E,a,null),h.flags|=2),h.return=i,o.return=i,o.sibling=h,i.child=o,o=h,h=i.child,E=e.child.memoizedState,E===null?E=Zh(a):(b=E.cachePool,b!==null?(N=Se._currentValue,b=b.parent!==N?{parent:N,pool:N}:b):b=Ig(),E={baseLanes:E.baseLanes|a,cachePool:b}),h.memoizedState=E,h.childLanes=Jh(e,_,a),i.memoizedState=Wh,o):(fr(i),a=e.child,e=a.sibling,a=Sr(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function tf(e,i){return i=ef({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function ef(e,i){return Zp(e,i,0,null)}function nf(e,i,a){return ds(i,e.child,null,a),e=tf(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ip(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),of(e.return,i,a)}function rf(e,i,a,o,h){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Cp(e,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;if(xe(e,i,o.children,a),o=Ae.current,o&2)o=o&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ip(e,a,i);else if(e.tag===19)Ip(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(Gt(Ae,o),h){case"forwards":for(a=i.child,h=null;a!==null;)e=a.alternate,e!==null&&pu(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),rf(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&pu(e)===null){i.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}rf(i,!0,a,null,f);break;case"together":rf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Di(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),br|=i.lanes,!(a&i.childLanes))if(e!==null){if(Lo(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(s(153));if(i.child!==null){for(e=i.child,a=Sr(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Sr(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function sf(e,i){return e.lanes&i?!0:(e=e.dependencies,!!(e!==null&&Cu(e)))}function I0(e,i,a){switch(i.tag){case 3:Xi(i,i.stateNode.containerInfo),pr(i,Se,e.memoizedState.cache),Ro();break;case 27:case 5:eo(i);break;case 4:Xi(i,i.stateNode.containerInfo);break;case 10:pr(i,i.type,i.memoizedProps.value);break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(fr(i),i.flags|=128,null):a&i.child.childLanes?Rp(e,i,a):(fr(i),e=Di(e,i,a),e!==null?e.sibling:null);fr(i);break;case 19:var h=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Lo(e,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return Cp(e,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Gt(Ae,Ae.current),o)break;return null;case 22:case 23:return i.lanes=0,Tp(e,i,a);case 24:pr(i,Se,e.memoizedState.cache)}return Di(e,i,a)}function Dp(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)Ne=!0;else{if(!sf(e,a)&&!(i.flags&128))return Ne=!1,I0(e,i,a);Ne=!!(e.flags&131072)}else Ne=!1,zt&&i.flags&1048576&&dg(i,hu,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var o=i.elementType,h=o._init;if(o=h(o._payload),i.type=o,typeof o=="function")vf(o)?(e=_s(o,e),i.tag=1,i=bp(null,i,o,e,a)):(i.tag=0,i=$h(null,i,o,e,a));else{if(o!=null){if(h=o.$$typeof,h===Q){i.tag=11,i=_p(null,i,o,e,a);break t}else if(h===pt){i.tag=14,i=vp(null,i,o,e,a);break t}}throw i=w(o)||o,Error(s(306,i,""))}}return i;case 0:return $h(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=_s(o,i.pendingProps),bp(e,i,o,h,a);case 3:t:{if(Xi(i,i.stateNode.containerInfo),e===null)throw Error(s(387));var f=i.pendingProps;h=i.memoizedState,o=h.element,cf(e,i),jo(i,f,null,a);var _=i.memoizedState;if(f=_.cache,pr(i,Se,f),f!==h.cache&&lf(i,[Se],a,!0),Bo(),f=_.element,h.isDehydrated)if(h={element:f,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=h,i.memoizedState=h,i.flags&256){i=wp(e,i,f,a);break t}else if(f!==o){o=Sn(Error(s(424)),i),Io(o),i=wp(e,i,f,a);break t}else for(Pe=Ln(i.stateNode.containerInfo.firstChild),Je=i,zt=!0,Pn=null,ei=!0,a=Ag(i,null,f,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ro(),f===o){i=Di(e,i,a);break t}xe(e,i,f,a)}i=i.child}return i;case 26:return xo(e,i),e===null?(a=Vy(i.type,null,i.pendingProps,null))?i.memoizedState=a:zt||(a=i.type,e=i.pendingProps,o=Fu(gn.current).createElement(a),o[Ce]=i,o[ve]=e,Le(o,a,e),Zt(o),i.stateNode=o):i.memoizedState=Vy(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return eo(i),e===null&&zt&&(o=i.stateNode=Dy(i.type,i.pendingProps,gn.current),Je=i,ei=!0,Pe=Ln(o.firstChild)),o=i.pendingProps.children,e!==null||zt?xe(e,i,o,a):i.child=ds(i,null,o,a),xo(e,i),i.child;case 5:return e===null&&zt&&((h=o=Pe)&&(o=iA(o,i.type,i.pendingProps,ei),o!==null?(i.stateNode=o,Je=i,Pe=Ln(o.firstChild),ei=!1,h=!0):h=!1),h||fs(i)),eo(i),h=i.type,f=i.pendingProps,_=e!==null?e.memoizedProps:null,o=f.children,Gf(h,f)?o=null:_!==null&&Gf(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Vh(e,i,E0,null,null,a),nl._currentValue=h),xo(e,i),xe(e,i,o,a),i.child;case 6:return e===null&&zt&&((e=a=Pe)&&(a=rA(a,i.pendingProps,ei),a!==null?(i.stateNode=a,Je=i,Pe=null,e=!0):e=!1),e||fs(i)),null;case 13:return Rp(e,i,a);case 4:return Xi(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=ds(i,null,o,a):xe(e,i,o,a),i.child;case 11:return _p(e,i,i.type,i.pendingProps,a);case 7:return xe(e,i,i.pendingProps,a),i.child;case 8:return xe(e,i,i.pendingProps.children,a),i.child;case 12:return xe(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,pr(i,i.type,o.value),xe(e,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Es(i),h=qe(h),o=o(h),i.flags|=1,xe(e,i,o,a),i.child;case 14:return vp(e,i,i.type,i.pendingProps,a);case 15:return Ep(e,i,i.type,i.pendingProps,a);case 19:return Cp(e,i,a);case 22:return Tp(e,i,a);case 24:return Es(i),o=qe(Se),e===null?(h=Oh(),h===null&&(h=Xt,f=Ch(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},uf(i),pr(i,Se,h)):(e.lanes&a&&(cf(e,i),jo(i,null,null,a),Bo()),h=e.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),pr(i,Se,o)):(o=f.cache,pr(i,Se,o),o!==h.cache&&lf(i,[Se],a,!0))),xe(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}var af=xt(null),vs=null,Oi=null;function pr(e,i,a){Gt(af,i._currentValue),i._currentValue=a}function Ni(e){e._currentValue=af.current,ie(af)}function of(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function lf(e,i,a,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=h;for(var b=0;b<i.length;b++)if(E.context===i[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),of(f.return,a,e),o||(_=null);break t}f=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),of(_,a,e),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===e){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Lo(e,i,a,o){e=null;for(var h=i,f=!1;h!==null;){if(!f){if(h.flags&524288)f=!0;else if(h.flags&262144)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var E=h.type;ln(h.pendingProps.value,_.value)||(e!==null?e.push(E):e=[E])}}else if(h===Yi.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(nl):e=[nl])}h=h.return}e!==null&&lf(i,e,a,o),i.flags|=262144}function Cu(e){for(e=e.firstContext;e!==null;){if(!ln(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Es(e){vs=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function qe(e){return Op(vs,e)}function Du(e,i){return vs===null&&Es(e),Op(e,i)}function Op(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(e===null)throw Error(s(308));Oi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Oi=Oi.next=i;return a}var yr=!1;function uf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function vr(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,te&2){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=uu(e),hg(e,null,a),i}return lu(e,o,i,a),uu(e)}function zo(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,er(e,a)}}function hf(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var ff=!1;function Bo(){if(ff){var e=ma;if(e!==null)throw e}}function jo(e,i,a,o){ff=!1;var h=e.updateQueue;yr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var b=E,N=b.next;b.next=null,_===null?f=N:_.next=N,_=b;var q=e.alternate;q!==null&&(q=q.updateQueue,E=q.lastBaseUpdate,E!==_&&(E===null?q.firstBaseUpdate=N:E.next=N,q.lastBaseUpdate=b))}if(f!==null){var K=h.baseState;_=0,q=N=b=null,E=f;do{var z=E.lane&-536870913,H=z!==E.lane;if(H?(kt&z)===z:(o&z)===z){z!==0&&z===da&&(ff=!0),q!==null&&(q=q.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var st=e,Et=E;z=i;var oe=a;switch(Et.tag){case 1:if(st=Et.payload,typeof st=="function"){K=st.call(oe,K,z);break t}K=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Et.payload,z=typeof st=="function"?st.call(oe,K,z):st,z==null)break t;K=I({},K,z);break t;case 2:yr=!0}}z=E.callback,z!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[z]:H.push(z))}else H={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},q===null?(N=q=H,b=K):q=q.next=H,_|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;H=E,E=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);q===null&&(b=K),h.baseState=b,h.firstBaseUpdate=N,h.lastBaseUpdate=q,f===null&&(h.shared.lanes=0),br|=_,e.lanes=_,e.memoizedState=K}}function Np(e,i){if(typeof e!="function")throw Error(s(191,e));e.call(i)}function Vp(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Np(a[e],i)}function Ho(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&e)===e){o=void 0;var f=a.create,_=a.inst;o=f(),_.destroy=o}a=a.next}while(a!==h)}}catch(E){Yt(i,i.return,E)}}function Er(e,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&e)===e){var _=o.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=i;var b=a;try{E()}catch(N){Yt(h,b,N)}}}o=o.next}while(o!==f)}}catch(N){Yt(i,i.return,N)}}function Mp(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{Vp(i,a)}catch(o){Yt(e,e.return,o)}}}function Up(e,i,a){a.props=_s(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Yt(e,i,o)}}function Ts(e,i){try{var a=e.ref;if(a!==null){var o=e.stateNode;switch(e.tag){case 26:case 27:case 5:var h=o;break;default:h=o}typeof a=="function"?e.refCleanup=a(h):a.current=h}}catch(f){Yt(e,i,f)}}function un(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){Yt(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Yt(e,i,h)}else a.current=null}function kp(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){Yt(e,e.return,h)}}function Pp(e,i,a){try{var o=e.stateNode;Z0(o,e.type,a,i),o[ve]=i}catch(h){Yt(e,e.return,h)}}function xp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function df(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||xp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mf(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(e,i):a.insertBefore(e,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(e,a)):(i=a,i.appendChild(e)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=qu));else if(o!==4&&o!==27&&(e=e.child,e!==null))for(mf(e,i,a),e=e.sibling;e!==null;)mf(e,i,a),e=e.sibling}function Ou(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&o!==27&&(e=e.child,e!==null))for(Ou(e,i,a),e=e.sibling;e!==null;)Ou(e,i,a),e=e.sibling}var Vi=!1,se=!1,gf=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,Ve=null,zp=!1;function C0(e,i){if(e=e.containerInfo,qf=$u,e=ng(e),ph(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var _=0,E=-1,b=-1,N=0,q=0,K=e,z=null;e:for(;;){for(var H;K!==a||h!==0&&K.nodeType!==3||(E=_+h),K!==f||o!==0&&K.nodeType!==3||(b=_+o),K.nodeType===3&&(_+=K.nodeValue.length),(H=K.firstChild)!==null;)z=K,K=H;for(;;){if(K===e)break e;if(z===a&&++N===h&&(E=_),z===f&&++q===o&&(b=_),(H=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=H}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ff={focusedElem:e,selectionRange:a},$u=!1,Ve=i;Ve!==null;)if(i=Ve,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Ve=e;else for(;Ve!==null;){switch(i=Ve,f=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&f!==null){e=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var st=_s(a.type,h,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(st,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Et){Yt(a,a.return,Et)}}break;case 3:if(e&1024){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Yf(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Yf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(s(163))}if(e=i.sibling,e!==null){e.return=i.return,Ve=e;break}Ve=i.return}return st=zp,zp=!1,st}function Bp(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ui(e,a),o&4&&Ho(5,a);break;case 1:if(Ui(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(E){Yt(a,a.return,E)}else{var h=_s(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(E){Yt(a,a.return,E)}}o&64&&Mp(a),o&512&&Ts(a,a.return);break;case 3:if(Ui(e,a),o&64&&(o=a.updateQueue,o!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=a.child.stateNode;break;case 1:e=a.child.stateNode}try{Vp(o,e)}catch(E){Yt(a,a.return,E)}}break;case 26:Ui(e,a),o&512&&Ts(a,a.return);break;case 27:case 5:Ui(e,a),i===null&&o&4&&kp(a),o&512&&Ts(a,a.return);break;case 12:Ui(e,a);break;case 13:Ui(e,a),o&4&&qp(e,a);break;case 22:if(h=a.memoizedState!==null||Vi,!h){i=i!==null&&i.memoizedState!==null||se;var f=Vi,_=se;Vi=h,(se=i)&&!_?Tr(e,a,(a.subtreeFlags&8772)!==0):Ui(e,a),Vi=f,se=_}o&512&&(a.memoizedProps.mode==="manual"?Ts(a,a.return):un(a,a.return));break;default:Ui(e,a)}}function jp(e){var i=e.alternate;i!==null&&(e.alternate=null,jp(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Wr(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ge=null,cn=!1;function Mi(e,i,a){for(a=a.child;a!==null;)Hp(e,i,a),a=a.sibling}function Hp(e,i,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount($i,a)}catch{}switch(a.tag){case 26:se||un(a,i),Mi(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:se||un(a,i);var o=ge,h=cn;for(ge=a.stateNode,Mi(e,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Wr(a),ge=o,cn=h;break;case 5:se||un(a,i);case 6:h=ge;var f=cn;if(ge=null,Mi(e,i,a),ge=h,cn=f,ge!==null)if(cn)try{e=ge,o=a.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)}catch(_){Yt(a,i,_)}else try{ge.removeChild(a.stateNode)}catch(_){Yt(a,i,_)}break;case 18:ge!==null&&(cn?(i=ge,a=a.stateNode,i.nodeType===8?Kf(i.parentNode,a):i.nodeType===1&&Kf(i,a),al(i)):Kf(ge,a.stateNode));break;case 4:o=ge,h=cn,ge=a.stateNode.containerInfo,cn=!0,Mi(e,i,a),ge=o,cn=h;break;case 0:case 11:case 14:case 15:se||Er(2,a,i),se||Er(4,a,i),Mi(e,i,a);break;case 1:se||(un(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Up(a,i,o)),Mi(e,i,a);break;case 21:Mi(e,i,a);break;case 22:se||un(a,i),se=(o=se)||a.memoizedState!==null,Mi(e,i,a),se=o;break;default:Mi(e,i,a)}}function qp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{al(e)}catch(a){Yt(i,i.return,a)}}function D0(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Lp),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Lp),i;default:throw Error(s(435,e.tag))}}function pf(e,i){var a=D0(e);i.forEach(function(o){var h=H0.bind(null,e,o);a.has(o)||(a.add(o),o.then(h,h))})}function In(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=e,_=i,E=_;t:for(;E!==null;){switch(E.tag){case 27:case 5:ge=E.stateNode,cn=!1;break t;case 3:ge=E.stateNode.containerInfo,cn=!0;break t;case 4:ge=E.stateNode.containerInfo,cn=!0;break t}E=E.return}if(ge===null)throw Error(s(160));Hp(f,_,h),ge=null,cn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Fp(i,e),i=i.sibling}var xn=null;function Fp(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:In(i,e),Cn(e),o&4&&(Er(3,e,e.return),Ho(3,e),Er(5,e,e.return));break;case 1:In(i,e),Cn(e),o&512&&(se||a===null||un(a,a.return)),o&64&&Vi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=xn;if(In(i,e),Cn(e),o&512&&(se||a===null||un(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ir]||f[Ce]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Le(f,o,a),f[Ce]=e,Zt(f),o=f;break t;case"link":var _=ky("link","href",h).get(o+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(f=_[E],f.getAttribute("href")===(a.href==null?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break e}}f=h.createElement(o),Le(f,o,a),h.head.appendChild(f);break;case"meta":if(_=ky("meta","content",h).get(o+(a.content||""))){for(E=0;E<_.length;E++)if(f=_[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break e}}f=h.createElement(o),Le(f,o,a),h.head.appendChild(f);break;default:throw Error(s(468,o))}f[Ce]=e,Zt(f),o=f}e.stateNode=o}else Py(h,e.type,e.stateNode);else e.stateNode=Uy(h,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Py(h,e.type,e.stateNode):Uy(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Pp(e,e.memoizedProps,a.memoizedProps)}break;case 27:if(o&4&&e.alternate===null){h=e.stateNode,f=e.memoizedProps;try{for(var b=h.firstChild;b;){var N=b.nextSibling,q=b.nodeName;b[ir]||q==="HEAD"||q==="BODY"||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&b.rel.toLowerCase()==="stylesheet"||h.removeChild(b),b=N}for(var K=e.type,z=h.attributes;z.length;)h.removeAttributeNode(z[0]);Le(h,K,f),h[Ce]=e,h[ve]=f}catch(st){Yt(e,e.return,st)}}case 5:if(In(i,e),Cn(e),o&512&&(se||a===null||un(a,a.return)),e.flags&32){h=e.stateNode;try{_n(h,"")}catch(st){Yt(e,e.return,st)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,Pp(e,h,a!==null?a.memoizedProps:h)),o&1024&&(gf=!0);break;case 6:if(In(i,e),Cn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(st){Yt(e,e.return,st)}}break;case 3:if(Ku=null,h=xn,xn=Gu(i.containerInfo),In(i,e),xn=h,Cn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{al(i.containerInfo)}catch(st){Yt(e,e.return,st)}gf&&(gf=!1,Gp(e));break;case 4:o=xn,xn=Gu(e.stateNode.containerInfo),In(i,e),Cn(e),xn=o;break;case 12:In(i,e),Cn(e);break;case 13:In(i,e),Cn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wf=en()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,pf(e,o)));break;case 22:if(o&512&&(se||a===null||un(a,a.return)),b=e.memoizedState!==null,N=a!==null&&a.memoizedState!==null,q=Vi,K=se,Vi=q||b,se=K||N,In(i,e),se=K,Vi=q,Cn(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,o&8192&&(i._visibility=b?i._visibility&-2:i._visibility|1,b&&(i=Vi||se,a===null||N||i||_a(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))t:for(a=null,i=e;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){N=a=i;try{if(h=N.stateNode,b)f=h.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{_=N.stateNode,E=N.memoizedProps.style;var H=E!=null&&E.hasOwnProperty("display")?E.display:null;_.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(st){Yt(N,N.return,st)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=b?"":N.memoizedProps}catch(st){Yt(N,N.return,st)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,pf(e,a))));break;case 19:In(i,e),Cn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,pf(e,o)));break;case 21:break;default:In(i,e),Cn(e)}}function Cn(e){var i=e.flags;if(i&2){try{if(e.tag!==27){t:{for(var a=e.return;a!==null;){if(xp(a)){var o=a;break t}a=a.return}throw Error(s(160))}switch(o.tag){case 27:var h=o.stateNode,f=df(e);Ou(e,f,h);break;case 5:var _=o.stateNode;o.flags&32&&(_n(_,""),o.flags&=-33);var E=df(e);Ou(e,E,_);break;case 3:case 4:var b=o.stateNode.containerInfo,N=df(e);mf(e,N,b);break;default:throw Error(s(161))}}}catch(q){Yt(e,e.return,q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Gp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Gp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function Ui(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Bp(e,i.alternate,i),i=i.sibling}function _a(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Er(4,i,i.return),_a(i);break;case 1:un(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Up(i,i.return,a),_a(i);break;case 26:case 27:case 5:un(i,i.return),_a(i);break;case 22:un(i,i.return),i.memoizedState===null&&_a(i);break;default:_a(i)}e=e.sibling}}function Tr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=e,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:Tr(h,f,a),Ho(4,f);break;case 1:if(Tr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(N){Yt(o,o.return,N)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var b=h.shared.hiddenCallbacks;if(b!==null)for(h.shared.hiddenCallbacks=null,h=0;h<b.length;h++)Np(b[h],E)}catch(N){Yt(o,o.return,N)}}a&&_&64&&Mp(f),Ts(f,f.return);break;case 26:case 27:case 5:Tr(h,f,a),a&&o===null&&_&4&&kp(f),Ts(f,f.return);break;case 12:Tr(h,f,a);break;case 13:Tr(h,f,a),a&&_&4&&qp(h,f);break;case 22:f.memoizedState===null&&Tr(h,f,a),Ts(f,f.return);break;default:Tr(h,f,a)}i=i.sibling}}function yf(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Vo(a))}function _f(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Vo(e))}function Ar(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Qp(e,i,a,o),i=i.sibling}function Qp(e,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Ar(e,i,a,o),h&2048&&Ho(9,i);break;case 3:Ar(e,i,a,o),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Vo(e)));break;case 12:if(h&2048){Ar(e,i,a,o),e=i.stateNode;try{var f=i.memoizedProps,_=f.id,E=f.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Yt(i,i.return,b)}}else Ar(e,i,a,o);break;case 23:break;case 22:f=i.stateNode,i.memoizedState!==null?f._visibility&4?Ar(e,i,a,o):qo(e,i):f._visibility&4?Ar(e,i,a,o):(f._visibility|=4,va(e,i,a,o,(i.subtreeFlags&10256)!==0)),h&2048&&yf(i.alternate,i);break;case 24:Ar(e,i,a,o),h&2048&&_f(i.alternate,i);break;default:Ar(e,i,a,o)}}function va(e,i,a,o,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=e,_=i,E=a,b=o,N=_.flags;switch(_.tag){case 0:case 11:case 15:va(f,_,E,b,h),Ho(8,_);break;case 23:break;case 22:var q=_.stateNode;_.memoizedState!==null?q._visibility&4?va(f,_,E,b,h):qo(f,_):(q._visibility|=4,va(f,_,E,b,h)),h&&N&2048&&yf(_.alternate,_);break;case 24:va(f,_,E,b,h),h&&N&2048&&_f(_.alternate,_);break;default:va(f,_,E,b,h)}i=i.sibling}}function qo(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,h=o.flags;switch(o.tag){case 22:qo(a,o),h&2048&&yf(o.alternate,o);break;case 24:qo(a,o),h&2048&&_f(o.alternate,o);break;default:qo(a,o)}i=i.sibling}}var Fo=8192;function Ea(e){if(e.subtreeFlags&Fo)for(e=e.child;e!==null;)Kp(e),e=e.sibling}function Kp(e){switch(e.tag){case 26:Ea(e),e.flags&Fo&&e.memoizedState!==null&&yA(xn,e.memoizedState,e.memoizedProps);break;case 5:Ea(e);break;case 3:case 4:var i=xn;xn=Gu(e.stateNode.containerInfo),Ea(e),xn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Fo,Fo=16777216,Ea(e),Fo=i):Ea(e));break;default:Ea(e)}}function Yp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Go(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,$p(o,e)}Yp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xp(e),e=e.sibling}function Xp(e){switch(e.tag){case 0:case 11:case 15:Go(e),e.flags&2048&&Er(9,e,e.return);break;case 3:Go(e);break;case 12:Go(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,Nu(e)):Go(e);break;default:Go(e)}}function Nu(e){var i=e.deletions;if(e.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Ve=o,$p(o,e)}Yp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Er(8,i,i.return),Nu(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,Nu(i));break;default:Nu(i)}e=e.sibling}}function $p(e,i){for(;Ve!==null;){var a=Ve;switch(a.tag){case 0:case 11:case 15:Er(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Vo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ve=o;else t:for(a=e;Ve!==null;){o=Ve;var h=o.sibling,f=o.return;if(jp(o),o===a){Ve=null;break t}if(h!==null){h.return=f,Ve=h;break t}Ve=f}}}function O0(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,i,a,o){return new O0(e,i,a,o)}function vf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sr(e,i){var a=e.alternate;return a===null?(a=Dn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&31457280,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Wp(e,i){e.flags&=31457282;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Vu(e,i,a,o,h,f){var _=0;if(o=e,typeof e=="function")vf(e)&&(_=1);else if(typeof e=="string")_=gA(e,a,Xe.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case p:return As(a.children,h,f,i);case v:_=8,h|=24;break;case A:return e=Dn(12,a,i,h|2),e.elementType=A,e.lanes=f,e;case J:return e=Dn(13,a,i,h),e.elementType=J,e.lanes=f,e;case $:return e=Dn(19,a,i,h),e.elementType=$,e.lanes=f,e;case _t:return Zp(a,h,f,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:case B:_=10;break t;case x:_=9;break t;case Q:_=11;break t;case pt:_=14;break t;case ft:_=16,o=null;break t}_=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return i=Dn(_,a,i,h),i.elementType=e,i.type=o,i.lanes=f,i}function As(e,i,a,o){return e=Dn(7,e,o,i),e.lanes=a,e}function Zp(e,i,a,o){e=Dn(22,e,o,i),e.elementType=_t,e.lanes=a;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var f=h._current;if(f===null)throw Error(s(456));if(!(h._pendingVisibility&2)){var _=hr(f,2);_!==null&&(h._pendingVisibility|=2,tn(_,f,2))}},attach:function(){var f=h._current;if(f===null)throw Error(s(456));if(h._pendingVisibility&2){var _=hr(f,2);_!==null&&(h._pendingVisibility&=-3,tn(_,f,2))}}};return e.stateNode=h,e}function Ef(e,i,a){return e=Dn(6,e,null,i),e.lanes=a,e}function Tf(e,i,a){return i=Dn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function ki(e){e.flags|=4}function Jp(e,i){if(i.type!=="stylesheet"||i.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!xy(i)){if(i=Rn.current,i!==null&&((kt&4194176)===kt?ni!==null:(kt&62914560)!==kt&&!(kt&536870912)||i!==ni))throw Do=wh,pg;e.flags|=8192}}function Mu(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Ji():536870912,e.lanes|=i,Aa|=i)}function Qo(e,i){if(!zt)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Jt(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&31457280,o|=h.flags&31457280,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function N0(e,i,a){var o=i.pendingProps;switch(Sh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(i),null;case 1:return Jt(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ni(Se),mi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(wo(i)?ki(i):e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Pn!==null&&(Df(Pn),Pn=null))),Jt(i),null;case 26:return a=i.memoizedState,e===null?(ki(i),a!==null?(Jt(i),Jp(i,a)):(Jt(i),i.flags&=-16777217)):a?a!==e.memoizedState?(ki(i),Jt(i),Jp(i,a)):(Jt(i),i.flags&=-16777217):(e.memoizedProps!==o&&ki(i),Jt(i),i.flags&=-16777217),null;case 27:js(i),a=gn.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Jt(i),null}e=Xe.current,wo(i)?mg(i):(e=Dy(h,o,a),i.stateNode=e,ki(i))}return Jt(i),null;case 5:if(js(i),a=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(!o){if(i.stateNode===null)throw Error(s(166));return Jt(i),null}if(e=Xe.current,wo(i))mg(i);else{switch(h=Fu(gn.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}e[Ce]=i,e[ve]=o;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(Le(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&ki(i)}}return Jt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&ki(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(s(166));if(e=gn.current,wo(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,h=Je,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Ce]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Sy(e.nodeValue,a)),e||fs(i)}else e=Fu(e).createTextNode(o),e[Ce]=i,i.stateNode=e}return Jt(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=wo(i),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ce]=i}else Ro(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Jt(i),h=!1}else Pn!==null&&(Df(Pn),Pn=null),h=!0;if(!h)return i.flags&256?(Ii(i),i):(Ii(i),null)}if(Ii(i),i.flags&128)return i.lanes=a,i;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==e&&a&&(i.child.flags|=8192),Mu(i,i.updateQueue),Jt(i),null;case 4:return mi(),e===null&&Bf(i.stateNode.containerInfo),Jt(i),null;case 10:return Ni(i.type),Jt(i),null;case 19:if(ie(Ae),h=i.memoizedState,h===null)return Jt(i),null;if(o=(i.flags&128)!==0,f=h.rendering,f===null)if(o)Qo(h,!1);else{if(ae!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(f=pu(e),f!==null){for(i.flags|=128,Qo(h,!1),e=f.updateQueue,i.updateQueue=e,Mu(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Wp(a,e),a=a.sibling;return Gt(Ae,Ae.current&1|2),i.child}e=e.sibling}h.tail!==null&&en()>Uu&&(i.flags|=128,o=!0,Qo(h,!1),i.lanes=4194304)}else{if(!o)if(e=pu(f),e!==null){if(i.flags|=128,o=!0,e=e.updateQueue,i.updateQueue=e,Mu(i,e),Qo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!zt)return Jt(i),null}else 2*en()-h.renderingStartTime>Uu&&a!==536870912&&(i.flags|=128,o=!0,Qo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(e=h.last,e!==null?e.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=en(),i.sibling=null,e=Ae.current,Gt(Ae,o?e&1|2:e&1),i):(Jt(i),null);case 22:case 23:return Ii(i),Ih(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?a&536870912&&!(i.flags&128)&&(Jt(i),i.subtreeFlags&6&&(i.flags|=8192)):Jt(i),a=i.updateQueue,a!==null&&Mu(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&ie(ms),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ni(Se),Jt(i),null;case 25:return null}throw Error(s(156,i.tag))}function V0(e,i){switch(Sh(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Ni(Se),mi(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return js(i),null;case 13:if(Ii(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Ro()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ie(Ae),null;case 4:return mi(),null;case 10:return Ni(i.type),null;case 22:case 23:return Ii(i),Ih(),e!==null&&ie(ms),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Ni(Se),null;case 25:return null;default:return null}}function ty(e,i){switch(Sh(i),i.tag){case 3:Ni(Se),mi();break;case 26:case 27:case 5:js(i);break;case 4:mi();break;case 13:Ii(i);break;case 19:ie(Ae);break;case 10:Ni(i.type);break;case 22:case 23:Ii(i),Ih(),e!==null&&ie(ms);break;case 24:Ni(Se)}}var M0={getCacheForType:function(e){var i=qe(Se),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a}},U0=typeof WeakMap=="function"?WeakMap:Map,te=0,Xt=null,Ct=null,kt=0,$t=0,hn=null,Pi=!1,Ta=!1,Af=!1,xi=0,ae=0,br=0,Ss=0,Sf=0,On=0,Aa=0,Ko=null,ri=null,bf=!1,wf=0,Uu=1/0,ku=null,wr=null,Pu=!1,bs=null,Yo=0,Rf=0,If=null,Xo=0,Cf=null;function fn(){if(te&2&&kt!==0)return kt&-kt;if(S.T!==null){var e=da;return e!==0?e:Pf()}return Hl()}function ey(){On===0&&(On=!(kt&536870912)||zt?ao():536870912);var e=Rn.current;return e!==null&&(e.flags|=32),On}function tn(e,i,a){(e===Xt&&$t===2||e.cancelPendingCommit!==null)&&(Sa(e,0),Li(e,kt,On,!1)),le(e,a),(!(te&2)||e!==Xt)&&(e===Xt&&(!(te&2)&&(Ss|=a),ae===4&&Li(e,kt,On,!1)),si(e))}function ny(e,i,a){if(te&6)throw Error(s(327));var o=!a&&(i&60)===0&&(i&e.expiredLanes)===0||Zi(e,i),h=o?x0(e,i):Vf(e,i,!0),f=o;do{if(h===0){Ta&&!o&&Li(e,i,0,!1);break}else if(h===6)Li(e,i,0,!Pi);else{if(a=e.current.alternate,f&&!k0(a)){h=Vf(e,i,!1),f=!1;continue}if(h===2){if(f=i,e.errorRecoveryDisabledLanes&f)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var E=e;h=Ko;var b=E.current.memoizedState.isDehydrated;if(b&&(Sa(E,_).flags|=256),_=Vf(E,_,!1),_!==2){if(Af&&!b){E.errorRecoveryDisabledLanes|=f,Ss|=f,h=4;break t}f=ri,ri=h,f!==null&&Df(f)}h=_}if(f=!1,h!==2)continue}}if(h===1){Sa(e,0),Li(e,i,0,!0);break}t:{switch(o=e,h){case 0:case 1:throw Error(s(345));case 4:if((i&4194176)===i){Li(o,i,On,!Pi);break t}break;case 2:ri=null;break;case 3:case 5:break;default:throw Error(s(329))}if(o.finishedWork=a,o.finishedLanes=i,(i&62914560)===i&&(f=wf+300-en(),10<f)){if(Li(o,i,On,!Pi),pn(o,0)!==0)break t;o.timeoutHandle=Ry(iy.bind(null,o,a,ri,ku,bf,i,On,Ss,Aa,Pi,2,-0,0),f);break t}iy(o,a,ri,ku,bf,i,On,Ss,Aa,Pi,0,-0,0)}}break}while(!0);si(e)}function Df(e){ri===null?ri=e:ri.push.apply(ri,e)}function iy(e,i,a,o,h,f,_,E,b,N,q,K,z){var H=i.subtreeFlags;if((H&8192||(H&16785408)===16785408)&&(el={stylesheets:null,count:0,unsuspend:pA},Kp(i),i=_A(),i!==null)){e.cancelPendingCommit=i(cy.bind(null,e,a,o,h,_,E,b,1,K,z)),Li(e,f,_,!N);return}cy(e,a,o,h,_,E,b,q,K,z)}function k0(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!ln(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Li(e,i,a,o){i&=~Sf,i&=~Ss,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var h=i;0<h;){var f=31-$e(h),_=1<<f;o[f]=-1,h&=~_}a!==0&&tr(e,a,i)}function xu(){return te&6?!0:($o(0),!1)}function Of(){if(Ct!==null){if($t===0)var e=Ct.return;else e=Ct,Oi=vs=null,kh(e),ha=null,Oo=0,e=Ct;for(;e!==null;)ty(e.alternate,e),e=e.return;Ct=null}}function Sa(e,i){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,tA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Of(),Xt=e,Ct=a=Sr(e.current,null),kt=i,$t=0,hn=null,Pi=!1,Ta=Zi(e,i),Af=!1,Aa=On=Sf=Ss=br=ae=0,ri=Ko=null,bf=!1,i&8&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var h=31-$e(o),f=1<<h;i|=e[h],o&=~f}return xi=i,ou(),a}function ry(e,i){wt=null,S.H=ii,i===Co?(i=vg(),$t=3):i===pg?(i=vg(),$t=4):$t=i===yp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,hn=i,Ct===null&&(ae=1,Iu(e,Sn(i,e.current)))}function sy(){var e=S.H;return S.H=ii,e===null?ii:e}function ay(){var e=S.A;return S.A=M0,e}function Nf(){ae=4,Pi||(kt&4194176)!==kt&&Rn.current!==null||(Ta=!0),!(br&134217727)&&!(Ss&134217727)||Xt===null||Li(Xt,kt,On,!1)}function Vf(e,i,a){var o=te;te|=2;var h=sy(),f=ay();(Xt!==e||kt!==i)&&(ku=null,Sa(e,i)),i=!1;var _=ae;t:do try{if($t!==0&&Ct!==null){var E=Ct,b=hn;switch($t){case 8:Of(),_=6;break t;case 3:case 2:case 6:Rn.current===null&&(i=!0);var N=$t;if($t=0,hn=null,ba(e,E,b,N),a&&Ta){_=0;break t}break;default:N=$t,$t=0,hn=null,ba(e,E,b,N)}}P0(),_=ae;break}catch(q){ry(e,q)}while(!0);return i&&e.shellSuspendCounter++,Oi=vs=null,te=o,S.H=h,S.A=f,Ct===null&&(Xt=null,kt=0,ou()),_}function P0(){for(;Ct!==null;)oy(Ct)}function x0(e,i){var a=te;te|=2;var o=sy(),h=ay();Xt!==e||kt!==i?(ku=null,Uu=en()+500,Sa(e,i)):Ta=Zi(e,i);t:do try{if($t!==0&&Ct!==null){i=Ct;var f=hn;e:switch($t){case 1:$t=0,hn=null,ba(e,i,f,1);break;case 2:if(yg(f)){$t=0,hn=null,ly(i);break}i=function(){$t===2&&Xt===e&&($t=7),si(e)},f.then(i,i);break t;case 3:$t=7;break t;case 4:$t=5;break t;case 7:yg(f)?($t=0,hn=null,ly(i)):($t=0,hn=null,ba(e,i,f,7));break;case 5:var _=null;switch(Ct.tag){case 26:_=Ct.memoizedState;case 5:case 27:var E=Ct;if(!_||xy(_)){$t=0,hn=null;var b=E.sibling;if(b!==null)Ct=b;else{var N=E.return;N!==null?(Ct=N,Lu(N)):Ct=null}break e}}$t=0,hn=null,ba(e,i,f,5);break;case 6:$t=0,hn=null,ba(e,i,f,6);break;case 8:Of(),ae=6;break t;default:throw Error(s(462))}}L0();break}catch(q){ry(e,q)}while(!0);return Oi=vs=null,S.H=o,S.A=h,te=a,Ct!==null?0:(Xt=null,kt=0,ou(),ae)}function L0(){for(;Ct!==null&&!sh();)oy(Ct)}function oy(e){var i=Dp(e.alternate,e,xi);e.memoizedProps=e.pendingProps,i===null?Lu(e):Ct=i}function ly(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=Sp(a,i,i.pendingProps,i.type,void 0,kt);break;case 11:i=Sp(a,i,i.pendingProps,i.type.render,i.ref,kt);break;case 5:kh(i);default:ty(a,i),i=Ct=Wp(i,xi),i=Dp(a,i,xi)}e.memoizedProps=e.pendingProps,i===null?Lu(e):Ct=i}function ba(e,i,a,o){Oi=vs=null,kh(i),ha=null,Oo=0;var h=i.return;try{if(R0(e,h,i,a,kt)){ae=1,Iu(e,Sn(a,e.current)),Ct=null;return}}catch(f){if(h!==null)throw Ct=h,f;ae=1,Iu(e,Sn(a,e.current)),Ct=null;return}i.flags&32768?(zt||o===1?e=!0:Ta||kt&536870912?e=!1:(Pi=e=!0,(o===2||o===3||o===6)&&(o=Rn.current,o!==null&&o.tag===13&&(o.flags|=16384))),uy(i,e)):Lu(i)}function Lu(e){var i=e;do{if(i.flags&32768){uy(i,Pi);return}e=i.return;var a=N0(i.alternate,i,xi);if(a!==null){Ct=a;return}if(i=i.sibling,i!==null){Ct=i;return}Ct=i=e}while(i!==null);ae===0&&(ae=5)}function uy(e,i){do{var a=V0(e.alternate,e);if(a!==null){a.flags&=32767,Ct=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ct=e;return}Ct=e=a}while(e!==null);ae=6,Ct=null}function cy(e,i,a,o,h,f,_,E,b,N){var q=S.T,K=nt.p;try{nt.p=2,S.T=null,z0(e,i,a,o,K,h,f,_,E,b,N)}finally{S.T=q,nt.p=K}}function z0(e,i,a,o,h,f,_,E){do wa();while(bs!==null);if(te&6)throw Error(s(327));var b=e.finishedWork;if(o=e.finishedLanes,b===null)return null;if(e.finishedWork=null,e.finishedLanes=0,b===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var N=b.lanes|b.childLanes;if(N|=Eh,Bl(e,o,N,f,_,E),e===Xt&&(Ct=Xt=null,kt=0),!(b.subtreeFlags&10256)&&!(b.flags&10256)||Pu||(Pu=!0,Rf=N,If=a,q0(gi,function(){return wa(),null})),a=(b.flags&15990)!==0,b.subtreeFlags&15990||a?(a=S.T,S.T=null,f=nt.p,nt.p=2,_=te,te|=4,C0(e,b),Fp(b,e),u0(Ff,e.containerInfo),$u=!!qf,Ff=qf=null,e.current=b,Bp(e,b.alternate,b),no(),te=_,nt.p=f,S.T=a):e.current=b,Pu?(Pu=!1,bs=e,Yo=o):hy(e,N),N=e.pendingLanes,N===0&&(wr=null),ro(b.stateNode),si(e),i!==null)for(h=e.onRecoverableError,b=0;b<i.length;b++)N=i[b],h(N.value,{componentStack:N.stack});return Yo&3&&wa(),N=e.pendingLanes,o&4194218&&N&42?e===Cf?Xo++:(Xo=0,Cf=e):Xo=0,$o(0),null}function hy(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Vo(i)))}function wa(){if(bs!==null){var e=bs,i=Rf;Rf=0;var a=jl(Yo),o=S.T,h=nt.p;try{if(nt.p=32>a?32:a,S.T=null,bs===null)var f=!1;else{a=If,If=null;var _=bs,E=Yo;if(bs=null,Yo=0,te&6)throw Error(s(331));var b=te;if(te|=4,Xp(_.current),Qp(_,_.current,E,a),te=b,$o(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot($i,_)}catch{}f=!0}return f}finally{nt.p=h,S.T=o,hy(e,i)}}return!1}function fy(e,i,a){i=Sn(a,i),i=Xh(e.stateNode,i,2),e=vr(e,i,2),e!==null&&(le(e,2),si(e))}function Yt(e,i,a){if(e.tag===3)fy(e,e,a);else for(;i!==null;){if(i.tag===3){fy(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(wr===null||!wr.has(o))){e=Sn(a,e),a=gp(2),o=vr(i,a,2),o!==null&&(pp(a,o,i,e),le(o,2),si(o));break}}i=i.return}}function Mf(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new U0;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(Af=!0,h.add(a),e=B0.bind(null,e,i,a),i.then(e,e))}function B0(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Xt===e&&(kt&a)===a&&(ae===4||ae===3&&(kt&62914560)===kt&&300>en()-wf?!(te&2)&&Sa(e,0):Sf|=a,Aa===kt&&(Aa=0)),si(e)}function dy(e,i){i===0&&(i=Ji()),e=hr(e,i),e!==null&&(le(e,i),si(e))}function j0(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),dy(e,a)}function H0(e,i){var a=0;switch(e.tag){case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(i),dy(e,a)}function q0(e,i){return Yr(e,i)}var zu=null,Ra=null,Uf=!1,Bu=!1,kf=!1,ws=0;function si(e){e!==Ra&&e.next===null&&(Ra===null?zu=Ra=e:Ra=Ra.next=e),Bu=!0,Uf||(Uf=!0,G0(F0))}function $o(e,i){if(!kf&&Bu){kf=!0;do for(var a=!1,o=zu;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var _=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-$e(42|e)+1)-1,f&=h&~(_&~E),f=f&201326677?f&201326677|1:f?f|2:0}f!==0&&(a=!0,py(o,f))}else f=kt,f=pn(o,o===Xt?f:0),!(f&3)||Zi(o,f)||(a=!0,py(o,f));o=o.next}while(a);kf=!1}}function F0(){Bu=Uf=!1;var e=0;ws!==0&&(J0()&&(e=ws),ws=0);for(var i=en(),a=null,o=zu;o!==null;){var h=o.next,f=my(o,i);f===0?(o.next=null,a===null?zu=h:a.next=h,h===null&&(Ra=a)):(a=o,(e!==0||f&3)&&(Bu=!0)),o=h}$o(e)}function my(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var _=31-$e(f),E=1<<_,b=h[_];b===-1?(!(E&a)||E&o)&&(h[_]=Fs(E,i)):b<=i&&(e.expiredLanes|=E),f&=~E}if(i=Xt,a=kt,a=pn(e,e===i?a:0),o=e.callbackNode,a===0||e===i&&$t===2||e.cancelPendingCommit!==null)return o!==null&&o!==null&&qs(o),e.callbackNode=null,e.callbackPriority=0;if(!(a&3)||Zi(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&qs(o),jl(a)){case 2:case 8:a=Ie;break;case 32:a=gi;break;case 268435456:a=io;break;default:a=gi}return o=gy.bind(null,e),a=Yr(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&qs(o),e.callbackPriority=2,e.callbackNode=null,2}function gy(e,i){var a=e.callbackNode;if(wa()&&e.callbackNode!==a)return null;var o=kt;return o=pn(e,e===Xt?o:0),o===0?null:(ny(e,o,i),my(e,en()),e.callbackNode!=null&&e.callbackNode===a?gy.bind(null,e):null)}function py(e,i){if(wa())return null;ny(e,i,!0)}function G0(e){eA(function(){te&6?Yr(_e,e):e()})}function Pf(){return ws===0&&(ws=ao()),ws}function yy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Yn(""+e)}function _y(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function Q0(e,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=yy((h[ve]||null).action),_=o.submitter;_&&(i=(i=_[ve]||null)?yy(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var E=new Ws("action","action",null,o,h);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ws!==0){var b=_?_y(h,_):new FormData(h);Fh(a,{pending:!0,data:b,method:h.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=_?_y(h,_):new FormData(h),Fh(a,{pending:!0,data:b,method:h.method,action:f},f,b))},currentTarget:h}]})}}for(var xf=0;xf<cg.length;xf++){var Lf=cg[xf],K0=Lf.toLowerCase(),Y0=Lf[0].toUpperCase()+Lf.slice(1);kn(K0,"on"+Y0)}kn(sg,"onAnimationEnd"),kn(ag,"onAnimationIteration"),kn(og,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(h0,"onTransitionRun"),kn(f0,"onTransitionStart"),kn(d0,"onTransitionCancel"),kn(lg,"onTransitionEnd"),nn("onMouseEnter",["mouseout","mouseover"]),nn("onMouseLeave",["mouseout","mouseover"]),nn("onPointerEnter",["pointerout","pointerover"]),nn("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function vy(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],h=o.event;o=o.listeners;t:{var f=void 0;if(i)for(var _=o.length-1;0<=_;_--){var E=o[_],b=E.instance,N=E.currentTarget;if(E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=N;try{f(h)}catch(q){Ru(q)}h.currentTarget=null,f=b}else for(_=0;_<o.length;_++){if(E=o[_],b=E.instance,N=E.currentTarget,E=E.listener,b!==f&&h.isPropagationStopped())break t;f=E,h.currentTarget=N;try{f(h)}catch(q){Ru(q)}h.currentTarget=null,f=b}}}}function Vt(e,i){var a=i[$r];a===void 0&&(a=i[$r]=new Set);var o=e+"__bubble";a.has(o)||(Ey(i,e,2,!1),a.add(o))}function zf(e,i,a){var o=0;i&&(o|=4),Ey(a,e,o,i)}var ju="_reactListening"+Math.random().toString(36).slice(2);function Bf(e){if(!e[ju]){e[ju]=!0,lo.forEach(function(a){a!=="selectionchange"&&(X0.has(a)||zf(a,!1,e),zf(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[ju]||(i[ju]=!0,zf("selectionchange",!1,i))}}function Ey(e,i,a,o){switch(qy(i)){case 2:var h=TA;break;case 8:h=AA;break;default:h=Jf}a=h.bind(null,i,a,e),h=void 0,!En||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(i,a,{capture:!0,passive:h}):e.addEventListener(i,a,!0):h!==void 0?e.addEventListener(i,a,{passive:h}):e.addEventListener(i,a,!1)}function jf(e,i,a,o,h){var f=o;if(!(i&1)&&!(i&2)&&o!==null)t:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var E=o.stateNode.containerInfo;if(E===h||E.nodeType===8&&E.parentNode===h)break;if(_===4)for(_=o.return;_!==null;){var b=_.tag;if((b===3||b===4)&&(b=_.stateNode.containerInfo,b===h||b.nodeType===8&&b.parentNode===h))return;_=_.return}for(;E!==null;){if(_=Un(E),_===null)return;if(b=_.tag,b===5||b===6||b===26||b===27){o=f=_;continue t}E=E.parentNode}}o=o.return}Ql(function(){var N=f,q=$s(a),K=[];t:{var z=ug.get(e);if(z!==void 0){var H=Ws,st=e;switch(e){case"keypress":if($n(a)===0)break t;case"keydown":case"keyup":H=ia;break;case"focusin":st="focus",H=ta;break;case"focusout":st="blur",H=ta;break;case"beforeblur":case"afterblur":H=ta;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=fh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=tu;break;case sg:case ag:case og:H=ea;break;case lg:H=nu;break;case"scroll":case"scrollend":H=Kl;break;case"wheel":H=ra;break;case"copy":case"cut":case"paste":H=na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=To;break;case"toggle":case"beforetoggle":H=ru}var Et=(i&4)!==0,oe=!Et&&(e==="scroll"||e==="scrollend"),U=Et?z!==null?z+"Capture":null:z;Et=[];for(var O=N,L;O!==null;){var F=O;if(L=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||L===null||U===null||(F=es(O,U),F!=null&&Et.push(Zo(O,F,L))),oe)break;O=O.return}0<Et.length&&(z=new H(z,st,null,a,q),K.push({event:z,listeners:Et}))}}if(!(i&7)){t:{if(z=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",z&&a!==vn&&(st=a.relatedTarget||a.fromElement)&&(Un(st)||st[pi]))break t;if((H||z)&&(z=q.window===q?q:(z=q.ownerDocument)?z.defaultView||z.parentWindow:window,H?(st=a.relatedTarget||a.toElement,H=N,st=st?Un(st):null,st!==null&&(oe=lt(st),Et=st.tag,st!==oe||Et!==5&&Et!==27&&Et!==6)&&(st=null)):(H=null,st=N),H!==st)){if(Et=Tn,F="onMouseLeave",U="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Et=To,F="onPointerLeave",U="onPointerEnter",O="pointer"),oe=H==null?z:rr(H),L=st==null?z:rr(st),z=new Et(F,O+"leave",H,a,q),z.target=oe,z.relatedTarget=L,F=null,Un(q)===N&&(Et=new Et(U,O+"enter",st,a,q),Et.target=L,Et.relatedTarget=oe,F=Et),oe=F,H&&st)e:{for(Et=H,U=st,O=0,L=Et;L;L=Ia(L))O++;for(L=0,F=U;F;F=Ia(F))L++;for(;0<O-L;)Et=Ia(Et),O--;for(;0<L-O;)U=Ia(U),L--;for(;O--;){if(Et===U||U!==null&&Et===U.alternate)break e;Et=Ia(Et),U=Ia(U)}Et=null}else Et=null;H!==null&&Ty(K,z,H,Et,!1),st!==null&&oe!==null&&Ty(K,oe,st,Et,!0)}}t:{if(z=N?rr(N):window,H=z.nodeName&&z.nodeName.toLowerCase(),H==="select"||H==="input"&&z.type==="file")var rt=Ym;else if(Te(z))if(Xm)rt=o0;else{rt=s0;var It=r0}else H=z.nodeName,!H||H.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?N&&mo(N.elementType)&&(rt=Ym):rt=a0;if(rt&&(rt=rt(e,N))){bi(K,rt,a,q);break t}It&&It(e,z,N),e==="focusout"&&N&&z.type==="number"&&N.memoizedProps.value!=null&&Xs(z,"number",z.value)}switch(It=N?rr(N):window,e){case"focusin":(Te(It)||It.contentEditable==="true")&&(sa=It,yh=N,bo=null);break;case"focusout":bo=yh=sa=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,ig(K,a,q);break;case"selectionchange":if(c0)break;case"keydown":case"keyup":ig(K,a,q)}var ot;if(Jn)t:{switch(e){case"compositionstart":var ht="onCompositionStart";break t;case"compositionend":ht="onCompositionEnd";break t;case"compositionupdate":ht="onCompositionUpdate";break t}ht=void 0}else Mt?j(e,a)&&(ht="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ht="onCompositionStart");ht&&(y&&a.locale!=="ko"&&(Mt||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Mt&&(ot=po()):(Xn=q,cr="value"in Xn?Xn.value:Xn.textContent,Mt=!0)),It=Hu(N,ht),0<It.length&&(ht=new vo(ht,e,null,a,q),K.push({event:ht,listeners:It}),ot?ht.data=ot:(ot=Z(a),ot!==null&&(ht.data=ot)))),(ot=m?Ee(e,a):Ut(e,a))&&(ht=Hu(N,"onBeforeInput"),0<ht.length&&(It=new vo("onBeforeInput","beforeinput",null,a,q),K.push({event:It,listeners:ht}),It.data=ot)),Q0(K,e,N,a,q)}vy(K,i)})}function Zo(e,i,a){return{instance:e,listener:i,currentTarget:a}}function Hu(e,i){for(var a=i+"Capture",o=[];e!==null;){var h=e,f=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=es(e,a),h!=null&&o.unshift(Zo(e,h,f)),h=es(e,i),h!=null&&o.push(Zo(e,h,f))),e=e.return}return o}function Ia(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ty(e,i,a,o,h){for(var f=i._reactName,_=[];a!==null&&a!==o;){var E=a,b=E.alternate,N=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||N===null||(b=N,h?(N=es(a,f),N!=null&&_.unshift(Zo(a,N,b))):h||(N=es(a,f),N!=null&&_.push(Zo(a,N,b)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var $0=/\r\n?/g,W0=/\u0000|\uFFFD/g;function Ay(e){return(typeof e=="string"?e:""+e).replace($0,`
`).replace(W0,"")}function Sy(e,i){return i=Ay(i),Ay(e)===i}function qu(){}function Kt(e,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||_n(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&_n(e,""+o);break;case"className":or(e,"class",o);break;case"tabIndex":or(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":or(e,a,o);break;case"style":Gl(e,o,f);break;case"data":if(i!=="object"){or(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Yn(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Kt(e,i,"name",h.name,h,null),Kt(e,i,"formEncType",h.formEncType,h,null),Kt(e,i,"formMethod",h.formMethod,h,null),Kt(e,i,"formTarget",h.formTarget,h,null)):(Kt(e,i,"encType",h.encType,h,null),Kt(e,i,"method",h.method,h,null),Kt(e,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Yn(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=qu);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Yn(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),ar(e,"popover",o);break;case"xlinkActuate":yn(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":yn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":yn(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":yn(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":yn(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":yn(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":yn(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":yn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":yn(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ar(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ch.get(a)||a,ar(e,a,o))}}function Hf(e,i,a,o,h,f){switch(a){case"style":Gl(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?_n(e,o):(typeof o=="number"||typeof o=="bigint")&&_n(e,""+o);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ks.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=e[ve]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,h);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):ar(e,a,o)}}}function Le(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Kt(e,i,f,_,a,null)}}h&&Kt(e,i,"srcSet",a.srcSet,a,null),o&&Kt(e,i,"src",a.src,a,null);return;case"input":Vt("invalid",e);var E=f=_=h=null,b=null,N=null;for(o in a)if(a.hasOwnProperty(o)){var q=a[o];if(q!=null)switch(o){case"name":h=q;break;case"type":_=q;break;case"checked":b=q;break;case"defaultChecked":N=q;break;case"value":f=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:Kt(e,i,o,q,a,null)}}Jr(e,f,E,b,N,_,h,!1),Zr(e);return;case"select":Vt("invalid",e),o=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":_=E;break;case"multiple":o=E;default:Kt(e,i,h,E,a,null)}i=f,a=_,e.multiple=!!o,i!=null?Lt(e,!!o,i,!1):a!=null&&Lt(e,!!o,a,!0);return;case"textarea":Vt("invalid",e),f=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Kt(e,i,_,E,a,null)}ur(e,o,h,f),Zr(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Kt(e,i,b,o,a,null)}return;case"dialog":Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(o=0;o<Wo.length;o++)Vt(Wo[o],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Kt(e,i,N,o,a,null)}return;default:if(mo(i)){for(q in a)a.hasOwnProperty(q)&&(o=a[q],o!==void 0&&Hf(e,i,q,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Kt(e,i,E,o,a,null))}function Z0(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,E=null,b=null,N=null,q=null;for(H in a){var K=a[H];if(a.hasOwnProperty(H)&&K!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(H)||Kt(e,i,H,null,o,K)}}for(var z in o){var H=o[z];if(K=a[z],o.hasOwnProperty(z)&&(H!=null||K!=null))switch(z){case"type":f=H;break;case"name":h=H;break;case"checked":N=H;break;case"defaultChecked":q=H;break;case"value":_=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:H!==K&&Kt(e,i,z,H,o,K)}}lr(e,_,E,b,N,q,f,h);return;case"select":H=_=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":H=b;default:o.hasOwnProperty(f)||Kt(e,i,f,null,o,b)}for(h in o)if(f=o[h],b=a[h],o.hasOwnProperty(h)&&(f!=null||b!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":_=f;default:f!==b&&Kt(e,i,h,f,o,b)}i=E,a=_,o=H,z!=null?Lt(e,!!a,z,!1):!!o!=!!a&&(i!=null?Lt(e,!!a,i,!0):Lt(e,!!a,a?[]:"",!1));return;case"textarea":H=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Kt(e,i,E,null,o,h)}for(_ in o)if(h=o[_],f=a[_],o.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":z=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Kt(e,i,_,h,o,f)}ts(e,z,H);return;case"option":for(var st in a)if(z=a[st],a.hasOwnProperty(st)&&z!=null&&!o.hasOwnProperty(st))switch(st){case"selected":e.selected=!1;break;default:Kt(e,i,st,null,o,z)}for(b in o)if(z=o[b],H=a[b],o.hasOwnProperty(b)&&z!==H&&(z!=null||H!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Kt(e,i,b,z,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in a)z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et)&&Kt(e,i,Et,null,o,z);for(N in o)if(z=o[N],H=a[N],o.hasOwnProperty(N)&&z!==H&&(z!=null||H!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Kt(e,i,N,z,o,H)}return;default:if(mo(i)){for(var oe in a)z=a[oe],a.hasOwnProperty(oe)&&z!==void 0&&!o.hasOwnProperty(oe)&&Hf(e,i,oe,void 0,o,z);for(q in o)z=o[q],H=a[q],!o.hasOwnProperty(q)||z===H||z===void 0&&H===void 0||Hf(e,i,q,z,o,H);return}}for(var U in a)z=a[U],a.hasOwnProperty(U)&&z!=null&&!o.hasOwnProperty(U)&&Kt(e,i,U,null,o,z);for(K in o)z=o[K],H=a[K],!o.hasOwnProperty(K)||z===H||z==null&&H==null||Kt(e,i,K,z,o,H)}var qf=null,Ff=null;function Fu(e){return e.nodeType===9?e:e.ownerDocument}function by(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wy(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Gf(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qf=null;function J0(){var e=window.event;return e&&e.type==="popstate"?e===Qf?!1:(Qf=e,!0):(Qf=null,!1)}var Ry=typeof setTimeout=="function"?setTimeout:void 0,tA=typeof clearTimeout=="function"?clearTimeout:void 0,Iy=typeof Promise=="function"?Promise:void 0,eA=typeof queueMicrotask=="function"?queueMicrotask:typeof Iy<"u"?function(e){return Iy.resolve(null).then(e).catch(nA)}:Ry;function nA(e){setTimeout(function(){throw e})}function Kf(e,i){var a=i,o=0;do{var h=a.nextSibling;if(e.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(o===0){e.removeChild(h),al(i);return}o--}else a!=="$"&&a!=="$?"&&a!=="$!"||o++;a=h}while(a);al(i)}function Yf(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yf(a),Wr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function iA(e,i,a,o){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ir])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==h.rel||e.getAttribute("href")!==(h.href==null?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ln(e.nextSibling),e===null)break}return null}function rA(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ln(e.nextSibling),e===null))return null;return e}function Ln(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}function Cy(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return e;i--}else a==="/$"&&i++}e=e.previousSibling}return null}function Dy(e,i,a){switch(i=Fu(a),e){case"html":if(e=i.documentElement,!e)throw Error(s(452));return e;case"head":if(e=i.head,!e)throw Error(s(453));return e;case"body":if(e=i.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}var Nn=new Map,Oy=new Set;function Gu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var zi=nt.d;nt.d={f:sA,r:aA,D:oA,C:lA,L:uA,m:cA,X:fA,S:hA,M:dA};function sA(){var e=zi.f(),i=xu();return e||i}function aA(e){var i=yi(e);i!==null&&i.tag===5&&i.type==="form"?ip(i):zi.r(e)}var Ca=typeof document>"u"?null:document;function Ny(e,i,a){var o=Ca;if(o&&typeof i=="string"&&i){var h=re(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Oy.has(h)||(Oy.add(h),e={rel:e,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Le(i,"link",e),Zt(i),o.head.appendChild(i)))}}function oA(e){zi.D(e),Ny("dns-prefetch",e,null)}function lA(e,i){zi.C(e,i),Ny("preconnect",e,i)}function uA(e,i,a){zi.L(e,i,a);var o=Ca;if(o&&e&&i){var h='link[rel="preload"][as="'+re(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+re(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+re(a.imageSizes)+'"]')):h+='[href="'+re(e)+'"]';var f=h;switch(i){case"style":f=Da(e);break;case"script":f=Oa(e)}Nn.has(f)||(e=I({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Nn.set(f,e),o.querySelector(h)!==null||i==="style"&&o.querySelector(Jo(f))||i==="script"&&o.querySelector(tl(f))||(i=o.createElement("link"),Le(i,"link",e),Zt(i),o.head.appendChild(i)))}}function cA(e,i){zi.m(e,i);var a=Ca;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+re(o)+'"][href="'+re(e)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Oa(e)}if(!Nn.has(f)&&(e=I({rel:"modulepreload",href:e},i),Nn.set(f,e),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tl(f)))return}o=a.createElement("link"),Le(o,"link",e),Zt(o),a.head.appendChild(o)}}}function hA(e,i,a){zi.S(e,i,a);var o=Ca;if(o&&e){var h=sr(o).hoistableStyles,f=Da(e);i=i||"default";var _=h.get(f);if(!_){var E={loading:0,preload:null};if(_=o.querySelector(Jo(f)))E.loading=5;else{e=I({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Nn.get(f))&&Xf(e,a);var b=_=o.createElement("link");Zt(b),Le(b,"link",e),b._p=new Promise(function(N,q){b.onload=N,b.onerror=q}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Qu(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(f,_)}}}function fA(e,i){zi.X(e,i);var a=Ca;if(a&&e){var o=sr(a).hoistableScripts,h=Oa(e),f=o.get(h);f||(f=a.querySelector(tl(h)),f||(e=I({src:e,async:!0},i),(i=Nn.get(h))&&$f(e,i),f=a.createElement("script"),Zt(f),Le(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function dA(e,i){zi.M(e,i);var a=Ca;if(a&&e){var o=sr(a).hoistableScripts,h=Oa(e),f=o.get(h);f||(f=a.querySelector(tl(h)),f||(e=I({src:e,async:!0,type:"module"},i),(i=Nn.get(h))&&$f(e,i),f=a.createElement("script"),Zt(f),Le(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Vy(e,i,a,o){var h=(h=gn.current)?Gu(h):null;if(!h)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Da(a.href),a=sr(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Da(a.href);var f=sr(h).hoistableStyles,_=f.get(e);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,_),(f=h.querySelector(Jo(e)))&&!f._p&&(_.instance=f,_.state.loading=5),Nn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Nn.set(e,a),f||mA(h,e,a,_.state))),i&&o===null)throw Error(s(528,""));return _}if(i&&o!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Oa(a),a=sr(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Da(e){return'href="'+re(e)+'"'}function Jo(e){return'link[rel="stylesheet"]['+e+"]"}function My(e){return I({},e,{"data-precedence":e.precedence,precedence:null})}function mA(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Le(i,"link",a),Zt(i),e.head.appendChild(i))}function Oa(e){return'[src="'+re(e)+'"]'}function tl(e){return"script[async]"+e}function Uy(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+re(a.href)+'"]');if(o)return i.instance=o,Zt(o),o;var h=I({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Zt(o),Le(o,"style",h),Qu(o,a.precedence,e),i.instance=o;case"stylesheet":h=Da(a.href);var f=e.querySelector(Jo(h));if(f)return i.state.loading|=4,i.instance=f,Zt(f),f;o=My(a),(h=Nn.get(h))&&Xf(o,h),f=(e.ownerDocument||e).createElement("link"),Zt(f);var _=f;return _._p=new Promise(function(E,b){_.onload=E,_.onerror=b}),Le(f,"link",o),i.state.loading|=4,Qu(f,a.precedence,e),i.instance=f;case"script":return f=Oa(a.src),(h=e.querySelector(tl(f)))?(i.instance=h,Zt(h),h):(o=a,(h=Nn.get(f))&&(o=I({},a),$f(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),Zt(h),Le(h,"link",o),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(o=i.instance,i.state.loading|=4,Qu(o,a.precedence,e));return i.instance}function Qu(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,_=0;_<o.length;_++){var E=o[_];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(e,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Xf(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function $f(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Ku=null;function ky(e,i,a){if(Ku===null){var o=new Map,h=Ku=new Map;h.set(a,o)}else h=Ku,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var f=a[h];if(!(f[ir]||f[Ce]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=e+_;var E=o.get(_);E?E.push(f):o.set(_,[f])}}return o}function Py(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function gA(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function xy(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var el=null;function pA(){}function yA(e,i,a){if(el===null)throw Error(s(475));var o=el;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var h=Da(a.href),f=e.querySelector(Jo(h));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=Yu.bind(o),e.then(o,o)),i.state.loading|=4,i.instance=f,Zt(f);return}f=e.ownerDocument||e,a=My(a),(h=Nn.get(h))&&Xf(a,h),f=f.createElement("link"),Zt(f);var _=f;_._p=new Promise(function(E,b){_.onload=E,_.onerror=b}),Le(f,"link",a),i.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(i,e),(e=i.state.preload)&&!(i.state.loading&3)&&(o.count++,i=Yu.bind(o),e.addEventListener("load",i),e.addEventListener("error",i))}}function _A(){if(el===null)throw Error(s(475));var e=el;return e.stylesheets&&e.count===0&&Wf(e,e.stylesheets),0<e.count?function(i){var a=setTimeout(function(){if(e.stylesheets&&Wf(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Yu(){if(this.count--,this.count===0){if(this.stylesheets)Wf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xu=null;function Wf(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xu=new Map,i.forEach(vA,e),Xu=null,Yu.call(e))}function vA(e,i){if(!(i.state.loading&4)){var a=Xu.get(e);if(a)var o=a.get(null);else{a=new Map,Xu.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||o,f===o&&a.set(null,h),a.set(_,h),this.count++,o=Yu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var nl={$$typeof:B,Provider:null,Consumer:null,_currentValue:bt,_currentValue2:bt,_threadCount:0};function EA(e,i,a,o,h,f,_,E){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gs(0),this.hiddenUpdates=Gs(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Ly(e,i,a,o,h,f,_,E,b,N,q,K){return e=new EA(e,i,a,_,E,b,N,K),i=1,f===!0&&(i|=24),f=Dn(3,null,null,i),e.current=f,f.stateNode=e,i=Ch(),i.refCount++,e.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},uf(f),e}function zy(e){return e?(e=la,e):la}function By(e,i,a,o,h,f){h=zy(h),o.context===null?o.context=h:o.pendingContext=h,o=_r(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=vr(e,o,i),a!==null&&(tn(a,e,i),zo(a,e,i))}function jy(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function Zf(e,i){jy(e,i),(e=e.alternate)&&jy(e,i)}function Hy(e){if(e.tag===13){var i=hr(e,67108864);i!==null&&tn(i,e,67108864),Zf(e,67108864)}}var $u=!0;function TA(e,i,a,o){var h=S.T;S.T=null;var f=nt.p;try{nt.p=2,Jf(e,i,a,o)}finally{nt.p=f,S.T=h}}function AA(e,i,a,o){var h=S.T;S.T=null;var f=nt.p;try{nt.p=8,Jf(e,i,a,o)}finally{nt.p=f,S.T=h}}function Jf(e,i,a,o){if($u){var h=td(o);if(h===null)jf(e,i,o,Wu,a),Fy(e,o);else if(bA(h,e,i,a,o))o.stopPropagation();else if(Fy(e,o),i&4&&-1<SA.indexOf(e)){for(;h!==null;){var f=yi(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Mn(f.pendingLanes);if(_!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var b=1<<31-$e(_);E.entanglements[1]|=b,_&=~b}si(f),!(te&6)&&(Uu=en()+500,$o(0))}}break;case 13:E=hr(f,2),E!==null&&tn(E,f,2),xu(),Zf(f,2)}if(f=td(o),f===null&&jf(e,i,o,Wu,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else jf(e,i,o,null,a)}}function td(e){return e=$s(e),ed(e)}var Wu=null;function ed(e){if(Wu=null,e=Un(e),e!==null){var i=lt(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=Ht(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Wu=e,null}function qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pl()){case _e:return 2;case Ie:return 8;case gi:case xl:return 32;case io:return 268435456;default:return 32}default:return 32}}var nd=!1,Rr=null,Ir=null,Cr=null,il=new Map,rl=new Map,Dr=[],SA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fy(e,i){switch(e){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":il.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(i.pointerId)}}function sl(e,i,a,o,h,f){return e===null||e.nativeEvent!==f?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=yi(i),i!==null&&Hy(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function bA(e,i,a,o,h){switch(i){case"focusin":return Rr=sl(Rr,e,i,a,o,h),!0;case"dragenter":return Ir=sl(Ir,e,i,a,o,h),!0;case"mouseover":return Cr=sl(Cr,e,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return il.set(f,sl(il.get(f)||null,e,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,rl.set(f,sl(rl.get(f)||null,e,i,a,o,h)),!0}return!1}function Gy(e){var i=Un(e.target);if(i!==null){var a=lt(i);if(a!==null){if(i=a.tag,i===13){if(i=Ht(a),i!==null){e.blockedOn=i,nr(e.priority,function(){if(a.tag===13){var o=fn(),h=hr(a,o);h!==null&&tn(h,a,o),Zf(a,o)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zu(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=td(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);vn=o,a.target.dispatchEvent(o),vn=null}else return i=yi(a),i!==null&&Hy(i),e.blockedOn=a,!1;i.shift()}return!0}function Qy(e,i,a){Zu(e)&&a.delete(i)}function wA(){nd=!1,Rr!==null&&Zu(Rr)&&(Rr=null),Ir!==null&&Zu(Ir)&&(Ir=null),Cr!==null&&Zu(Cr)&&(Cr=null),il.forEach(Qy),rl.forEach(Qy)}function Ju(e,i){e.blockedOn===i&&(e.blockedOn=null,nd||(nd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,wA)))}var tc=null;function Ky(e){tc!==e&&(tc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){tc===e&&(tc=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],h=e[i+2];if(typeof o!="function"){if(ed(o||a)===null)continue;break}var f=yi(a);f!==null&&(e.splice(i,3),i-=3,Fh(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function al(e){function i(b){return Ju(b,e)}Rr!==null&&Ju(Rr,e),Ir!==null&&Ju(Ir,e),Cr!==null&&Ju(Cr,e),il.forEach(i),rl.forEach(i);for(var a=0;a<Dr.length;a++){var o=Dr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)Gy(a),a.blockedOn===null&&Dr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],_=h[ve]||null;if(typeof f=="function")_||Ky(a);else if(_){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[ve]||null)E=_.formAction;else if(ed(h)!==null)continue}else E=_.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),Ky(a)}}}function id(e){this._internalRoot=e}ec.prototype.render=id.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,o=fn();By(a,o,e,i,null,null)},ec.prototype.unmount=id.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;e.tag===0&&wa(),By(e.current,2,null,e,null,null),xu(),i[pi]=null}};function ec(e){this._internalRoot=e}ec.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hl();e={blockedOn:null,target:e,priority:i};for(var a=0;a<Dr.length&&i!==0&&i<Dr[a].priority;a++);Dr.splice(a,0,e),a===0&&Gy(e)}};var Yy=t.version;if(Yy!=="19.0.0")throw Error(s(527,Yy,"19.0.0"));nt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=X(i),e=e!==null?at(e):null,e=e===null?null:e.stateNode,e};var RA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:S,findFiberByHostInstance:Un,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{$i=nc.inject(RA),He=nc}catch{}}return ll.createRoot=function(e,i){if(!l(e))throw Error(s(299));var a=!1,o="",h=hp,f=fp,_=dp,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=Ly(e,1,!1,null,null,a,o,h,f,_,E,null),e[pi]=i.current,Bf(e.nodeType===8?e.parentNode:e),new id(i)},ll.hydrateRoot=function(e,i,a){if(!l(e))throw Error(s(299));var o=!1,h="",f=hp,_=fp,E=dp,b=null,N=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(N=a.formState)),i=Ly(e,1,!0,i,a??null,o,h,f,_,E,b,N),i.context=zy(null),a=i.current,o=fn(),h=_r(o),h.callback=null,vr(a,h,o),i.current.lanes=o,le(i,o),si(i),e[pi]=i.current,Bf(e),new ec(i)},ll.version="19.0.0",ll}var r_;function PA(){if(r_)return ad.exports;r_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),ad.exports=kA(),ad.exports}var xA=PA();const tm="testCache",LA=async r=>{await(await caches.open(tm)).add(r)},zA=async r=>{await(await caches.open(tm)).delete(r)},BA=async r=>{const n=await(await caches.open(tm)).match(r);return n||null},cd="/learningstories-xet1309/AH%20Conceptueel%20Model.png",jA="/learningstories-xet1309/Zuil%204.png",HA=({handleAddToCache:r,handleRemoveFromCache:t,image:n})=>W.jsxs(W.Fragment,{children:[W.jsx("img",{id:"image-element",src:n,alt:"Cached Image"}),W.jsx("button",{onClick:r,children:"handleAddToCache 1"}),W.jsx("button",{onClick:t,children:"handleRemoveFromCache 2"})]}),qA=()=>{const[r,t]=ee.useState(null);ee.useEffect(()=>{n()},[]);const n=async()=>{const c=await BA(cd);t(c?c.url:jA)},s=async()=>{await LA(cd)},l=async()=>{await zA(cd)};return W.jsx(HA,{handleAddToCache:s,handleRemoveFromCache:l,image:r})},FA=()=>{};var s_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=function(r){const t=[];let n=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[n++]=l:l<2048?(t[n++]=l>>6|192,t[n++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=l>>18|240,t[n++]=l>>12&63|128,t[n++]=l>>6&63|128,t[n++]=l&63|128):(t[n++]=l>>12|224,t[n++]=l>>6&63|128,t[n++]=l&63|128)}return t},GA=function(r){const t=[];let n=0,s=0;for(;n<r.length;){const l=r[n++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const c=r[n++];t[s++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=r[n++],d=r[n++],g=r[n++],p=((l&7)<<18|(c&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(p>>10)),t[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[n++],d=r[n++];t[s++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return t.join("")},Pv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const c=r[l],d=l+1<r.length,g=d?r[l+1]:0,p=l+2<r.length,v=p?r[l+2]:0,A=c>>2,C=(c&3)<<4|g>>4;let x=(g&15)<<2|v>>6,B=v&63;p||(B=64,d||(x=64)),s.push(n[A],n[C],n[x],n[B])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(kv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):GA(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const c=n[r.charAt(l++)],g=l<r.length?n[r.charAt(l)]:0;++l;const v=l<r.length?n[r.charAt(l)]:64;++l;const C=l<r.length?n[r.charAt(l)]:64;if(++l,c==null||g==null||v==null||C==null)throw new QA;const x=c<<2|g>>4;if(s.push(x),v!==64){const B=g<<4&240|v>>2;if(s.push(B),C!==64){const Q=v<<6&192|C;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class QA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KA=function(r){const t=kv(r);return Pv.encodeByteArray(t,!0)},vc=function(r){return KA(r).replace(/\./g,"")},xv=function(r){try{return Pv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=()=>YA().__FIREBASE_DEFAULTS__,$A=()=>{if(typeof process>"u"||typeof s_>"u")return;const r=s_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},WA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&xv(r[1]);return t&&JSON.parse(t)},zc=()=>{try{return FA()||XA()||$A()||WA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Lv=r=>{var t,n;return(n=(t=zc())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[r]},ZA=r=>{const t=Lv(r);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},zv=()=>{var r;return(r=zc())===null||r===void 0?void 0:r.config},Bv=r=>{var t;return(t=zc())===null||t===void 0?void 0:t[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[vc(JSON.stringify(n)),vc(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function nS(){var r;const t=(r=zc())===null||r===void 0?void 0:r.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function sS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aS(){const r=Ye();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function oS(){return!nS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lS(){try{return typeof indexedDB=="object"}catch{return!1}}function uS(){return new Promise((r,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;t(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="FirebaseError";class Ki extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=cS,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},l=`${this.service}/${t}`,c=this.errors[t],d=c?hS(c,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new Ki(l,g,s)}}function hS(r,t){return r.replace(fS,(n,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const fS=/\{\$([^}]+)}/g;function dS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function Vs(r,t){if(r===t)return!0;const n=Object.keys(r),s=Object.keys(t);for(const l of n){if(!s.includes(l))return!1;const c=r[l],d=t[l];if(a_(c)&&a_(d)){if(!Vs(c,d))return!1}else if(c!==d)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function a_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){const t=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function mS(r,t){const n=new gS(r,t);return n.subscribe.bind(n)}class gS{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let l;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");pS(t,["next","error","complete"])?l=t:l={next:t,error:n,complete:s},l.next===void 0&&(l.next=hd),l.error===void 0&&(l.error=hd),l.complete===void 0&&(l.complete=hd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pS(r,t){if(typeof r!="object"||r===null)return!1;for(const n of t)if(n in r&&typeof r[n]=="function")return!0;return!1}function hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(r){return r&&r._delegate?r._delegate:r}class Ms{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new JA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t?.identifier),l=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(vS(t))try{this.getOrInitializeService({instanceIdentifier:Rs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});s.resolve(c)}catch{}}}}clearInstance(t=Rs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Rs){return this.instances.has(t)}getOptions(t=Rs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&d.resolve(l)}return l}onInit(t,n){var s;const l=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(l))!==null&&s!==void 0?s:new Set;c.add(t),this.onInitCallbacks.set(l,c);const d=this.instances.get(l);return d&&t(d,l),()=>{c.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:_S(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Rs){return this.component?this.component.multipleInstances?t:Rs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _S(r){return r===Rs?void 0:r}function vS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new yS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ot||(Ot={}));const TS={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},AS=Ot.INFO,SS={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},bS=(r,t,...n)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=SS[t];if(l)console[l](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class em{constructor(t){this.name=t,this._logLevel=AS,this._logHandler=bS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ot))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?TS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...t),this._logHandler(this,Ot.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...t),this._logHandler(this,Ot.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...t),this._logHandler(this,Ot.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...t),this._logHandler(this,Ot.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...t),this._logHandler(this,Ot.ERROR,...t)}}const wS=(r,t)=>t.some(n=>r instanceof n);let o_,l_;function RS(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IS(){return l_||(l_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jv=new WeakMap,bd=new WeakMap,Hv=new WeakMap,fd=new WeakMap,nm=new WeakMap;function CS(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Pr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return t.then(n=>{n instanceof IDBCursor&&jv.set(n,r)}).catch(()=>{}),nm.set(t,r),t}function DS(r){if(bd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});bd.set(r,t)}let wd={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return bd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Hv.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function OS(r){wd=r(wd)}function NS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=r.call(dd(this),t,...n);return Hv.set(s,t.sort?t.sort():[t]),Pr(s)}:IS().includes(r)?function(...t){return r.apply(dd(this),t),Pr(jv.get(this))}:function(...t){return Pr(r.apply(dd(this),t))}}function VS(r){return typeof r=="function"?NS(r):(r instanceof IDBTransaction&&DS(r),wS(r,RS())?new Proxy(r,wd):r)}function Pr(r){if(r instanceof IDBRequest)return CS(r);if(fd.has(r))return fd.get(r);const t=VS(r);return t!==r&&(fd.set(r,t),nm.set(t,r)),t}const dd=r=>nm.get(r);function MS(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Pr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Pr(d.result),p.oldVersion,p.newVersion,Pr(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const US=["get","getKey","getAll","getAllKeys","count"],kS=["put","add","delete","clear"],md=new Map;function u_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(md.get(t))return md.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=kS.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||US.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let v=p.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),l&&p.done]))[0]};return md.set(t,c),c}OS(r=>({...r,get:(t,n,s)=>u_(t,n)||r.get(t,n,s),has:(t,n)=>!!u_(t,n)||r.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xS(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function xS(r){const t=r.getComponent();return t?.type==="VERSION"}const Rd="@firebase/app",c_="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new em("@firebase/app"),LS="@firebase/app-compat",zS="@firebase/analytics-compat",BS="@firebase/analytics",jS="@firebase/app-check-compat",HS="@firebase/app-check",qS="@firebase/auth",FS="@firebase/auth-compat",GS="@firebase/database",QS="@firebase/data-connect",KS="@firebase/database-compat",YS="@firebase/functions",XS="@firebase/functions-compat",$S="@firebase/installations",WS="@firebase/installations-compat",ZS="@firebase/messaging",JS="@firebase/messaging-compat",tb="@firebase/performance",eb="@firebase/performance-compat",nb="@firebase/remote-config",ib="@firebase/remote-config-compat",rb="@firebase/storage",sb="@firebase/storage-compat",ab="@firebase/firestore",ob="@firebase/vertexai",lb="@firebase/firestore-compat",ub="firebase",cb="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="[DEFAULT]",hb={[Rd]:"fire-core",[LS]:"fire-core-compat",[BS]:"fire-analytics",[zS]:"fire-analytics-compat",[HS]:"fire-app-check",[jS]:"fire-app-check-compat",[qS]:"fire-auth",[FS]:"fire-auth-compat",[GS]:"fire-rtdb",[QS]:"fire-data-connect",[KS]:"fire-rtdb-compat",[YS]:"fire-fn",[XS]:"fire-fn-compat",[$S]:"fire-iid",[WS]:"fire-iid-compat",[ZS]:"fire-fcm",[JS]:"fire-fcm-compat",[tb]:"fire-perf",[eb]:"fire-perf-compat",[nb]:"fire-rc",[ib]:"fire-rc-compat",[rb]:"fire-gcs",[sb]:"fire-gcs-compat",[ab]:"fire-fst",[lb]:"fire-fst-compat",[ob]:"fire-vertex","fire-js":"fire-js",[ub]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,fb=new Map,Cd=new Map;function h_(r,t){try{r.container.addComponent(t)}catch(n){qi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,n)}}function za(r){const t=r.name;if(Cd.has(t))return qi.debug(`There were multiple attempts to register component ${t}.`),!1;Cd.set(t,r);for(const n of Ec.values())h_(n,r);for(const n of fb.values())h_(n,r);return!0}function im(r,t){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(t)}function zn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new Il("app","Firebase",db);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=cb;function qv(r,t={}){let n=r;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Id,automaticDataCollectionEnabled:!1},t),l=s.name;if(typeof l!="string"||!l)throw xr.create("bad-app-name",{appName:String(l)});if(n||(n=zv()),!n)throw xr.create("no-options");const c=Ec.get(l);if(c){if(Vs(n,c.options)&&Vs(s,c.config))return c;throw xr.create("duplicate-app",{appName:l})}const d=new ES(l);for(const p of Cd.values())d.addComponent(p);const g=new mb(n,s,d);return Ec.set(l,g),g}function Fv(r=Id){const t=Ec.get(r);if(!t&&r===Id&&zv())return qv();if(!t)throw xr.create("no-app",{appName:r});return t}function Lr(r,t,n){var s;let l=(s=hb[r])!==null&&s!==void 0?s:r;n&&(l+=`-${n}`);const c=l.match(/\s|\//),d=t.match(/\s|\//);if(c||d){const g=[`Unable to register library "${l}" with version "${t}":`];c&&g.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&d&&g.push("and"),d&&g.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qi.warn(g.join(" "));return}za(new Ms(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="firebase-heartbeat-database",pb=1,vl="firebase-heartbeat-store";let gd=null;function Gv(){return gd||(gd=MS(gb,pb,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(vl)}catch(n){console.warn(n)}}}}).catch(r=>{throw xr.create("idb-open",{originalErrorMessage:r.message})})),gd}async function yb(r){try{const n=(await Gv()).transaction(vl),s=await n.objectStore(vl).get(Qv(r));return await n.done,s}catch(t){if(t instanceof Ki)qi.warn(t.message);else{const n=xr.create("idb-get",{originalErrorMessage:t?.message});qi.warn(n.message)}}}async function f_(r,t){try{const s=(await Gv()).transaction(vl,"readwrite");await s.objectStore(vl).put(t,Qv(r)),await s.done}catch(n){if(n instanceof Ki)qi.warn(n.message);else{const s=xr.create("idb-set",{originalErrorMessage:n?.message});qi.warn(s.message)}}}function Qv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=1024,vb=30;class Eb{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ab(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=d_();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>vb){const d=Sb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){qi.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=d_(),{heartbeatsToSend:s,unsentEntries:l}=Tb(this._heartbeatsCache.heartbeats),c=vc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return qi.warn(n),""}}}function d_(){return new Date().toISOString().substring(0,10)}function Tb(r,t=_b){const n=[];let s=r.slice();for(const l of r){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),m_(n)>t){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),m_(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Ab{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lS()?uS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yb(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return f_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const l=await this.read();return f_(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function m_(r){return vc(JSON.stringify({version:2,heartbeats:r})).length}function Sb(r){if(r.length===0)return-1;let t=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(r){za(new Ms("platform-logger",t=>new PS(t),"PRIVATE")),za(new Ms("heartbeat",t=>new Eb(t),"PRIVATE")),Lr(Rd,c_,r),Lr(Rd,c_,"esm2017"),Lr("fire-js","")}bb("");function rm(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}function Kv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wb=Kv,Yv=new Il("auth","Firebase",Kv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new em("@firebase/auth");function Rb(r,...t){Tc.logLevel<=Ot.WARN&&Tc.warn(`Auth (${Xa}): ${r}`,...t)}function uc(r,...t){Tc.logLevel<=Ot.ERROR&&Tc.error(`Auth (${Xa}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,...t){throw am(r,...t)}function Hn(r,...t){return am(r,...t)}function sm(r,t,n){const s=Object.assign(Object.assign({},wb()),{[t]:n});return new Il("auth","Firebase",s).create(t,{appName:r.name})}function Ds(r){return sm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ib(r,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&ci(r,"argument-error"),sm(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function am(r,...t){if(typeof r!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return Yv.create(r,...t)}function gt(r,t,...n){if(!r)throw am(t,...n)}function ji(r){const t="INTERNAL ASSERTION FAILED: "+r;throw uc(t),new Error(t)}function Fi(r,t){r||ji(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Cb(){return g_()==="http:"||g_()==="https:"}function g_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cb()||rS()||"connection"in navigator)?navigator.onLine:!0}function Ob(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,n){this.shortDelay=t,this.longDelay=n,Fi(n>t,"Short delay should be less than long delay!"),this.isMobile=eS()||sS()}get(){return Db()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(r,t){Fi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Mb=new Dl(3e4,6e4);function lm(r,t){return r.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:r.tenantId}):t}async function $a(r,t,n,s,l={}){return $v(r,l,async()=>{let c={},d={};s&&(t==="GET"?d=s:c={body:JSON.stringify(s)});const g=Cl(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:t,headers:p},c);return iS()||(v.referrerPolicy="no-referrer"),Xv.fetch()(await Wv(r,r.config.apiHost,n,g),v)})}async function $v(r,t,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},Nb),t);try{const l=new kb(r),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ic(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const g=c.ok?d.errorMessage:d.error.message,[p,v]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ic(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw ic(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw ic(r,"user-disabled",d);const A=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw sm(r,A,v);ci(r,A)}}catch(l){if(l instanceof Ki)throw l;ci(r,"network-request-failed",{message:String(l)})}}async function Ub(r,t,n,s,l={}){const c=await $a(r,t,n,s,l);return"mfaPendingCredential"in c&&ci(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Wv(r,t,n,s){const l=`${t}${n}?${s}`,c=r,d=c.config.emulator?om(r.config,l):`${r.config.apiScheme}://${l}`;return Vb.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class kb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Hn(this.auth,"network-request-failed")),Mb.get())})}}function ic(r,t,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const l=Hn(r,t,s);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(r,t){return $a(r,"POST","/v1/accounts:delete",t)}async function Ac(r,t){return $a(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xb(r,t=!1){const n=mn(r),s=await n.getIdToken(t),l=um(s);gt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:s,authTime:ml(pd(l.auth_time)),issuedAtTime:ml(pd(l.iat)),expirationTime:ml(pd(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function pd(r){return Number(r)*1e3}function um(r){const[t,n,s]=r.split(".");if(t===void 0||n===void 0||s===void 0)return uc("JWT malformed, contained fewer than 3 sections"),null;try{const l=xv(n);return l?JSON.parse(l):(uc("Failed to decode base64 JWT payload"),null)}catch(l){return uc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function p_(r){const t=um(r);return gt(t,"internal-error"),gt(typeof t.exp<"u","internal-error"),gt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(r,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Ki&&Lb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Lb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ml(this.lastLoginAt),this.creationTime=ml(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(r){var t;const n=r.auth,s=await r.getIdToken(),l=await El(r,Ac(n,{idToken:s}));gt(l?.users.length,n,"internal-error");const c=l.users[0];r._notifyReloadListener(c);const d=!((t=c.providerUserInfo)===null||t===void 0)&&t.length?Zv(c.providerUserInfo):[],g=jb(r.providerData,d),p=r.isAnonymous,v=!(r.email&&c.passwordHash)&&!g?.length,A=p?v:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:g,metadata:new Od(c.createdAt,c.lastLoginAt),isAnonymous:A};Object.assign(r,C)}async function Bb(r){const t=mn(r);await Sc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function jb(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function Zv(r){return r.map(t=>{var{providerId:n}=t,s=rm(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hb(r,t){const n=await $v(r,{},async()=>{const s=Cl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:c}=r.config,d=await Wv(r,l,"/v1/token",`key=${c}`),g=await r._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",Xv.fetch()(d,{method:"POST",headers:g,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qb(r,t){return $a(r,"POST","/v2/accounts:revokeToken",lm(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){gt(t.idToken,"internal-error"),gt(typeof t.idToken<"u","internal-error"),gt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):p_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){gt(t.length!==0,"internal-error");const n=p_(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:l,expiresIn:c}=await Hb(t,n);this.updateTokensAndExpiration(s,l,Number(c))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:l,expirationTime:c}=n,d=new ka;return s&&(gt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(gt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),c&&(gt(typeof c=="number","internal-error",{appName:t}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ka,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(r,t){gt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Bn{constructor(t){var{uid:n,auth:s,stsTokenManager:l}=t,c=rm(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Od(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(t){const n=await El(this,this.stsTokenManager.getToken(this.auth,t));return gt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xb(this,t)}reload(){return Bb(this)}_assign(t){this!==t&&(gt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Bn(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await Sc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Ds(this.auth));const t=await this.getIdToken();return await El(this,Pb(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,l,c,d,g,p,v,A;const C=(s=n.displayName)!==null&&s!==void 0?s:void 0,x=(l=n.email)!==null&&l!==void 0?l:void 0,B=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,Q=(d=n.photoURL)!==null&&d!==void 0?d:void 0,J=(g=n.tenantId)!==null&&g!==void 0?g:void 0,$=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,pt=(v=n.createdAt)!==null&&v!==void 0?v:void 0,ft=(A=n.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:_t,emailVerified:jt,isAnonymous:vt,providerData:Dt,stsTokenManager:M}=n;gt(_t&&M,t,"internal-error");const w=ka.fromJSON(this.name,M);gt(typeof _t=="string",t,"internal-error"),Nr(C,t.name),Nr(x,t.name),gt(typeof jt=="boolean",t,"internal-error"),gt(typeof vt=="boolean",t,"internal-error"),Nr(B,t.name),Nr(Q,t.name),Nr(J,t.name),Nr($,t.name),Nr(pt,t.name),Nr(ft,t.name);const S=new Bn({uid:_t,auth:t,email:x,emailVerified:jt,displayName:C,isAnonymous:vt,photoURL:Q,phoneNumber:B,tenantId:J,stsTokenManager:w,createdAt:pt,lastLoginAt:ft});return Dt&&Array.isArray(Dt)&&(S.providerData=Dt.map(I=>Object.assign({},I))),$&&(S._redirectEventId=$),S}static async _fromIdTokenResponse(t,n,s=!1){const l=new ka;l.updateFromServerResponse(n);const c=new Bn({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Sc(c),c}static async _fromGetAccountInfoResponse(t,n,s){const l=n.users[0];gt(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?Zv(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,g=new ka;g.updateFromIdToken(s);const p=new Bn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Od(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map;function Hi(r){Fi(r instanceof Function,"Expected a class definition");let t=y_.get(r);return t?(Fi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,y_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Jv.type="NONE";const __=Jv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(r,t,n){return`firebase:${r}:${t}:${n}`}class Pa{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:l,name:c}=this.auth;this.fullUserKey=cc(this.userKey,l.apiKey,c),this.fullPersistenceKey=cc("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await Ac(this.auth,{idToken:t}).catch(()=>{});return n?Bn._fromGetAccountInfoResponse(this.auth,n,t):null}return Bn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Pa(Hi(__),t,s);const l=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=l[0]||Hi(__);const d=cc(s,t.config.apiKey,t.name);let g=null;for(const v of n)try{const A=await v._get(d);if(A){let C;if(typeof A=="string"){const x=await Ac(t,{idToken:A}).catch(()=>{});if(!x)break;C=await Bn._fromGetAccountInfoResponse(t,x,A)}else C=Bn._fromJSON(t,A);v!==c&&(g=C),c=v;break}}catch{}const p=l.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Pa(c,t,s):(c=p[0],g&&await c._set(d,g.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new Pa(c,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(iE(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(tE(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(sE(t))return"Blackberry";if(aE(t))return"Webos";if(eE(t))return"Safari";if((t.includes("chrome/")||nE(t))&&!t.includes("edge/"))return"Chrome";if(rE(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function tE(r=Ye()){return/firefox\//i.test(r)}function eE(r=Ye()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nE(r=Ye()){return/crios\//i.test(r)}function iE(r=Ye()){return/iemobile/i.test(r)}function rE(r=Ye()){return/android/i.test(r)}function sE(r=Ye()){return/blackberry/i.test(r)}function aE(r=Ye()){return/webos/i.test(r)}function cm(r=Ye()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Fb(r=Ye()){var t;return cm(r)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Gb(){return aS()&&document.documentMode===10}function oE(r=Ye()){return cm(r)||rE(r)||aE(r)||sE(r)||/windows phone/i.test(r)||iE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(r,t=[]){let n;switch(r){case"Browser":n=v_(Ye());break;case"Worker":n=`${v_(Ye())}-${r}`;break;default:n=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xa}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=c=>new Promise((d,g)=>{try{const p=t(c);d(p)}catch(p){g(p)}});s.onAbort=n,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kb(r,t={}){return $a(r,"GET","/v2/passwordPolicy",lm(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=6;class Xb{constructor(t){var n,s,l,c;const d=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:Yb,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=t.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,l,c,d,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,p),this.validatePasswordCharacterOptions(t,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,l,c){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(t,n,s,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new Qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var s,l,c;if(!this._deleted&&(this.persistenceManager=await Pa.create(this,t),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Ac(this,{idToken:t}),s=await Bn._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(zn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(g,g))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let l=s,c=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=l?._redirectEventId,p=await this.tryRedirectSignIn(t);(!d||d===g)&&p?.user&&(l=p.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(d){l=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Sc(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Ob()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject(Ds(this));const n=t?mn(t):null;return n&&gt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&gt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Kb(this),n=new Xb(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Il("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await qb(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hi(t)||this._popupRedirectResolver;gt(n,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(g,this,"internal-error"),g.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=t.addObserver(n,s,l);return()=>{d=!0,p()}}else{const p=t.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=lE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var t;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&Rb(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Bc(r){return mn(r)}class E_{constructor(t){this.auth=t,this.observer=null,this.addObserver=mS(n=>this.observer=n)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Wb(r){hm=r}function Zb(r){return hm.loadJS(r)}function Jb(){return hm.gapiScript}function tw(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(r,t){const n=im(r,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Vs(c,t??{}))return l;ci(l,"already-initialized")}return n.initialize({options:t})}function nw(r,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Hi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function iw(r,t,n){const s=Bc(r);gt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,c=uE(t),{host:d,port:g}=rw(t),p=g===null?"":`:${g}`,v={url:`${c}//${d}${p}/`},A=Object.freeze({host:d,port:g,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){gt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),gt(Vs(v,s.config.emulator)&&Vs(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,sw()}function uE(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function rw(r){const t=uE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const c=l[1];return{host:c,port:T_(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:T_(d)}}}function T_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function sw(){function r(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(t){return ji("not implemented")}_linkToIdToken(t,n){return ji("not implemented")}_getReauthenticationResolver(t){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(r,t){return Ub(r,"POST","/v1/accounts:signInWithIdp",lm(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="http://localhost";class Us extends cE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Us(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ci("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l}=n,c=rm(n,["providerId","signInMethod"]);if(!s||!l)return null;const d=new Us(s,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(t){const n=this.buildRequest();return xa(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,xa(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,xa(t,n)}buildRequest(){const t={requestUri:aw,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Cl(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends fm{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Ol{constructor(){super("facebook.com")}static credential(t){return Us._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vr.credentialFromTaggedObject(t)}static credentialFromError(t){return Vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vr.credential(t.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Us._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Bi.credentialFromTaggedObject(t)}static credentialFromError(t){return Bi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Bi.credential(n,s)}catch{return null}}}Bi.GOOGLE_SIGN_IN_METHOD="google.com";Bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends Ol{constructor(){super("github.com")}static credential(t){return Us._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mr.credentialFromTaggedObject(t)}static credentialFromError(t){return Mr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mr.credential(t.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Ol{constructor(){super("twitter.com")}static credential(t,n){return Us._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Ur.credential(n,s)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,l=!1){const c=await Bn._fromIdTokenResponse(t,s,l),d=A_(s);return new Ba({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const l=A_(s);return new Ba({user:t,providerId:l,_tokenResponse:s,operationType:n})}}function A_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Ki{constructor(t,n,s,l){var c;super(n.code,n.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:t.name,tenantId:(c=t.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,l){return new bc(t,n,s,l)}}function hE(r,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(r,c,t,s):c})}async function ow(r,t,n=!1){const s=await El(r,t._linkToIdToken(r.auth,await r.getIdToken()),n);return Ba._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lw(r,t,n=!1){const{auth:s}=r;if(zn(s.app))return Promise.reject(Ds(s));const l="reauthenticate";try{const c=await El(r,hE(s,l,t,r),n);gt(c.idToken,s,"internal-error");const d=um(c.idToken);gt(d,s,"internal-error");const{sub:g}=d;return gt(r.uid===g,s,"user-mismatch"),Ba._forOperation(r,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&ci(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uw(r,t,n=!1){if(zn(r.app))return Promise.reject(Ds(r));const s="signIn",l=await hE(r,s,t),c=await Ba._fromIdTokenResponse(r,s,l);return n||await r._updateCurrentUser(c.user),c}function cw(r,t,n,s){return mn(r).onIdTokenChanged(t,n,s)}function hw(r,t,n){return mn(r).beforeAuthStateChanged(t,n)}function fw(r){return mn(r).signOut()}const wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wc,"1"),this.storage.removeItem(wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=1e3,mw=10;class dE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oE(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),l=this.localCache[n];s!==l&&t(n,l,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((d,g,p)=>{this.notifyListeners(d,p)});return}const s=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Gb()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,mw):l()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},dw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}dE.type="LOCAL";const gw=dE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}mE.type="SESSION";const gE=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const s=new jc(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async v=>v(n.origin,c)),p=await pw(g);n.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:p})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(r="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((g,p)=>{const v=dm("",20);l.port1.start();const A=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(C){const x=C;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(A),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),g(x.data.response);break;default:clearTimeout(A),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:v,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(){return window}function _w(r){oi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return typeof oi().WorkerGlobalScope<"u"&&typeof oi().importScripts=="function"}async function vw(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ew(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Tw(){return pE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="firebaseLocalStorageDb",Aw=1,Rc="firebaseLocalStorage",_E="fbase_key";class Nl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hc(r,t){return r.transaction([Rc],t?"readwrite":"readonly").objectStore(Rc)}function Sw(){const r=indexedDB.deleteDatabase(yE);return new Nl(r).toPromise()}function Nd(){const r=indexedDB.open(yE,Aw);return new Promise((t,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Rc,{keyPath:_E})}catch(l){n(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Rc)?t(s):(s.close(),await Sw(),t(await Nd()))})})}async function S_(r,t,n){const s=Hc(r,!0).put({[_E]:t,value:n});return new Nl(s).toPromise()}async function bw(r,t){const n=Hc(r,!1).get(t),s=await new Nl(n).toPromise();return s===void 0?null:s.value}function b_(r,t){const n=Hc(r,!0).delete(t);return new Nl(n).toPromise()}const ww=800,Rw=3;class vE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nd(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>Rw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(Tw()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await vw(),!this.activeServiceWorker)return;this.sender=new yw(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Ew()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Nd();return await S_(t,wc,"1"),await b_(t,wc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>S_(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>bw(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>b_(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const c=Hc(l,!1).getAll();return new Nl(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:c}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ww)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vE.type="LOCAL";const Iw=vE;new Dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(r,t){return t?Hi(t):(gt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends cE{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return xa(t,this._buildIdpRequest())}_linkToIdToken(t,n){return xa(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return xa(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Cw(r){return uw(r.auth,new mm(r),r.bypassAuthState)}function Dw(r){const{auth:t,user:n}=r;return gt(n,t,"internal-error"),lw(n,new mm(r),r.bypassAuthState)}async function Ow(r){const{auth:t,user:n}=r;return gt(n,t,"internal-error"),ow(n,new mm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t,n,s,l,c=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:l,tenantId:c,error:d,type:g}=t;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(v){this.reject(v)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Cw;case"linkViaPopup":case"linkViaRedirect":return Ow;case"reauthViaPopup":case"reauthViaRedirect":return Dw;default:ci(this.auth,"internal-error")}}resolve(t){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Dl(2e3,1e4);async function Vw(r,t,n){if(zn(r.app))return Promise.reject(Hn(r,"operation-not-supported-in-this-environment"));const s=Bc(r);Ib(r,t,fm);const l=EE(s,n);return new Is(s,"signInViaPopup",t,l).executeNotNull()}class Is extends TE{constructor(t,n,s,l,c){super(t,n,l,c),this.provider=s,this.authWindow=null,this.pollId=null,Is.currentPopupAction&&Is.currentPopupAction.cancel(),Is.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return gt(t,this.auth,"internal-error"),t}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const t=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Is.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Nw.get())};t()}}Is.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="pendingRedirect",hc=new Map;class Uw extends TE{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=hc.get(this.auth._key());if(!t){try{const s=await kw(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}hc.set(this.auth._key(),t)}return this.bypassAuthState||hc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kw(r,t){const n=Lw(t),s=xw(r);if(!await s._isAvailable())return!1;const l=await s._get(n)==="true";return await s._remove(n),l}function Pw(r,t){hc.set(r._key(),t)}function xw(r){return Hi(r._redirectPersistence)}function Lw(r){return cc(Mw,r.config.apiKey,r.name)}async function zw(r,t,n=!1){if(zn(r.app))return Promise.reject(Ds(r));const s=Bc(r),l=EE(s,t),d=await new Uw(s,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=10*60*1e3;class jw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Hw(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!AE(t)){const l=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Hn(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Bw&&this.cachedEventUids.clear(),this.cachedEventUids.has(w_(t))}saveEventToCache(t){this.cachedEventUids.add(w_(t)),this.lastProcessedEventTime=Date.now()}}function w_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function AE({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function Hw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(r,t={}){return $a(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gw=/^https?/;async function Qw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await qw(r);for(const n of t)try{if(Kw(n))return}catch{}ci(r,"unauthorized-domain")}function Kw(r){const t=Dd(),{protocol:n,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!Gw.test(n))return!1;if(Fw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=new Dl(3e4,6e4);function R_(){const r=oi().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Xw(r){return new Promise((t,n)=>{var s,l,c;function d(){R_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{R_(),n(Hn(r,"network-request-failed"))},timeout:Yw.get()})}if(!((l=(s=oi().gapi)===null||s===void 0?void 0:s.iframes)===null||l===void 0)&&l.Iframe)t(gapi.iframes.getContext());else if(!((c=oi().gapi)===null||c===void 0)&&c.load)d();else{const g=tw("iframefcb");return oi()[g]=()=>{gapi.load?d():n(Hn(r,"network-request-failed"))},Zb(`${Jb()}?onload=${g}`).catch(p=>n(p))}}).catch(t=>{throw fc=null,t})}let fc=null;function $w(r){return fc=fc||Xw(r),fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=new Dl(5e3,15e3),Zw="__/auth/iframe",Jw="emulator/auth/iframe",tR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nR(r){const t=r.config;gt(t.authDomain,r,"auth-domain-config-required");const n=t.emulator?om(t,Jw):`https://${r.config.authDomain}/${Zw}`,s={apiKey:t.apiKey,appName:r.name,v:Xa},l=eR.get(r.config.apiHost);l&&(s.eid=l);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Cl(s).slice(1)}`}async function iR(r){const t=await $w(r),n=oi().gapi;return gt(n,r,"internal-error"),t.open({where:document.body,url:nR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tR,dontclear:!0},s=>new Promise(async(l,c)=>{await s.restyle({setHideOnLeave:!1});const d=Hn(r,"network-request-failed"),g=oi().setTimeout(()=>{c(d)},Ww.get());function p(){oi().clearTimeout(g),l(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sR=500,aR=600,oR="_blank",lR="http://localhost";class I_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uR(r,t,n,s=sR,l=aR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p=Object.assign(Object.assign({},rR),{width:s.toString(),height:l.toString(),top:c,left:d}),v=Ye().toLowerCase();n&&(g=nE(v)?oR:n),tE(v)&&(t=t||lR,p.scrollbars="yes");const A=Object.entries(p).reduce((x,[B,Q])=>`${x}${B}=${Q},`,"");if(Fb(v)&&g!=="_self")return cR(t||"",g),new I_(null);const C=window.open(t||"",g,A);gt(C,r,"popup-blocked");try{C.focus()}catch{}return new I_(C)}function cR(r,t){const n=document.createElement("a");n.href=r,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="__/auth/handler",fR="emulator/auth/handler",dR=encodeURIComponent("fac");async function C_(r,t,n,s,l,c){gt(r.config.authDomain,r,"auth-domain-config-required"),gt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Xa,eventId:l};if(t instanceof fm){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",dS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,C]of Object.entries({}))d[A]=C}if(t instanceof Ol){const A=t.getScopes().filter(C=>C!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const p=await r._getAppCheckToken(),v=p?`#${dR}=${encodeURIComponent(p)}`:"";return`${mR(r)}?${Cl(g).slice(1)}${v}`}function mR({config:r}){return r.emulator?om(r,fR):`https://${r.authDomain}/${hR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="webStorageSupport";class gR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=zw,this._overrideRedirectResult=Pw}async _openPopup(t,n,s,l){var c;Fi((c=this.eventManagers[t._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await C_(t,n,s,Dd(),l);return uR(t,d,dm())}async _openRedirect(t,n,s,l){await this._originValidation(t);const c=await C_(t,n,s,Dd(),l);return _w(c),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Fi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await iR(t),s=new jw(t);return n.register("authEvent",l=>(gt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(yd,{type:yd},l=>{var c;const d=(c=l?.[0])===null||c===void 0?void 0:c[yd];d!==void 0&&n(!!d),ci(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qw(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return oE()||eE()||cm()}}const pR=gR;var D_="@firebase/auth",O_="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vR(r){za(new Ms("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),c=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;gt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lE(r)},v=new $b(s,l,c,p);return nw(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),za(new Ms("auth-internal",t=>{const n=Bc(t.getProvider("auth").getImmediate());return(s=>new yR(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(D_,O_,_R(r)),Lr(D_,O_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=5*60,TR=Bv("authIdTokenMaxAge")||ER;let N_=null;const AR=r=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>TR)return;const l=n?.token;N_!==l&&(N_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function SR(r=Fv()){const t=im(r,"auth");if(t.isInitialized())return t.getImmediate();const n=ew(r,{popupRedirectResolver:pR,persistence:[Iw,gw,gE]}),s=Bv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=AR(c.toString());hw(n,d,()=>d(n.currentUser)),cw(n,g=>d(g))}}const l=Lv("auth");return l&&iw(n,`http://${l}`),n}function bR(){var r,t;return(t=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:document}Wb({loadJS(r){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const c=Hn("internal-error");c.customData=l,n(c)},s.type="text/javascript",s.charset="UTF-8",bR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vR("Browser");var wR="firebase",RR="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(wR,RR,"app");var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,SE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,w){function S(){}S.prototype=w.prototype,M.D=w.prototype,M.prototype=new S,M.prototype.constructor=M,M.C=function(I,V,P){for(var R=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)R[ye-2]=arguments[ye];return w.prototype[V].apply(I,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,w,S){S||(S=0);var I=Array(16);if(typeof w=="string")for(var V=0;16>V;++V)I[V]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(V=0;16>V;++V)I[V]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=M.g[0],S=M.g[1],V=M.g[2];var P=M.g[3],R=w+(P^S&(V^P))+I[0]+3614090360&4294967295;w=S+(R<<7&4294967295|R>>>25),R=P+(V^w&(S^V))+I[1]+3905402710&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(S^P&(w^S))+I[2]+606105819&4294967295,V=P+(R<<17&4294967295|R>>>15),R=S+(w^V&(P^w))+I[3]+3250441966&4294967295,S=V+(R<<22&4294967295|R>>>10),R=w+(P^S&(V^P))+I[4]+4118548399&4294967295,w=S+(R<<7&4294967295|R>>>25),R=P+(V^w&(S^V))+I[5]+1200080426&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(S^P&(w^S))+I[6]+2821735955&4294967295,V=P+(R<<17&4294967295|R>>>15),R=S+(w^V&(P^w))+I[7]+4249261313&4294967295,S=V+(R<<22&4294967295|R>>>10),R=w+(P^S&(V^P))+I[8]+1770035416&4294967295,w=S+(R<<7&4294967295|R>>>25),R=P+(V^w&(S^V))+I[9]+2336552879&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(S^P&(w^S))+I[10]+4294925233&4294967295,V=P+(R<<17&4294967295|R>>>15),R=S+(w^V&(P^w))+I[11]+2304563134&4294967295,S=V+(R<<22&4294967295|R>>>10),R=w+(P^S&(V^P))+I[12]+1804603682&4294967295,w=S+(R<<7&4294967295|R>>>25),R=P+(V^w&(S^V))+I[13]+4254626195&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(S^P&(w^S))+I[14]+2792965006&4294967295,V=P+(R<<17&4294967295|R>>>15),R=S+(w^V&(P^w))+I[15]+1236535329&4294967295,S=V+(R<<22&4294967295|R>>>10),R=w+(V^P&(S^V))+I[1]+4129170786&4294967295,w=S+(R<<5&4294967295|R>>>27),R=P+(S^V&(w^S))+I[6]+3225465664&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^S&(P^w))+I[11]+643717713&4294967295,V=P+(R<<14&4294967295|R>>>18),R=S+(P^w&(V^P))+I[0]+3921069994&4294967295,S=V+(R<<20&4294967295|R>>>12),R=w+(V^P&(S^V))+I[5]+3593408605&4294967295,w=S+(R<<5&4294967295|R>>>27),R=P+(S^V&(w^S))+I[10]+38016083&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^S&(P^w))+I[15]+3634488961&4294967295,V=P+(R<<14&4294967295|R>>>18),R=S+(P^w&(V^P))+I[4]+3889429448&4294967295,S=V+(R<<20&4294967295|R>>>12),R=w+(V^P&(S^V))+I[9]+568446438&4294967295,w=S+(R<<5&4294967295|R>>>27),R=P+(S^V&(w^S))+I[14]+3275163606&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^S&(P^w))+I[3]+4107603335&4294967295,V=P+(R<<14&4294967295|R>>>18),R=S+(P^w&(V^P))+I[8]+1163531501&4294967295,S=V+(R<<20&4294967295|R>>>12),R=w+(V^P&(S^V))+I[13]+2850285829&4294967295,w=S+(R<<5&4294967295|R>>>27),R=P+(S^V&(w^S))+I[2]+4243563512&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^S&(P^w))+I[7]+1735328473&4294967295,V=P+(R<<14&4294967295|R>>>18),R=S+(P^w&(V^P))+I[12]+2368359562&4294967295,S=V+(R<<20&4294967295|R>>>12),R=w+(S^V^P)+I[5]+4294588738&4294967295,w=S+(R<<4&4294967295|R>>>28),R=P+(w^S^V)+I[8]+2272392833&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^S)+I[11]+1839030562&4294967295,V=P+(R<<16&4294967295|R>>>16),R=S+(V^P^w)+I[14]+4259657740&4294967295,S=V+(R<<23&4294967295|R>>>9),R=w+(S^V^P)+I[1]+2763975236&4294967295,w=S+(R<<4&4294967295|R>>>28),R=P+(w^S^V)+I[4]+1272893353&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^S)+I[7]+4139469664&4294967295,V=P+(R<<16&4294967295|R>>>16),R=S+(V^P^w)+I[10]+3200236656&4294967295,S=V+(R<<23&4294967295|R>>>9),R=w+(S^V^P)+I[13]+681279174&4294967295,w=S+(R<<4&4294967295|R>>>28),R=P+(w^S^V)+I[0]+3936430074&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^S)+I[3]+3572445317&4294967295,V=P+(R<<16&4294967295|R>>>16),R=S+(V^P^w)+I[6]+76029189&4294967295,S=V+(R<<23&4294967295|R>>>9),R=w+(S^V^P)+I[9]+3654602809&4294967295,w=S+(R<<4&4294967295|R>>>28),R=P+(w^S^V)+I[12]+3873151461&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^S)+I[15]+530742520&4294967295,V=P+(R<<16&4294967295|R>>>16),R=S+(V^P^w)+I[2]+3299628645&4294967295,S=V+(R<<23&4294967295|R>>>9),R=w+(V^(S|~P))+I[0]+4096336452&4294967295,w=S+(R<<6&4294967295|R>>>26),R=P+(S^(w|~V))+I[7]+1126891415&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~S))+I[14]+2878612391&4294967295,V=P+(R<<15&4294967295|R>>>17),R=S+(P^(V|~w))+I[5]+4237533241&4294967295,S=V+(R<<21&4294967295|R>>>11),R=w+(V^(S|~P))+I[12]+1700485571&4294967295,w=S+(R<<6&4294967295|R>>>26),R=P+(S^(w|~V))+I[3]+2399980690&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~S))+I[10]+4293915773&4294967295,V=P+(R<<15&4294967295|R>>>17),R=S+(P^(V|~w))+I[1]+2240044497&4294967295,S=V+(R<<21&4294967295|R>>>11),R=w+(V^(S|~P))+I[8]+1873313359&4294967295,w=S+(R<<6&4294967295|R>>>26),R=P+(S^(w|~V))+I[15]+4264355552&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~S))+I[6]+2734768916&4294967295,V=P+(R<<15&4294967295|R>>>17),R=S+(P^(V|~w))+I[13]+1309151649&4294967295,S=V+(R<<21&4294967295|R>>>11),R=w+(V^(S|~P))+I[4]+4149444226&4294967295,w=S+(R<<6&4294967295|R>>>26),R=P+(S^(w|~V))+I[11]+3174756917&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~S))+I[2]+718787259&4294967295,V=P+(R<<15&4294967295|R>>>17),R=S+(P^(V|~w))+I[9]+3951481745&4294967295,M.g[0]=M.g[0]+w&4294967295,M.g[1]=M.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+P&4294967295}s.prototype.u=function(M,w){w===void 0&&(w=M.length);for(var S=w-this.blockSize,I=this.B,V=this.h,P=0;P<w;){if(V==0)for(;P<=S;)l(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<w;)if(I[V++]=M.charCodeAt(P++),V==this.blockSize){l(this,I),V=0;break}}else for(;P<w;)if(I[V++]=M[P++],V==this.blockSize){l(this,I),V=0;break}}this.h=V,this.o+=w},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var w=1;w<M.length-8;++w)M[w]=0;var S=8*this.o;for(w=M.length-8;w<M.length;++w)M[w]=S&255,S/=256;for(this.u(M),M=Array(16),w=S=0;4>w;++w)for(var I=0;32>I;I+=8)M[S++]=this.g[w]>>>I&255;return M};function c(M,w){var S=g;return Object.prototype.hasOwnProperty.call(S,M)?S[M]:S[M]=w(M)}function d(M,w){this.h=w;for(var S=[],I=!0,V=M.length-1;0<=V;V--){var P=M[V]|0;I&&P==w||(S[V]=P,I=!1)}this.g=S}var g={};function p(M){return-128<=M&&128>M?c(M,function(w){return new d([w|0],0>w?-1:0)}):new d([M|0],0>M?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return C;if(0>M)return $(v(-M));for(var w=[],S=1,I=0;M>=S;I++)w[I]=M/S|0,S*=4294967296;return new d(w,0)}function A(M,w){if(M.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(M.charAt(0)=="-")return $(A(M.substring(1),w));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=v(Math.pow(w,8)),I=C,V=0;V<M.length;V+=8){var P=Math.min(8,M.length-V),R=parseInt(M.substring(V,V+P),w);8>P?(P=v(Math.pow(w,P)),I=I.j(P).add(v(R))):(I=I.j(S),I=I.add(v(R)))}return I}var C=p(0),x=p(1),B=p(16777216);r=d.prototype,r.m=function(){if(J(this))return-$(this).m();for(var M=0,w=1,S=0;S<this.g.length;S++){var I=this.i(S);M+=(0<=I?I:4294967296+I)*w,w*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(Q(this))return"0";if(J(this))return"-"+$(this).toString(M);for(var w=v(Math.pow(M,6)),S=this,I="";;){var V=jt(S,w).g;S=pt(S,V.j(w));var P=((0<S.g.length?S.g[0]:S.h)>>>0).toString(M);if(S=V,Q(S))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function Q(M){if(M.h!=0)return!1;for(var w=0;w<M.g.length;w++)if(M.g[w]!=0)return!1;return!0}function J(M){return M.h==-1}r.l=function(M){return M=pt(this,M),J(M)?-1:Q(M)?0:1};function $(M){for(var w=M.g.length,S=[],I=0;I<w;I++)S[I]=~M.g[I];return new d(S,~M.h).add(x)}r.abs=function(){return J(this)?$(this):this},r.add=function(M){for(var w=Math.max(this.g.length,M.g.length),S=[],I=0,V=0;V<=w;V++){var P=I+(this.i(V)&65535)+(M.i(V)&65535),R=(P>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);I=R>>>16,P&=65535,R&=65535,S[V]=R<<16|P}return new d(S,S[S.length-1]&-2147483648?-1:0)};function pt(M,w){return M.add($(w))}r.j=function(M){if(Q(this)||Q(M))return C;if(J(this))return J(M)?$(this).j($(M)):$($(this).j(M));if(J(M))return $(this.j($(M)));if(0>this.l(B)&&0>M.l(B))return v(this.m()*M.m());for(var w=this.g.length+M.g.length,S=[],I=0;I<2*w;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var V=0;V<M.g.length;V++){var P=this.i(I)>>>16,R=this.i(I)&65535,ye=M.i(V)>>>16,he=M.i(V)&65535;S[2*I+2*V]+=R*he,ft(S,2*I+2*V),S[2*I+2*V+1]+=P*he,ft(S,2*I+2*V+1),S[2*I+2*V+1]+=R*ye,ft(S,2*I+2*V+1),S[2*I+2*V+2]+=P*ye,ft(S,2*I+2*V+2)}for(I=0;I<w;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=w;I<2*w;I++)S[I]=0;return new d(S,0)};function ft(M,w){for(;(M[w]&65535)!=M[w];)M[w+1]+=M[w]>>>16,M[w]&=65535,w++}function _t(M,w){this.g=M,this.h=w}function jt(M,w){if(Q(w))throw Error("division by zero");if(Q(M))return new _t(C,C);if(J(M))return w=jt($(M),w),new _t($(w.g),$(w.h));if(J(w))return w=jt(M,$(w)),new _t($(w.g),w.h);if(30<M.g.length){if(J(M)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var S=x,I=w;0>=I.l(M);)S=vt(S),I=vt(I);var V=Dt(S,1),P=Dt(I,1);for(I=Dt(I,2),S=Dt(S,2);!Q(I);){var R=P.add(I);0>=R.l(M)&&(V=V.add(S),P=R),I=Dt(I,1),S=Dt(S,1)}return w=pt(M,V.j(w)),new _t(V,w)}for(V=C;0<=M.l(w);){for(S=Math.max(1,Math.floor(M.m()/w.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=v(S),R=P.j(w);J(R)||0<R.l(M);)S-=I,P=v(S),R=P.j(w);Q(P)&&(P=x),V=V.add(P),M=pt(M,R)}return new _t(V,M)}r.A=function(M){return jt(this,M).h},r.and=function(M){for(var w=Math.max(this.g.length,M.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)&M.i(I);return new d(S,this.h&M.h)},r.or=function(M){for(var w=Math.max(this.g.length,M.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)|M.i(I);return new d(S,this.h|M.h)},r.xor=function(M){for(var w=Math.max(this.g.length,M.g.length),S=[],I=0;I<w;I++)S[I]=this.i(I)^M.i(I);return new d(S,this.h^M.h)};function vt(M){for(var w=M.g.length+1,S=[],I=0;I<w;I++)S[I]=M.i(I)<<1|M.i(I-1)>>>31;return new d(S,M.h)}function Dt(M,w){var S=w>>5;w%=32;for(var I=M.g.length-S,V=[],P=0;P<I;P++)V[P]=0<w?M.i(P+S)>>>w|M.i(P+S+1)<<32-w:M.i(P+S);return new d(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,SE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=A,zr=d}).apply(typeof V_<"u"?V_:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bE,ul,wE,dc,Vd,RE,IE,CE;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=n(this);function l(u,m){if(m)t:{var y=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var k=u[T];if(!(k in y))break t;y=y[k]}u=u[u.length-1],T=y[u],m=m(T),m!=T&&m!=null&&t(y,u,{configurable:!0,writable:!0,value:m})}}function c(u,m){u instanceof String&&(u+="");var y=0,T=!1,k={next:function(){if(!T&&y<u.length){var j=y++;return{value:m(j,u[j]),done:!1}}return T=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return c(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function v(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,y){return u.call.apply(u.bind,arguments)}function C(u,m,y){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,T),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function x(u,m,y){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:C,x.apply(null,arguments)}function B(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function Q(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(T,k,j){for(var Z=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)Z[Mt-2]=arguments[Mt];return m.prototype[k].apply(T,Z)}}function J(u){const m=u.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=u[T];return y}return[]}function $(u,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(p(T)){const k=u.length||0,j=T.length||0;u.length=k+j;for(let Z=0;Z<j;Z++)u[k+Z]=T[Z]}else u.push(T)}}class pt{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ft(u){return/^[\s\xa0]*$/.test(u)}function _t(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function jt(u){return jt[" "](u),u}jt[" "]=function(){};var vt=_t().indexOf("Gecko")!=-1&&!(_t().toLowerCase().indexOf("webkit")!=-1&&_t().indexOf("Edge")==-1)&&!(_t().indexOf("Trident")!=-1||_t().indexOf("MSIE")!=-1)&&_t().indexOf("Edge")==-1;function Dt(u,m,y){for(const T in u)m.call(y,u[T],T,u)}function M(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function w(u){const m={};for(const y in u)m[y]=u[y];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,m){let y,T;for(let k=1;k<arguments.length;k++){T=arguments[k];for(y in T)u[y]=T[y];for(let j=0;j<S.length;j++)y=S[j],Object.prototype.hasOwnProperty.call(T,y)&&(u[y]=T[y])}}function V(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function P(u){g.setTimeout(()=>{throw u},0)}function R(){var u=Ht;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ye{constructor(){this.h=this.g=null}add(m,y){const T=he.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var he=new pt(()=>new tt,u=>u.reset());class tt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let dt,lt=!1,Ht=new ye,D=()=>{const u=g.Promise.resolve(void 0);dt=()=>{u.then(X)}};var X=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){P(y)}var m=he;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}lt=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var nt=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u}();function bt(u,m){if(et.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(vt){t:{try{jt(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:At[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&bt.aa.h.call(this)}}Q(bt,et);var At={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),xt=0;function ie(u,m,y,T,k){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=k,this.key=++xt,this.da=this.fa=!1}function Gt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Xe(u){this.src=u,this.g={},this.h=0}Xe.prototype.add=function(u,m,y,T,k){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var Z=gn(u,m,T,k);return-1<Z?(m=u[Z],y||(m.fa=!1)):(m=new ie(m,this.src,j,!!T,k),m.fa=y,u.push(m)),m};function di(u,m){var y=m.type;if(y in u.g){var T=u.g[y],k=Array.prototype.indexOf.call(T,m,void 0),j;(j=0<=k)&&Array.prototype.splice.call(T,k,1),j&&(Gt(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function gn(u,m,y,T){for(var k=0;k<u.length;++k){var j=u[k];if(!j.da&&j.listener==m&&j.capture==!!y&&j.ha==T)return k}return-1}var Yi="closure_lm_"+(1e6*Math.random()|0),Xi={};function mi(u,m,y,T,k){if(Array.isArray(m)){for(var j=0;j<m.length;j++)mi(u,m[j],y,T,k);return null}return y=Pl(y),u&&u[fe]?u.K(m,y,v(T)?!!T.capture:!1,k):eo(u,m,y,!1,T,k)}function eo(u,m,y,T,k,j){if(!m)throw Error("Invalid event type");var Z=v(k)?!!k.capture:!!k,Mt=no(u);if(Mt||(u[Yi]=Mt=new Xe(u)),y=Mt.add(m,y,T,Z,j),y.proxy)return y;if(T=js(),y.proxy=T,T.src=u,T.listener=y,u.addEventListener)nt||(k=Z),k===void 0&&(k=!1),u.addEventListener(m.toString(),T,k);else if(u.attachEvent)u.attachEvent(qs(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function js(){function u(y){return m.call(u.src,u.listener,y)}const m=sh;return u}function Hs(u,m,y,T,k){if(Array.isArray(m))for(var j=0;j<m.length;j++)Hs(u,m[j],y,T,k);else T=v(T)?!!T.capture:!!T,y=Pl(y),u&&u[fe]?(u=u.i,m=String(m).toString(),m in u.g&&(j=u.g[m],y=gn(j,y,T,k),-1<y&&(Gt(j[y]),Array.prototype.splice.call(j,y,1),j.length==0&&(delete u.g[m],u.h--)))):u&&(u=no(u))&&(m=u.g[m.toString()],u=-1,m&&(u=gn(m,y,T,k)),(y=-1<u?m[u]:null)&&Yr(y))}function Yr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[fe])di(m.i,u);else{var y=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(y,T,u.capture):m.detachEvent?m.detachEvent(qs(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=no(m))?(di(y,u),y.h==0&&(y.src=null,m[Yi]=null)):Gt(u)}}}function qs(u){return u in Xi?Xi[u]:Xi[u]="on"+u}function sh(u,m){if(u.da)u=!0;else{m=new bt(m,this);var y=u.listener,T=u.ha||u.src;u.fa&&Yr(u),u=y.call(T,m)}return u}function no(u){return u=u[Yi],u instanceof Xe?u:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pl(u){return typeof u=="function"?u:(u[en]||(u[en]=function(m){return u.handleEvent(m)}),u[en])}function _e(){at.call(this),this.i=new Xe(this),this.M=this,this.F=null}Q(_e,at),_e.prototype[fe]=!0,_e.prototype.removeEventListener=function(u,m,y,T){Hs(this,u,m,y,T)};function Ie(u,m){var y,T=u.F;if(T)for(y=[];T;T=T.F)y.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new et(m,u);else if(m instanceof et)m.target=m.target||u;else{var k=m;m=new et(T,u),I(m,k)}if(k=!0,y)for(var j=y.length-1;0<=j;j--){var Z=m.g=y[j];k=gi(Z,T,!0,m)&&k}if(Z=m.g=u,k=gi(Z,T,!0,m)&&k,k=gi(Z,T,!1,m)&&k,y)for(j=0;j<y.length;j++)Z=m.g=y[j],k=gi(Z,T,!1,m)&&k}_e.prototype.N=function(){if(_e.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],T=0;T<y.length;T++)Gt(y[T]);delete u.g[m],u.h--}}this.F=null},_e.prototype.K=function(u,m,y,T){return this.i.add(String(u),m,!1,y,T)},_e.prototype.L=function(u,m,y,T){return this.i.add(String(u),m,!0,y,T)};function gi(u,m,y,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,j=0;j<m.length;++j){var Z=m[j];if(Z&&!Z.da&&Z.capture==y){var Mt=Z.listener,Ee=Z.ha||Z.src;Z.fa&&di(u.i,Z),k=Mt.call(Ee,T)!==!1&&k}}return k&&!T.defaultPrevented}function xl(u,m,y){if(typeof u=="function")y&&(u=x(u,y));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function io(u){u.g=xl(()=>{u.g=null,u.i&&(u.i=!1,io(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ah extends at{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:io(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(u){at.call(this),this.h=u,this.g={}}Q(Xr,at);var $i=[];function He(u){Dt(u.g,function(m,y){this.g.hasOwnProperty(y)&&Yr(m)},u),u.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),He(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ro=g.JSON.stringify,Fn=g.JSON.parse,$e=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function so(){}so.prototype.h=null;function Ll(u){return u.h||(u.h=u.i())}function zl(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wi(){et.call(this,"d")}Q(Wi,et);function Mn(){et.call(this,"c")}Q(Mn,et);var pn={},Zi=null;function Fs(){return Zi=Zi||new _e}pn.La="serverreachability";function ao(u){et.call(this,pn.La,u)}Q(ao,et);function Ji(u){const m=Fs();Ie(m,new ao(m))}pn.STAT_EVENT="statevent";function Gs(u,m){et.call(this,pn.STAT_EVENT,u),this.stat=m}Q(Gs,et);function le(u){const m=Fs();Ie(m,new Gs(m,u))}pn.Ma="timingevent";function Bl(u,m){et.call(this,pn.Ma,u),this.size=m}Q(Bl,et);function tr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function er(){this.g=!0}er.prototype.xa=function(){this.g=!1};function jl(u,m,y,T,k,j){u.info(function(){if(u.g)if(j)for(var Z="",Mt=j.split("&"),Ee=0;Ee<Mt.length;Ee++){var Ut=Mt[Ee].split("=");if(1<Ut.length){var Oe=Ut[0];Ut=Ut[1];var Te=Oe.split("_");Z=2<=Te.length&&Te[1]=="type"?Z+(Oe+"="+Ut+"&"):Z+(Oe+"=redacted&")}}else Z=null;else Z=j;return"XMLHTTP REQ ("+T+") [attempt "+k+"]: "+m+`
`+y+`
`+Z})}function Hl(u,m,y,T,k,j,Z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+k+"]: "+m+`
`+y+`
`+j+" "+Z})}function nr(u,m,y,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ce(u,y)+(T?" "+T:"")})}function Qn(u,m){u.info(function(){return"TIMEOUT: "+m})}er.prototype.info=function(){};function Ce(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var T=y[u];if(!(2>T.length)){var k=T[1];if(Array.isArray(k)&&!(1>k.length)){var j=k[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Z=1;Z<k.length;Z++)k[Z]=""}}}}return ro(y)}catch{return m}}var ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$r;function Qs(){}Q(Qs,so),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},$r=new Qs;function Kn(u,m,y,T){this.j=u,this.i=m,this.l=y,this.R=T||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oo}function oo(){this.i=null,this.g="",this.h=!1}var ir={},Wr={};function Un(u,m,y){u.L=1,u.v=ts(re(m)),u.m=y,u.P=!0,yi(u,null)}function yi(u,m){u.F=Date.now(),Zt(u),u.A=re(u.v);var y=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Ei(y.i,"t",T),u.C=0,y=u.j.J,u.h=new oo,u.g=nu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new ah(x(u.Y,u,u.g),u.O)),m=u.U,y=u.g,T=u.ca;var k="readystatechange";Array.isArray(k)||(k&&($i[0]=k.toString()),k=$i);for(var j=0;j<k.length;j++){var Z=mi(y,k[j],T||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Ji(),jl(u.i,u.u,u.A,u.l,u.R,u.m)}Kn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Tn(u)==3?m.j():this.Y(u)},Kn.prototype.Y=function(u){try{if(u==this.g)t:{const Te=Tn(this.g);var m=this.g.Ba();const bi=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Yl(this.g)))){this.J||Te!=4||m==7||(m==8||0>=bi?Ji(3):Ji(2)),Ks(this);var y=this.g.Z();this.X=y;e:if(rr(this)){var T=Yl(this.g);u="";var k=T.length,j=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nn(this),an(this);var Z="";break e}this.h.i=new g.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(j&&m==k-1)});T.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=y==200,Hl(this.i,this.u,this.A,this.l,this.R,Te,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Mt,Ee=this.g;if((Mt=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ft(Mt)){var Ut=Mt;break e}}Ut=null}if(y=Ut)nr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,on(this,y);else{this.o=!1,this.s=3,le(12),nn(this),an(this);break t}}if(this.P){y=!0;let ke;for(;!this.J&&this.C<Z.length;)if(ke=sr(this,Z),ke==Wr){Te==4&&(this.s=4,le(14),y=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(ke==ir){this.s=4,le(15),nr(this.i,this.l,Z,"[Invalid Chunk]"),y=!1;break}else nr(this.i,this.l,ke,null),on(this,ke);if(rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||Z.length!=0||this.h.h||(this.s=1,le(16),y=!1),this.o=this.o&&y,!y)nr(this.i,this.l,Z,"[Invalid Chunked Response]"),nn(this),an(this);else if(0<Z.length&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.ba&&!Oe.M&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),os(Oe),Oe.M=!0,le(11))}}else nr(this.i,this.l,Z,null),on(this,Z);Te==4&&nn(this),this.o&&!this.J&&(Te==4?Jl(this.j,this):(this.o=!1,Zt(this)))}else fh(this.g),y==400&&0<Z.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),nn(this),an(this)}}}catch{}finally{}};function rr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function sr(u,m){var y=u.C,T=m.indexOf(`
`,y);return T==-1?Wr:(y=Number(m.substring(y,T)),isNaN(y)?ir:(T+=1,T+y>m.length?Wr:(m=m.slice(T,T+y),u.C=T+y,m)))}Kn.prototype.cancel=function(){this.J=!0,nn(this)};function Zt(u){u.S=Date.now()+u.I,lo(u,u.I)}function lo(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=tr(x(u.ba,u),m)}function Ks(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Kn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Qn(this.i,this.A),this.L!=2&&(Ji(),le(17)),nn(this),this.s=2,an(this)):lo(this,this.S-u)};function an(u){u.j.G==0||u.J||Jl(u.j,u)}function nn(u){Ks(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,He(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function on(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||ar(y.h,u))){if(!u.K&&ar(y.h,u)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var k=T;if(k[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)ia(y),ea(y);else break t;Eo(y),le(18)}}else y.za=k[1],0<y.za-y.T&&37500>k[2]&&y.F&&y.v==0&&!y.C&&(y.C=tr(x(y.Za,y),6e3));if(1>=ql(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Si(y,11)}else if((u.K||y.g==u)&&ia(y),!ft(m))for(k=y.Da.g.parse(m),m=0;m<k.length;m++){let Ut=k[m];if(y.T=Ut[0],Ut=Ut[1],y.G==2)if(Ut[0]=="c"){y.K=Ut[1],y.ia=Ut[2];const Oe=Ut[3];Oe!=null&&(y.la=Oe,y.j.info("VER="+y.la));const Te=Ut[4];Te!=null&&(y.Aa=Te,y.j.info("SVER="+y.Aa));const bi=Ut[5];bi!=null&&typeof bi=="number"&&0<bi&&(T=1.5*bi,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const ke=u.g;if(ke){const ti=ke.g?ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var j=T.h;j.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(or(j,j.h),j.h=null))}if(T.D){const Ao=ke.g?ke.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(T.ya=Ao,Lt(T.I,T.D,Ao))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var Z=u;if(T.qa=eu(T,T.J?T.ia:null,T.W),Z.K){yn(T.h,Z);var Mt=Z,Ee=T.L;Ee&&(Mt.I=Ee),Mt.B&&(Ks(Mt),Zt(Mt)),T.g=Z}else Wl(T);0<y.i.length&&na(y)}else Ut[0]!="stop"&&Ut[0]!="close"||Si(y,7);else y.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Si(y,7):_o(y):Ut[0]!="noop"&&y.l&&y.l.ta(Ut),y.v=0)}}Ji(4)}catch{}}var oh=class{constructor(u,m){this.g=u,this.map=m}};function uo(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function co(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ql(u){return u.h?1:u.g?u.g.size:0}function ar(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function or(u,m){u.g?u.g.add(m):u.h=m}function yn(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}uo.prototype.cancel=function(){if(this.i=We(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function We(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return J(u.i)}function Fl(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],y=u.length,T=0;T<y;T++)m.push(u[T]);return m}m=[],y=0;for(T in u)m[y++]=u[T];return m}function lh(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const T in u)m[y++]=T;return m}}}function Zr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=lh(u),T=Fl(u),k=T.length,j=0;j<k;j++)m.call(void 0,T[j],y&&y[j],u)}var ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ys(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var T=u[y].indexOf("="),k=null;if(0<=T){var j=u[y].substring(0,T);k=u[y].substring(T+1)}else j=u[y];m(j,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function _i(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _i){this.h=u.h,lr(this,u.j),this.o=u.o,this.g=u.g,Jr(this,u.s),this.l=u.l;var m=u.i,y=new Yn;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Xs(this,y),this.m=u.m}else u&&(m=String(u).match(ho))?(this.h=!1,lr(this,m[1]||"",!0),this.o=ur(m[2]||""),this.g=ur(m[3]||"",!0),Jr(this,m[4]),this.l=ur(m[5]||"",!0),Xs(this,m[6]||"",!0),this.m=ur(m[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}_i.prototype.toString=function(){var u=[],m=this.j;m&&u.push(_n(m,fo,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(_n(m,fo,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(_n(y,y.charAt(0)=="/"?mo:Gl,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",_n(y,hh)),u.join("")};function re(u){return new _i(u)}function lr(u,m,y){u.j=y?ur(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Jr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xs(u,m,y){m instanceof Yn?(u.i=m,go(u.i,u.h)):(y||(m=_n(m,ch)),u.i=new Yn(m,u.h))}function Lt(u,m,y){u.i.set(m,y)}function ts(u){return Lt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ur(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _n(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,uh),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function uh(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var fo=/[#\/\?@]/g,Gl=/[#\?:]/g,mo=/[#\?]/g,ch=/[#\?@]/g,hh=/#/g;function Yn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ys(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=Yn.prototype,r.add=function(u,m){vn(this),this.i=null,u=Ti(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function $s(u,m){vn(u),m=Ti(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function vi(u,m){return vn(u),m=Ti(u,m),u.g.has(m)}r.forEach=function(u,m){vn(this),this.g.forEach(function(y,T){y.forEach(function(k){u.call(m,k,T,this)},this)},this)},r.na=function(){vn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const k=u[T];for(let j=0;j<k.length;j++)y.push(m[T])}return y},r.V=function(u){vn(this);let m=[];if(typeof u=="string")vi(this,u)&&(m=m.concat(this.g.get(Ti(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},r.set=function(u,m){return vn(this),this.i=null,u=Ti(this,u),vi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ei(u,m,y){$s(u,m),0<y.length&&(u.i=null,u.g.set(Ti(u,m),J(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const j=encodeURIComponent(String(T)),Z=this.V(T);for(T=0;T<Z.length;T++){var k=j;Z[T]!==""&&(k+="="+encodeURIComponent(String(Z[T]))),u.push(k)}}return this.i=u.join("&")};function Ti(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function go(u,m){m&&!u.j&&(vn(u),u.i=null,u.g.forEach(function(y,T){var k=T.toLowerCase();T!=k&&($s(this,T),Ei(this,k,y))},u)),u.j=m}function Ql(u,m){const y=new er;if(g.Image){const T=new Image;T.onload=B(En,y,"TestLoadImage: loaded",!0,m,T),T.onerror=B(En,y,"TestLoadImage: error",!1,m,T),T.onabort=B(En,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=B(En,y,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function es(u,m){const y=new er,T=new AbortController,k=setTimeout(()=>{T.abort(),En(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(j=>{clearTimeout(k),j.ok?En(y,"TestPingServer: ok",!0,m):En(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),En(y,"TestPingServer: error",!1,m)})}function En(u,m,y,T,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),T(y)}catch{}}function ns(){this.g=new $e}function Xn(u,m,y){const T=y||"";try{Zr(u,function(k,j){let Z=k;v(k)&&(Z=ro(k)),m.push(T+j+"="+encodeURIComponent(Z))})}catch(k){throw m.push(T+"type="+encodeURIComponent("_badmap")),k}}function cr(u){this.l=u.Ub||null,this.j=u.eb||!1}Q(cr,so),cr.prototype.g=function(){return new Ai(this.l,this.j)},cr.prototype.i=function(u){return function(){return u}}({});function Ai(u,m){_e.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(Ai,_e),r=Ai.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Wn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$n(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;po(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function po(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$n(this):Wn(this),this.readyState==3&&po(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,$n(this))},r.Qa=function(u){this.g&&(this.response=u,$n(this))},r.ga=function(){this.g&&$n(this)};function $n(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Wn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yo(u){let m="";return Dt(u,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function De(u,m,y){t:{for(T in y){var T=!1;break t}T=!0}T||(y=yo(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Lt(u,m,y))}function qt(u){_e.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(qt,_e);var Ws=/^https?$/i,is=["POST","PUT"];r=qt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$r.g(),this.v=this.o?Ll(this.o):Ll($r),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(j){Kl(this,j);return}if(u=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var k in T)y.set(k,T[k]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const j of T.keys())y.set(j,T.get(j));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(j=>j.toLowerCase()=="content-type"),k=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(is,m,void 0))||T||k||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Z]of y)this.g.setRequestHeader(j,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rs(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){Kl(this,j)}};function Kl(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Zs(u),Zn(u)}function Zs(u){u.A||(u.A=!0,Ie(u,"complete"),Ie(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ie(this,"complete"),Ie(this,"abort"),Zn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zn(this,!0)),qt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Js(this):this.bb())},r.bb=function(){Js(this)};function Js(u){if(u.h&&typeof d<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)xl(u.Ea,0,u);else if(Ie(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const Z=u.Z();t:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var T;if(T=Z===0){var k=String(u.D).match(ho)[1]||null;!k&&g.self&&g.self.location&&(k=g.self.location.protocol.slice(0,-1)),T=!Ws.test(k?k.toLowerCase():"")}y=T}if(y)Ie(u,"complete"),Ie(u,"success");else{u.m=6;try{var j=2<Tn(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Zs(u)}}finally{Zn(u)}}}}function Zn(u,m){if(u.g){rs(u);const y=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ie(u,"ready");try{y.onreadystatechange=T}catch{}}}function rs(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fn(m)}};function Yl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function fh(u){const m={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(ft(u[T]))continue;var y=V(u[T]);const k=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const j=m[k]||[];m[k]=j,j.push(y)}M(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function ta(u){this.Aa=0,this.i=[],this.j=new er,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ss("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ss("baseRetryDelayMs",5e3,u),this.cb=ss("retryDelaySeedMs",1e4,u),this.Wa=ss("forwardChannelMaxRetries",2,u),this.wa=ss("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new uo(u&&u.concurrentRequestLimit),this.Da=new ns,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ta.prototype,r.la=8,r.G=1,r.connect=function(u,m,y,T){le(0),this.W=u,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=eu(this,null,this.W),na(this)};function _o(u){if(Xl(u),u.G==3){var m=u.U++,y=re(u.I);if(Lt(y,"SID",u.K),Lt(y,"RID",m),Lt(y,"TYPE","terminate"),as(u,y),m=new Kn(u,u.j,m),m.L=2,m.v=ts(re(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=nu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Zt(m)}tu(u)}function ea(u){u.g&&(os(u),u.g.cancel(),u.g=null)}function Xl(u){ea(u),u.u&&(g.clearTimeout(u.u),u.u=null),ia(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function na(u){if(!co(u.h)&&!u.s){u.s=!0;var m=u.Ga;dt||D(),lt||(dt(),lt=!0),Ht.add(m,u),u.B=0}}function dh(u,m){return ql(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=tr(x(u.Ga,u,m),To(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new Kn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=w(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(k.H=j,j=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=$l(this,k,m),y=re(this.I),Lt(y,"RID",u),Lt(y,"CVER",22),this.D&&Lt(y,"X-HTTP-Session-Id",this.D),as(this,y),j&&(this.O?m="headers="+encodeURIComponent(String(yo(j)))+"&"+m:this.m&&De(y,this.m,j)),or(this.h,k),this.Ua&&Lt(y,"TYPE","init"),this.P?(Lt(y,"$req",m),Lt(y,"SID","null"),k.T=!0,Un(k,y,null)):Un(k,y,m),this.G=2}}else this.G==3&&(u?vo(this,u):this.i.length==0||co(this.h)||vo(this))};function vo(u,m){var y;m?y=m.l:y=u.U++;const T=re(u.I);Lt(T,"SID",u.K),Lt(T,"RID",y),Lt(T,"AID",u.T),as(u,T),u.m&&u.o&&De(T,u.m,u.o),y=new Kn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=$l(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),or(u.h,y),Un(y,T,m)}function as(u,m){u.H&&Dt(u.H,function(y,T){Lt(m,T,y)}),u.l&&Zr({},function(y,T){Lt(m,T,y)})}function $l(u,m,y){y=Math.min(u.i.length,y);var T=u.l?x(u.l.Na,u.l,u):null;t:{var k=u.i;let j=-1;for(;;){const Z=["count="+y];j==-1?0<y?(j=k[0].g,Z.push("ofs="+j)):j=0:Z.push("ofs="+j);let Mt=!0;for(let Ee=0;Ee<y;Ee++){let Ut=k[Ee].g;const Oe=k[Ee].map;if(Ut-=j,0>Ut)j=Math.max(0,k[Ee].g-100),Mt=!1;else try{Xn(Oe,Z,"req"+Ut+"_")}catch{T&&T(Oe)}}if(Mt){T=Z.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,T}function Wl(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;dt||D(),lt||(dt(),lt=!0),Ht.add(m,u),u.v=0}}function Eo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=tr(x(u.Fa,u),To(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Zl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=tr(x(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),ea(this),Zl(this))};function os(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Zl(u){u.g=new Kn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=re(u.qa);Lt(m,"RID","rpc"),Lt(m,"SID",u.K),Lt(m,"AID",u.T),Lt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Lt(m,"TO",u.ja),Lt(m,"TYPE","xmlhttp"),as(u,m),u.m&&u.o&&De(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=ts(re(m)),y.m=null,y.P=!0,yi(y,u)}r.Za=function(){this.C!=null&&(this.C=null,ea(this),Eo(this),le(19))};function ia(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Jl(u,m){var y=null;if(u.g==m){ia(u),os(u),u.g=null;var T=2}else if(ar(u.h,m))y=m.D,yn(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;T=Fs(),Ie(T,new Bl(T,y)),na(u)}else Wl(u);else if(k=m.s,k==3||k==0&&0<m.X||!(T==1&&dh(u,m)||T==2&&Eo(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),k){case 1:Si(u,5);break;case 4:Si(u,10);break;case 3:Si(u,6);break;default:Si(u,2)}}}function To(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Si(u,m){if(u.j.info("Error code "+m),m==2){var y=x(u.fb,u),T=u.Xa;const k=!T;T=new _i(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||lr(T,"https"),ts(T),k?Ql(T.toString(),y):es(T.toString(),y)}else le(2);u.G=0,u.l&&u.l.sa(m),tu(u),Xl(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function tu(u){if(u.G=0,u.ka=[],u.l){const m=We(u.h);(m.length!=0||u.i.length!=0)&&($(u.ka,m),$(u.ka,u.i),u.h.i.length=0,J(u.i),u.i.length=0),u.l.ra()}}function eu(u,m,y){var T=y instanceof _i?re(y):new _i(y);if(T.g!="")m&&(T.g=m+"."+T.g),Jr(T,T.s);else{var k=g.location;T=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var j=new _i(null);T&&lr(j,T),m&&(j.g=m),k&&Jr(j,k),y&&(j.l=y),T=j}return y=u.D,m=u.ya,y&&m&&Lt(T,y,m),Lt(T,"VER",u.la),as(u,T),T}function nu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new qt(new cr({eb:y})):new qt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}r=iu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ra(){}ra.prototype.g=function(u,m){return new Ze(u,m)};function Ze(u,m){_e.call(this),this.g=new ta(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ft(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ft(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Jn(this)}Q(Ze,_e),Ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ze.prototype.close=function(){_o(this.g)},Ze.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=ro(u),u=y);m.i.push(new oh(m.Ya++,u)),m.G==3&&na(m)},Ze.prototype.N=function(){this.g.l=null,delete this.j,_o(this.g),delete this.g,Ze.aa.N.call(this)};function ru(u){Wi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Q(ru,Wi);function su(){Mn.call(this),this.status=1}Q(su,Mn);function Jn(u){this.g=u}Q(Jn,iu),Jn.prototype.ua=function(){Ie(this.g,"a")},Jn.prototype.ta=function(u){Ie(this.g,new ru(u))},Jn.prototype.sa=function(u){Ie(this.g,new su)},Jn.prototype.ra=function(){Ie(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,Ze.prototype.send=Ze.prototype.o,Ze.prototype.open=Ze.prototype.m,Ze.prototype.close=Ze.prototype.close,CE=function(){return new ra},IE=function(){return Fs()},RE=pn,Vd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,dc=ve,pi.COMPLETE="complete",wE=pi,zl.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",_e.prototype.listen=_e.prototype.K,ul=zl,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,bE=qt}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const M_="@firebase/firestore",U_="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new em("@firebase/firestore");function Na(){return ks.logLevel}function it(r,...t){if(ks.logLevel<=Ot.DEBUG){const n=t.map(gm);ks.debug(`Firestore (${Wa}): ${r}`,...n)}}function Gi(r,...t){if(ks.logLevel<=Ot.ERROR){const n=t.map(gm);ks.error(`Firestore (${Wa}): ${r}`,...n)}}function ja(r,...t){if(ks.logLevel<=Ot.WARN){const n=t.map(gm);ks.warn(`Firestore (${Wa}): ${r}`,...n)}}function gm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r="Unexpected state"){const t=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: `+r;throw Gi(t),new Error(t)}function Ft(r,t){r||mt()}function Tt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends Ki{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class IR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}}class CR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DR{constructor(t){this.t=t,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ft(this.o===void 0);let s=this.i;const l=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let c=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Os,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const p=c;t.enqueueRetryable(async()=>{await p.promise,await l(this.currentUser)})},g=p=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Os)}},0),d()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string"),new DE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string"),new Qe(t)}}class OR{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class NR{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new OR(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VR{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,zn(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){Ft(this.o===void 0);const s=c=>{c.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,it("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{t.enqueueRetryable(()=>s(c))};const l=c=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>l(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?l(c):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new k_(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ft(typeof n.token=="string"),this.R=n.token,new k_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=MR(40);for(let c=0;c<l.length;++c)s.length<20&&l[c]<n&&(s+=t.charAt(l[c]%62))}return s}}function Rt(r,t){return r<t?-1:r>t?1:0}function Md(r,t){let n=0;for(;n<r.length&&n<t.length;){const s=r.codePointAt(n),l=t.codePointAt(n);if(s!==l){if(s<128&&l<128)return Rt(s,l);{const c=OE(),d=UR(c.encode(P_(r,n)),c.encode(P_(t,n)));return d!==0?d:Rt(s,l)}}n+=s>65535?2:1}return Rt(r.length,t.length)}function P_(r,t){return r.codePointAt(t)>65535?r.substring(t,t+2):r.substring(t,t+1)}function UR(r,t){for(let n=0;n<r.length&&n<t.length;++n)if(r[n]!==t[n])return Rt(r[n],t[n]);return Rt(r.length,t.length)}function Ha(r,t,n){return r.length===t.length&&r.every((s,l)=>n(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=-62135596800,L_=1e6;class we{static now(){return we.fromMillis(Date.now())}static fromDate(t){return we.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*L_);return new we(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ut(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ut(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<x_)throw new ut(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ut(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L_}_compareTo(t){return this.seconds===t.seconds?Rt(this.nanoseconds,t.nanoseconds):Rt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-x_;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(t){return new yt(t)}static min(){return new yt(new we(0,0))}static max(){return new yt(new we(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="__name__";class ai{constructor(t,n,s){n===void 0?n=0:n>t.length&&mt(),s===void 0?s=t.length-n:s>t.length-n&&mt(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return ai.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ai?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let l=0;l<s;l++){const c=ai.compareSegments(t.get(l),n.get(l));if(c!==0)return c}return Rt(t.length,n.length)}static compareSegments(t,n){const s=ai.isNumericId(t),l=ai.isNumericId(n);return s&&!l?-1:!s&&l?1:s&&l?ai.extractNumericId(t).compare(ai.extractNumericId(n)):Md(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return zr.fromString(t.substring(4,t.length-2))}}class Wt extends ai{construct(t,n,s){return new Wt(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new ut(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(l=>l.length>0))}return new Wt(n)}static emptyPath(){return new Wt([])}}const kR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends ai{construct(t,n,s){return new Be(t,n,s)}static isValidIdentifier(t){return kR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z_}static keyField(){return new Be([z_])}static fromServerFormat(t){const n=[];let s="",l=0;const c=()=>{if(s.length===0)throw new ut(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new ut(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[l+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ut(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=p,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(c(),l++)}if(c(),d)throw new ut(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(t){this.path=t}static fromPath(t){return new ct(Wt.fromString(t))}static fromName(t){return new ct(Wt.fromString(t).popFirst(5))}static empty(){return new ct(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ct(new Wt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=-1;function PR(r,t){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=yt.fromTimestamp(s===1e9?new we(n+1,0):new we(n,s));return new Hr(l,ct.empty(),t)}function xR(r){return new Hr(r.readTime,r.key,Tl)}class Hr{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Hr(yt.min(),ct.empty(),Tl)}static max(){return new Hr(yt.max(),ct.empty(),Tl)}}function LR(r,t){let n=r.readTime.compareTo(t.readTime);return n!==0?n:(n=ct.comparator(r.documentKey,t.documentKey),n!==0?n:Rt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(r){if(r.code!==Y.FAILED_PRECONDITION||r.message!==zR)throw r;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new G((s,l)=>{this.nextCallback=c=>{this.wrapSuccess(t,c).next(s,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,l)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):G.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):G.reject(n)}static resolve(t){return new G((n,s)=>{n(t)})}static reject(t){return new G((n,s)=>{s(t)})}static waitFor(t){return new G((n,s)=>{let l=0,c=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++c,d&&c===l&&n()},p=>s(p))}),d=!0,c===l&&n()})}static or(t){let n=G.resolve(!1);for(const s of t)n=n.next(l=>l?G.resolve(l):s());return n}static forEach(t,n){const s=[];return t.forEach((l,c)=>{s.push(n.call(this,l,c))}),this.waitFor(s)}static mapArray(t,n){return new G((s,l)=>{const c=t.length,d=new Array(c);let g=0;for(let p=0;p<c;p++){const v=p;n(t[v]).next(A=>{d[v]=A,++g,g===c&&s(d)},A=>l(A))}})}static doWhile(t,n){return new G((s,l)=>{const c=()=>{t()===!0?n().next(()=>{c()},l):s()};c()})}}function jR(r){const t=r.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ja(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.oe(s),this._e=s=>n.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}qc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=-1;function Fc(r){return r==null}function Ic(r){return r===0&&1/r==-1/0}function HR(r){return typeof r=="number"&&Number.isInteger(r)&&!Ic(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="";function qR(r){let t="";for(let n=0;n<r.length;n++)t.length>0&&(t=B_(t)),t=FR(r.get(n),t);return B_(t)}function FR(r,t){let n=t;const s=r.length;for(let l=0;l<s;l++){const c=r.charAt(l);switch(c){case"\0":n+="";break;case VE:n+="";break;default:n+=c}}return n}function B_(r){return r+VE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(r){let t=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t++;return t}function xs(r,t){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&t(n,r[n])}function ME(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,n){this.comparator=t,this.root=n||ze.EMPTY}insert(t,n){return new ne(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(t){return new ne(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ze.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return n+s.left.size;l<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new sc(this.root,t,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new sc(this.root,t,this.comparator,!0)}}class sc{constructor(t,n,s,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!t.isEmpty();)if(c=n?s(t.key,n):1,n&&l&&(c*=-1),c<0)t=this.isReverse?t.left:t.right;else{if(c===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ze{constructor(t,n,s,l,c){this.key=t,this.value=n,this.color=s??ze.RED,this.left=l??ze.EMPTY,this.right=c??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,l,c){return new ze(t??this.key,n??this.value,s??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let l=this;const c=s(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,n,s),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(t,n,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,l=this;if(n(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(t,l.key)===0){if(l.right.isEmpty())return ze.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const t=this.left.check();if(t!==this.right.check())throw mt();return t+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(t,n,s,l,c){return this}insert(t,n,s){return new ze(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.comparator=t,this.data=new ne(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;n(l.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new H_(this.data.getIterator())}getIteratorFrom(t){return new H_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof Re)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Re(this.comparator);return n.data=t,n}}class H_{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.fields=t,t.sort(Be.comparator)}static empty(){return new jn([])}unionWith(t){let n=new Re(Be.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new jn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Ha(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new UE("Invalid base64 string: "+c):c}}(t);return new je(n)}static fromUint8Array(t){const n=function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c}(t);return new je(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let l=0;l<n.length;l++)s[l]=n.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Rt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}je.EMPTY_BYTE_STRING=new je("");const GR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(r){if(Ft(!!r),typeof r=="string"){let t=0;const n=GR.exec(r);if(Ft(!!n),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ce(r.seconds),nanos:ce(r.nanos)}}function ce(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Fr(r){return typeof r=="string"?je.fromBase64String(r):je.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="server_timestamp",PE="__type__",xE="__previous_value__",LE="__local_write_time__";function ym(r){var t,n;return((n=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{})[PE])===null||n===void 0?void 0:n.stringValue)===kE}function Gc(r){const t=r.mapValue.fields[xE];return ym(t)?Gc(t):t}function Al(r){const t=qr(r.mapValue.fields[LE].timestampValue);return new we(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(t,n,s,l,c,d,g,p,v){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=v}}const Cc="(default)";class Sl{constructor(t,n){this.projectId=t,this.database=n||Cc}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===Cc}isEqual(t){return t instanceof Sl&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="__type__",KR="__max__",ac={mapValue:{}},BE="__vector__",Dc="value";function Gr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ym(r)?4:XR(r)?9007199254740991:YR(r)?10:11:mt()}function hi(r,t){if(r===t)return!0;const n=Gr(r);if(n!==Gr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Al(r).isEqual(Al(t));case 3:return function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=qr(l.timestampValue),g=qr(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,c){return Fr(l.bytesValue).isEqual(Fr(c.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,c){return ce(l.geoPointValue.latitude)===ce(c.geoPointValue.latitude)&&ce(l.geoPointValue.longitude)===ce(c.geoPointValue.longitude)}(r,t);case 2:return function(l,c){if("integerValue"in l&&"integerValue"in c)return ce(l.integerValue)===ce(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=ce(l.doubleValue),g=ce(c.doubleValue);return d===g?Ic(d)===Ic(g):isNaN(d)&&isNaN(g)}return!1}(r,t);case 9:return Ha(r.arrayValue.values||[],t.arrayValue.values||[],hi);case 10:case 11:return function(l,c){const d=l.mapValue.fields||{},g=c.mapValue.fields||{};if(j_(d)!==j_(g))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(g[p]===void 0||!hi(d[p],g[p])))return!1;return!0}(r,t);default:return mt()}}function bl(r,t){return(r.values||[]).find(n=>hi(n,t))!==void 0}function qa(r,t){if(r===t)return 0;const n=Gr(r),s=Gr(t);if(n!==s)return Rt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rt(r.booleanValue,t.booleanValue);case 2:return function(c,d){const g=ce(c.integerValue||c.doubleValue),p=ce(d.integerValue||d.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(r,t);case 3:return q_(r.timestampValue,t.timestampValue);case 4:return q_(Al(r),Al(t));case 5:return Md(r.stringValue,t.stringValue);case 6:return function(c,d){const g=Fr(c),p=Fr(d);return g.compareTo(p)}(r.bytesValue,t.bytesValue);case 7:return function(c,d){const g=c.split("/"),p=d.split("/");for(let v=0;v<g.length&&v<p.length;v++){const A=Rt(g[v],p[v]);if(A!==0)return A}return Rt(g.length,p.length)}(r.referenceValue,t.referenceValue);case 8:return function(c,d){const g=Rt(ce(c.latitude),ce(d.latitude));return g!==0?g:Rt(ce(c.longitude),ce(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return F_(r.arrayValue,t.arrayValue);case 10:return function(c,d){var g,p,v,A;const C=c.fields||{},x=d.fields||{},B=(g=C[Dc])===null||g===void 0?void 0:g.arrayValue,Q=(p=x[Dc])===null||p===void 0?void 0:p.arrayValue,J=Rt(((v=B?.values)===null||v===void 0?void 0:v.length)||0,((A=Q?.values)===null||A===void 0?void 0:A.length)||0);return J!==0?J:F_(B,Q)}(r.mapValue,t.mapValue);case 11:return function(c,d){if(c===ac.mapValue&&d===ac.mapValue)return 0;if(c===ac.mapValue)return 1;if(d===ac.mapValue)return-1;const g=c.fields||{},p=Object.keys(g),v=d.fields||{},A=Object.keys(v);p.sort(),A.sort();for(let C=0;C<p.length&&C<A.length;++C){const x=Md(p[C],A[C]);if(x!==0)return x;const B=qa(g[p[C]],v[A[C]]);if(B!==0)return B}return Rt(p.length,A.length)}(r.mapValue,t.mapValue);default:throw mt()}}function q_(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return Rt(r,t);const n=qr(r),s=qr(t),l=Rt(n.seconds,s.seconds);return l!==0?l:Rt(n.nanos,s.nanos)}function F_(r,t){const n=r.values||[],s=t.values||[];for(let l=0;l<n.length&&l<s.length;++l){const c=qa(n[l],s[l]);if(c)return c}return Rt(n.length,s.length)}function Fa(r){return Ud(r)}function Ud(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=qr(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Fr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ct.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",l=!0;for(const c of n.values||[])l?l=!1:s+=",",s+=Ud(c);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of s)c?c=!1:l+=",",l+=`${d}:${Ud(n.fields[d])}`;return l+"}"}(r.mapValue):mt()}function mc(r){switch(Gr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gc(r);return t?16+mc(t):16;case 5:return 2*r.stringValue.length;case 6:return Fr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,c)=>l+mc(c),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return xs(s.fields,(c,d)=>{l+=c.length+mc(d)}),l}(r.mapValue);default:throw mt()}}function kd(r){return!!r&&"integerValue"in r}function _m(r){return!!r&&"arrayValue"in r}function G_(r){return!!r&&"nullValue"in r}function Q_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gc(r){return!!r&&"mapValue"in r}function YR(r){var t,n;return((n=(((t=r?.mapValue)===null||t===void 0?void 0:t.fields)||{})[zE])===null||n===void 0?void 0:n.stringValue)===BE}function gl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return xs(r.mapValue.fields,(n,s)=>t.mapValue.fields[n]=gl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gl(r.arrayValue.values[n]);return t}return Object.assign({},r)}function XR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===KR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.value=t}static empty(){return new Vn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!gc(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=gl(n)}setAll(t){let n=Be.emptyPath(),s={},l=[];t.forEach((d,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,s,l),s={},l=[],n=g.popLast()}d?s[g.lastSegment()]=gl(d):l.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,l)}delete(t){const n=this.field(t.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return hi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=n.mapValue.fields[t.get(s)];gc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=l),n=l}return n.mapValue.fields}applyChanges(t,n,s){xs(n,(l,c)=>t[l]=c);for(const l of s)delete t[l]}clone(){return new Vn(gl(this.value))}}function jE(r){const t=[];return xs(r.fields,(n,s)=>{const l=new Be([n]);if(gc(s)){const c=jE(s.mapValue).fields;if(c.length===0)t.push(l);else for(const d of c)t.push(l.child(d))}else t.push(l)}),new jn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t,n,s,l,c,d,g){this.key=t,this.documentType=n,this.version=s,this.readTime=l,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(t){return new Ke(t,0,yt.min(),yt.min(),yt.min(),Vn.empty(),0)}static newFoundDocument(t,n,s,l){return new Ke(t,1,n,yt.min(),s,l,0)}static newNoDocument(t,n){return new Ke(t,2,n,yt.min(),yt.min(),Vn.empty(),0)}static newUnknownDocument(t,n){return new Ke(t,3,n,yt.min(),yt.min(),Vn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ke&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,n){this.position=t,this.inclusive=n}}function K_(r,t,n){let s=0;for(let l=0;l<r.position.length;l++){const c=t[l],d=r.position[l];if(c.field.isKeyField()?s=ct.comparator(ct.fromName(d.referenceValue),n.key):s=qa(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Y_(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!hi(r.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,n="asc"){this.field=t,this.dir=n}}function $R(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{}class be extends HE{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new ZR(t,n,s):n==="array-contains"?new e1(t,s):n==="in"?new n1(t,s):n==="not-in"?new i1(t,s):n==="array-contains-any"?new r1(t,s):new be(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new JR(t,s):new t1(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qa(n,this.value)):n!==null&&Gr(this.value)===Gr(n)&&this.matchesComparison(qa(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends HE{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new fi(t,n)}matches(t){return qE(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function qE(r){return r.op==="and"}function FE(r){return WR(r)&&qE(r)}function WR(r){for(const t of r.filters)if(t instanceof fi)return!1;return!0}function Pd(r){if(r instanceof be)return r.field.canonicalString()+r.op.toString()+Fa(r.value);if(FE(r))return r.filters.map(t=>Pd(t)).join(",");{const t=r.filters.map(n=>Pd(n)).join(",");return`${r.op}(${t})`}}function GE(r,t){return r instanceof be?function(s,l){return l instanceof be&&s.op===l.op&&s.field.isEqual(l.field)&&hi(s.value,l.value)}(r,t):r instanceof fi?function(s,l){return l instanceof fi&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((c,d,g)=>c&&GE(d,l.filters[g]),!0):!1}(r,t):void mt()}function QE(r){return r instanceof be?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(r):r instanceof fi?function(n){return n.op.toString()+" {"+n.getFilters().map(QE).join(" ,")+"}"}(r):"Filter"}class ZR extends be{constructor(t,n,s){super(t,n,s),this.key=ct.fromName(s.referenceValue)}matches(t){const n=ct.comparator(t.key,this.key);return this.matchesComparison(n)}}class JR extends be{constructor(t,n){super(t,"in",n),this.keys=KE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class t1 extends be{constructor(t,n){super(t,"not-in",n),this.keys=KE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function KE(r,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ct.fromName(s.referenceValue))}class e1 extends be{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return _m(n)&&bl(n.arrayValue,this.value)}}class n1 extends be{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&bl(this.value.arrayValue,n)}}class i1 extends be{constructor(t,n){super(t,"not-in",n)}matches(t){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!bl(this.value.arrayValue,n)}}class r1 extends be{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!_m(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>bl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(t,n=null,s=[],l=[],c=null,d=null,g=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=l,this.limit=c,this.startAt=d,this.endAt=g,this.le=null}}function X_(r,t=null,n=[],s=[],l=null,c=null,d=null){return new s1(r,t,n,s,l,c,d)}function vm(r){const t=Tt(r);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>Pd(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Fc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Fa(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Fa(s)).join(",")),t.le=n}return t.le}function Em(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!$R(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!GE(r.filters[n],t.filters[n]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Y_(r.startAt,t.startAt)&&Y_(r.endAt,t.endAt)}function xd(r){return ct.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,n=null,s=[],l=[],c=null,d="F",g=null,p=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=l,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function a1(r,t,n,s,l,c,d,g){return new Qc(r,t,n,s,l,c,d,g)}function Tm(r){return new Qc(r)}function $_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function o1(r){return r.collectionGroup!==null}function pl(r){const t=Tt(r);if(t.he===null){t.he=[];const n=new Set;for(const c of t.explicitOrderBy)t.he.push(c),n.add(c.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Re(Be.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(t).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||t.he.push(new Nc(c,s))}),n.has(Be.keyField().canonicalString())||t.he.push(new Nc(Be.keyField(),s))}return t.he}function li(r){const t=Tt(r);return t.Pe||(t.Pe=l1(t,pl(r))),t.Pe}function l1(r,t){if(r.limitType==="F")return X_(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const c=l.dir==="desc"?"asc":"desc";return new Nc(l.field,c)});const n=r.endAt?new Oc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Oc(r.startAt.position,r.startAt.inclusive):null;return X_(r.path,r.collectionGroup,t,r.filters,r.limit,n,s)}}function Ld(r,t,n){return new Qc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,n,r.startAt,r.endAt)}function Kc(r,t){return Em(li(r),li(t))&&r.limitType===t.limitType}function YE(r){return`${vm(li(r))}|lt:${r.limitType}`}function Va(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(l=>QE(l)).join(", ")}]`),Fc(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(l=>Fa(l)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(l=>Fa(l)).join(",")),`Target(${s})`}(li(r))}; limitType=${r.limitType})`}function Yc(r,t){return t.isFoundDocument()&&function(s,l){const c=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ct.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(r,t)&&function(s,l){for(const c of pl(s))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const c of s.filters)if(!c.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,g,p){const v=K_(d,g,p);return d.inclusive?v<=0:v<0}(s.startAt,pl(s),l)||s.endAt&&!function(d,g,p){const v=K_(d,g,p);return d.inclusive?v>=0:v>0}(s.endAt,pl(s),l))}(r,t)}function u1(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function XE(r){return(t,n)=>{let s=!1;for(const l of pl(r)){const c=c1(l,t,n);if(c!==0)return c;s=s||l.field.isKeyField()}return 0}}function c1(r,t,n){const s=r.field.isKeyField()?ct.comparator(t.key,n.key):function(c,d,g){const p=d.data.field(c),v=g.data.field(c);return p!==null&&v!==null?qa(p,v):mt()}(r.field,t,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[l,c]of s)if(this.equalsFn(l,t))return c}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],t))return void(l[c]=[t,n]);l.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[n]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){xs(this.inner,(n,s)=>{for(const[l,c]of s)t(l,c)})}isEmpty(){return ME(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=new ne(ct.comparator);function Qi(){return h1}const $E=new ne(ct.comparator);function cl(...r){let t=$E;for(const n of r)t=t.insert(n.key,n);return t}function WE(r){let t=$E;return r.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function Cs(){return yl()}function ZE(){return yl()}function yl(){return new Ls(r=>r.toString(),(r,t)=>r.isEqual(t))}const f1=new ne(ct.comparator),d1=new Re(ct.comparator);function Nt(...r){let t=d1;for(const n of r)t=t.add(n);return t}const m1=new Re(Rt);function g1(){return m1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(t)?"-0":t}}function JE(r){return{integerValue:""+r}}function p1(r,t){return HR(t)?JE(t):Am(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function y1(r,t,n){return r instanceof Vc?function(l,c){const d={fields:{[PE]:{stringValue:kE},[LE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&ym(c)&&(c=Gc(c)),c&&(d.fields[xE]=c),{mapValue:d}}(n,t):r instanceof wl?eT(r,t):r instanceof Rl?nT(r,t):function(l,c){const d=tT(l,c),g=W_(d)+W_(l.Ie);return kd(d)&&kd(l.Ie)?JE(g):Am(l.serializer,g)}(r,t)}function _1(r,t,n){return r instanceof wl?eT(r,t):r instanceof Rl?nT(r,t):n}function tT(r,t){return r instanceof Mc?function(s){return kd(s)||function(c){return!!c&&"doubleValue"in c}(s)}(t)?t:{integerValue:0}:null}class Vc extends Xc{}class wl extends Xc{constructor(t){super(),this.elements=t}}function eT(r,t){const n=iT(t);for(const s of r.elements)n.some(l=>hi(l,s))||n.push(s);return{arrayValue:{values:n}}}class Rl extends Xc{constructor(t){super(),this.elements=t}}function nT(r,t){let n=iT(t);for(const s of r.elements)n=n.filter(l=>!hi(l,s));return{arrayValue:{values:n}}}class Mc extends Xc{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function W_(r){return ce(r.integerValue||r.doubleValue)}function iT(r){return _m(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function v1(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof wl&&l instanceof wl||s instanceof Rl&&l instanceof Rl?Ha(s.elements,l.elements,hi):s instanceof Mc&&l instanceof Mc?hi(s.Ie,l.Ie):s instanceof Vc&&l instanceof Vc}(r.transform,t.transform)}class E1{constructor(t,n){this.version=t,this.transformResults=n}}class qn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qn}static exists(t){return new qn(void 0,t)}static updateTime(t){return new qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function pc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class $c{}function rT(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new Sm(r.key,qn.none()):new Vl(r.key,r.data,qn.none());{const n=r.data,s=Vn.empty();let l=new Re(Be.comparator);for(let c of t.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),l=l.add(c)}return new zs(r.key,s,new jn(l.toArray()),qn.none())}}function T1(r,t,n){r instanceof Vl?function(l,c,d){const g=l.value.clone(),p=J_(l.fieldTransforms,c,d.transformResults);g.setAll(p),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,n):r instanceof zs?function(l,c,d){if(!pc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const g=J_(l.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(sT(l)),p.setAll(g),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,t,n):function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,n)}function _l(r,t,n,s){return r instanceof Vl?function(c,d,g,p){if(!pc(c.precondition,d))return g;const v=c.value.clone(),A=tv(c.fieldTransforms,p,d);return v.setAll(A),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,t,n,s):r instanceof zs?function(c,d,g,p){if(!pc(c.precondition,d))return g;const v=tv(c.fieldTransforms,p,d),A=d.data;return A.setAll(sT(c)),A.setAll(v),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(C=>C.field))}(r,t,n,s):function(c,d,g){return pc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,t,n)}function A1(r,t){let n=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),c=tT(s.transform,l||null);c!=null&&(n===null&&(n=Vn.empty()),n.set(s.field,c))}return n||null}function Z_(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ha(s,l,(c,d)=>v1(c,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Vl extends $c{constructor(t,n,s,l=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class zs extends $c{constructor(t,n,s,l,c=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function sT(r){const t=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);t.set(n,s)}}),t}function J_(r,t,n){const s=new Map;Ft(r.length===n.length);for(let l=0;l<n.length;l++){const c=r[l],d=c.transform,g=t.data.field(c.field);s.set(c.field,_1(d,g,n[l]))}return s}function tv(r,t,n){const s=new Map;for(const l of r){const c=l.transform,d=n.data.field(l.field);s.set(l.field,y1(c,d,t))}return s}class Sm extends $c{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S1 extends $c{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(t,n,s,l){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(t.key)&&T1(c,t,s[l])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=_l(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=_l(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=ZE();return this.mutations.forEach(l=>{const c=t.get(l.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=n.has(l.key)?null:g;const p=rT(d,g);p!==null&&s.set(l.key,p),d.isValidDocument()||d.convertToNoDocument(yt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Nt())}isEqual(t){return this.batchId===t.batchId&&Ha(this.mutations,t.mutations,(n,s)=>Z_(n,s))&&Ha(this.baseMutations,t.baseMutations,(n,s)=>Z_(n,s))}}class bm{constructor(t,n,s,l){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=l}static from(t,n,s){Ft(t.mutations.length===s.length);let l=function(){return f1}();const c=t.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,s[d].version);return new bm(t,n,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe,Pt;function I1(r){switch(r){case Y.OK:return mt();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return mt()}}function aT(r){if(r===void 0)return Gi("GRPC error has no .code"),Y.UNKNOWN;switch(r){case pe.OK:return Y.OK;case pe.CANCELLED:return Y.CANCELLED;case pe.UNKNOWN:return Y.UNKNOWN;case pe.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case pe.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case pe.INTERNAL:return Y.INTERNAL;case pe.UNAVAILABLE:return Y.UNAVAILABLE;case pe.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case pe.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case pe.NOT_FOUND:return Y.NOT_FOUND;case pe.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case pe.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case pe.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case pe.ABORTED:return Y.ABORTED;case pe.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case pe.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case pe.DATA_LOSS:return Y.DATA_LOSS;default:return mt()}}(Pt=pe||(pe={}))[Pt.OK=0]="OK",Pt[Pt.CANCELLED=1]="CANCELLED",Pt[Pt.UNKNOWN=2]="UNKNOWN",Pt[Pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pt[Pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pt[Pt.NOT_FOUND=5]="NOT_FOUND",Pt[Pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pt[Pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pt[Pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pt[Pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pt[Pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pt[Pt.ABORTED=10]="ABORTED",Pt[Pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pt[Pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pt[Pt.INTERNAL=13]="INTERNAL",Pt[Pt.UNAVAILABLE=14]="UNAVAILABLE",Pt[Pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new zr([4294967295,4294967295],0);function ev(r){const t=OE().encode(r),n=new SE;return n.update(t),new Uint8Array(n.digest())}function nv(r){const t=new DataView(r.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),c=t.getUint32(12,!0);return[new zr([n,s],0),new zr([l,c],0)]}class wm{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new hl(`Invalid padding: ${n}`);if(s<0)throw new hl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new hl(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new hl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=zr.fromNumber(this.Ee)}Ae(t,n,s){let l=t.add(n.multiply(zr.fromNumber(s)));return l.compare(C1)===1&&(l=new zr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=ev(t),[s,l]=nv(n);for(let c=0;c<this.hashCount;c++){const d=this.Ae(s,l,c);if(!this.Re(d))return!1}return!0}static create(t,n,s){const l=t%8==0?0:8-t%8,c=new Uint8Array(Math.ceil(t/8)),d=new wm(c,l,n);return s.forEach(g=>d.insert(g)),d}insert(t){if(this.Ee===0)return;const n=ev(t),[s,l]=nv(n);for(let c=0;c<this.hashCount;c++){const d=this.Ae(s,l,c);this.Ve(d)}}Ve(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(t,n,s,l,c){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const l=new Map;return l.set(t,Ml.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Wc(yt.min(),l,new ne(Rt),Qi(),Nt())}}class Ml{constructor(t,n,s,l,c){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new Ml(s,n,Nt(),Nt(),Nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(t,n,s,l){this.me=t,this.removedTargetIds=n,this.key=s,this.fe=l}}class oT{constructor(t,n){this.targetId=t,this.ge=n}}class lT{constructor(t,n,s=je.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=l}}class iv{constructor(){this.pe=0,this.ye=rv(),this.we=je.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=Nt(),n=Nt(),s=Nt();return this.ye.forEach((l,c)=>{switch(c){case 0:t=t.add(l);break;case 2:n=n.add(l);break;case 1:s=s.add(l);break;default:mt()}}),new Ml(this.we,this.Se,t,n,s)}Me(){this.be=!1,this.ye=rv()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,Ft(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class D1{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Qi(),this.$e=oc(),this.Ue=oc(),this.Ke=new ne(Rt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const s=this.He(n);switch(t.state){case 0:this.Je(n)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(n);break;case 3:this.Je(n)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),s.Ce(t.resumeToken));break;default:mt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((s,l)=>{this.Je(l)&&n(l)})}Ze(t){const n=t.targetId,s=t.ge.count,l=this.Xe(n);if(l){const c=l.target;if(xd(c))if(s===0){const d=new ct(c.path);this.ze(n,d,Ke.newNoDocument(d,yt.min()))}else Ft(s===1);else{const d=this.et(n);if(d!==s){const g=this.tt(t),p=g?this.nt(g,t,d):1;if(p!==0){this.Ye(n);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:c=0}=n;let d,g;try{d=Fr(s).toUint8Array()}catch(p){if(p instanceof UE)return ja("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new wm(d,l,c)}catch(p){return ja(p instanceof hl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.Ee===0?null:g}nt(t,n,s){return n.ge.count===s-this.st(t,n.targetId)?0:2}st(t,n){const s=this.ke.getRemoteKeysForTarget(n);let l=0;return s.forEach(c=>{const d=this.ke.it(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;t.mightContain(g)||(this.ze(n,c,null),l++)}),l}ot(t){const n=new Map;this.qe.forEach((c,d)=>{const g=this.Xe(d);if(g){if(c.current&&xd(g.target)){const p=new ct(g.target.path);this._t(p).has(d)||this.ut(d,p)||this.ze(d,p,Ke.newNoDocument(p,t))}c.ve&&(n.set(d,c.Fe()),c.Me())}});let s=Nt();this.Ue.forEach((c,d)=>{let g=!0;d.forEachWhile(p=>{const v=this.Xe(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.Qe.forEach((c,d)=>d.setReadTime(t));const l=new Wc(t,n,this.Ke,this.Qe,s);return this.Qe=Qi(),this.$e=oc(),this.Ue=oc(),this.Ke=new ne(Rt),l}Ge(t,n){if(!this.Je(t))return;const s=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,s),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(t))}ze(t,n,s){if(!this.Je(t))return;const l=this.He(t);this.ut(t,n)?l.xe(n,1):l.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(t)),this.Ue=this.Ue.insert(n,this.ct(n).add(t)),s&&(this.Qe=this.Qe.insert(n,s))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new iv,this.qe.set(t,n)),n}ct(t){let n=this.Ue.get(t);return n||(n=new Re(Rt),this.Ue=this.Ue.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new Re(Rt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||it("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new iv),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function oc(){return new ne(ct.comparator)}function rv(){return new ne(ct.comparator)}const O1={asc:"ASCENDING",desc:"DESCENDING"},N1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V1={and:"AND",or:"OR"};class M1{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function zd(r,t){return r.useProto3Json||Fc(t)?t:{value:t}}function Uc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uT(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function U1(r,t){return Uc(r,t.toTimestamp())}function ui(r){return Ft(!!r),yt.fromTimestamp(function(n){const s=qr(n);return new we(s.seconds,s.nanos)}(r))}function Rm(r,t){return Bd(r,t).canonicalString()}function Bd(r,t){const n=function(l){return new Wt(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?n:n.child(t)}function cT(r){const t=Wt.fromString(r);return Ft(gT(t)),t}function jd(r,t){return Rm(r.databaseId,t.path)}function _d(r,t){const n=cT(t);if(n.get(1)!==r.databaseId.projectId)throw new ut(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ut(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ct(fT(n))}function hT(r,t){return Rm(r.databaseId,t)}function k1(r){const t=cT(r);return t.length===4?Wt.emptyPath():fT(t)}function Hd(r){return new Wt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function fT(r){return Ft(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function sv(r,t,n){return{name:jd(r,t),fields:n.value.mapValue.fields}}function P1(r,t){let n;if("targetChange"in t){t.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:mt()}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],c=function(v,A){return v.useProto3Json?(Ft(A===void 0||typeof A=="string"),je.fromBase64String(A||"")):(Ft(A===void 0||A instanceof Buffer||A instanceof Uint8Array),je.fromUint8Array(A||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(v){const A=v.code===void 0?Y.UNKNOWN:aT(v.code);return new ut(A,v.message||"")}(d);n=new lT(s,l,c,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=_d(r,s.document.name),c=ui(s.document.updateTime),d=s.document.createTime?ui(s.document.createTime):yt.min(),g=new Vn({mapValue:{fields:s.document.fields}}),p=Ke.newFoundDocument(l,c,d,g),v=s.targetIds||[],A=s.removedTargetIds||[];n=new yc(v,A,p.key,p)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=_d(r,s.document),c=s.readTime?ui(s.readTime):yt.min(),d=Ke.newNoDocument(l,c),g=s.removedTargetIds||[];n=new yc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=_d(r,s.document),c=s.removedTargetIds||[];n=new yc([],c,l,null)}else{if(!("filter"in t))return mt();{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:c}=s,d=new R1(l,c),g=s.targetId;n=new oT(g,d)}}return n}function x1(r,t){let n;if(t instanceof Vl)n={update:sv(r,t.key,t.value)};else if(t instanceof Sm)n={delete:jd(r,t.key)};else if(t instanceof zs)n={update:sv(r,t.key,t.data),updateMask:Q1(t.fieldMask)};else{if(!(t instanceof S1))return mt();n={verify:jd(r,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(c,d){const g=d.transform;if(g instanceof Vc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof wl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Rl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Mc)return{fieldPath:d.field.canonicalString(),increment:g.Ie};throw mt()}(0,s))),t.precondition.isNone||(n.currentDocument=function(l,c){return c.updateTime!==void 0?{updateTime:U1(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:mt()}(r,t.precondition)),n}function L1(r,t){return r&&r.length>0?(Ft(t!==void 0),r.map(n=>function(l,c){let d=l.updateTime?ui(l.updateTime):ui(c);return d.isEqual(yt.min())&&(d=ui(c)),new E1(d,l.transformResults||[])}(n,t))):[]}function z1(r,t){return{documents:[hT(r,t.path)]}}function B1(r,t){const n={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=hT(r,l);const c=function(v){if(v.length!==0)return mT(fi.create(v,"and"))}(t.filters);c&&(n.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(A=>function(x){return{field:Ma(x.field),direction:q1(x.dir)}}(A))}(t.orderBy);d&&(n.structuredQuery.orderBy=d);const g=zd(r,t.limit);return g!==null&&(n.structuredQuery.limit=g),t.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(t.endAt)),{ht:n,parent:l}}function j1(r){let t=k1(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let l=null;if(s>0){Ft(s===1);const A=n.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let c=[];n.where&&(c=function(C){const x=dT(C);return x instanceof fi&&FE(x)?x.getFilters():[x]}(n.where));let d=[];n.orderBy&&(d=function(C){return C.map(x=>function(Q){return new Nc(Ua(Q.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction))}(x))}(n.orderBy));let g=null;n.limit&&(g=function(C){let x;return x=typeof C=="object"?C.value:C,Fc(x)?null:x}(n.limit));let p=null;n.startAt&&(p=function(C){const x=!!C.before,B=C.values||[];return new Oc(B,x)}(n.startAt));let v=null;return n.endAt&&(v=function(C){const x=!C.before,B=C.values||[];return new Oc(B,x)}(n.endAt)),a1(t,l,d,c,g,"F",p,v)}function H1(r,t){const n=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function dT(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ua(n.unaryFilter.field);return be.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=Ua(n.unaryFilter.field);return be.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ua(n.unaryFilter.field);return be.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ua(n.unaryFilter.field);return be.create(d,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(r):r.fieldFilter!==void 0?function(n){return be.create(Ua(n.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return fi.create(n.compositeFilter.filters.map(s=>dT(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return mt()}}(n.compositeFilter.op))}(r):mt()}function q1(r){return O1[r]}function F1(r){return N1[r]}function G1(r){return V1[r]}function Ma(r){return{fieldPath:r.canonicalString()}}function Ua(r){return Be.fromServerFormat(r.fieldPath)}function mT(r){return r instanceof be?function(n){if(n.op==="=="){if(Q_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NAN"}};if(G_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NAN"}};if(G_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(n.field),op:F1(n.op),value:n.value}}}(r):r instanceof fi?function(n){const s=n.getFilters().map(l=>mT(l));return s.length===1?s[0]:{compositeFilter:{op:G1(n.op),filters:s}}}(r):mt()}function Q1(r){const t=[];return r.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function gT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t,n,s,l,c=yt.min(),d=yt.min(),g=je.EMPTY_BYTE_STRING,p=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(t){return new kr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t){this.Tt=t}}function Y1(r){const t=j1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ld(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Tn=new $1}addToCollectionParentIndex(t,n){return this.Tn.add(n),G.resolve()}getCollectionParents(t,n){return G.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return G.resolve()}deleteFieldIndex(t,n){return G.resolve()}deleteAllFieldIndexes(t){return G.resolve()}createTargetIndexes(t,n){return G.resolve()}getDocumentsMatchingTarget(t,n){return G.resolve(null)}getIndexType(t,n){return G.resolve(0)}getFieldIndexes(t,n){return G.resolve([])}getNextCollectionGroupToUpdate(t){return G.resolve(null)}getMinOffset(t,n){return G.resolve(Hr.min())}getMinOffsetFromCollectionGroup(t,n){return G.resolve(Hr.min())}updateCollectionGroup(t,n,s){return G.resolve()}updateIndexEntries(t,n){return G.resolve()}}class $1{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n]||new Re(Wt.comparator),c=!l.has(s);return this.index[n]=l.add(s),c}has(t){const n=t.lastSegment(),s=t.popLast(),l=this.index[n];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Re(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pT=41943040;class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(pT,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Un(){return new Ga(0)}static Kn(){return new Ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="LruGarbageCollector",W1=1048576;function lv([r,t],[n,s]){const l=Rt(r,n);return l===0?Rt(t,s):l}class Z1{constructor(t){this.Hn=t,this.buffer=new Re(lv),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();lv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class J1{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){it(ov,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ja(n)?it(ov,"Ignoring IndexedDB error during garbage collection: ",n):await Za(n)}await this.er(3e5)})}}class tI{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(s=>Math.floor(n/100*s))}nthSequenceNumber(t,n){if(n===0)return G.resolve(qc.ae);const s=new Z1(n);return this.tr.forEachTarget(t,l=>s.Zn(l.sequenceNumber)).next(()=>this.tr.rr(t,l=>s.Zn(l))).next(()=>s.maxValue)}removeTargets(t,n,s){return this.tr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(av)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),av):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let s,l,c,d,g,p,v;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(C=>(C>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),l=this.params.maximumSequenceNumbersToCollect):l=C,d=Date.now(),this.nthSequenceNumber(t,l))).next(C=>(s=C,g=Date.now(),this.removeTargets(t,s,n))).next(C=>(c=C,p=Date.now(),this.removeOrphanedDocuments(t,s))).next(C=>(v=Date.now(),Na()<=Ot.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${c} targets in `+(p-g)+`ms
	Removed ${C} documents in `+(v-p)+`ms
Total Duration: ${v-A}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:C})))}}function eI(r,t){return new tI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.changes=new Ls(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ke.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,n,s,l){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,n))).next(l=>(s!==null&&_l(s.mutation,l,jn.empty(),we.now()),l))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Nt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Nt()){const l=Cs();return this.populateOverlays(t,l,n).next(()=>this.computeViews(t,n,l,s).next(c=>{let d=cl();return c.forEach((g,p)=>{d=d.insert(g,p.overlayedDocument)}),d}))}getOverlayedDocuments(t,n){const s=Cs();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Nt()))}populateOverlays(t,n,s){const l=[];return s.forEach(c=>{n.has(c)||l.push(c)}),this.documentOverlayCache.getOverlays(t,l).next(c=>{c.forEach((d,g)=>{n.set(d,g)})})}computeViews(t,n,s,l){let c=Qi();const d=yl(),g=function(){return yl()}();return n.forEach((p,v)=>{const A=s.get(v.key);l.has(v.key)&&(A===void 0||A.mutation instanceof zs)?c=c.insert(v.key,v):A!==void 0?(d.set(v.key,A.mutation.getFieldMask()),_l(A.mutation,v,A.mutation.getFieldMask(),we.now())):d.set(v.key,jn.empty())}),this.recalculateAndSaveOverlays(t,c).next(p=>(p.forEach((v,A)=>d.set(v,A)),n.forEach((v,A)=>{var C;return g.set(v,new iI(A,(C=d.get(v))!==null&&C!==void 0?C:null))}),g))}recalculateAndSaveOverlays(t,n){const s=yl();let l=new ne((d,g)=>d-g),c=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(d=>{for(const g of d)g.keys().forEach(p=>{const v=n.get(p);if(v===null)return;let A=s.get(p)||jn.empty();A=g.applyToLocalView(v,A),s.set(p,A);const C=(l.get(g.batchId)||Nt()).add(p);l=l.insert(g.batchId,C)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),v=p.key,A=p.value,C=ZE();A.forEach(x=>{if(!c.has(x)){const B=rT(n.get(x),s.get(x));B!==null&&C.set(x,B),c=c.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(t,v,C))}return G.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,l){return function(d){return ct.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):o1(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,l):this.getDocumentsMatchingCollectionQuery(t,n,s,l)}getNextDocuments(t,n,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,l).next(c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,l-c.size):G.resolve(Cs());let g=Tl,p=c;return d.next(v=>G.forEach(v,(A,C)=>(g<C.largestBatchId&&(g=C.largestBatchId),c.get(A)?G.resolve():this.remoteDocumentCache.getEntry(t,A).next(x=>{p=p.insert(A,x)}))).next(()=>this.populateOverlays(t,v,c)).next(()=>this.computeViews(t,p,v,Nt())).next(A=>({batchId:g,changes:WE(A)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ct(n)).next(s=>{let l=cl();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,n,s,l){const c=n.collectionGroup;let d=cl();return this.indexManager.getCollectionParents(t,c).next(g=>G.forEach(g,p=>{const v=function(C,x){return new Qc(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(n,p.child(c));return this.getDocumentsMatchingCollectionQuery(t,v,s,l).next(A=>{A.forEach((C,x)=>{d=d.insert(C,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,n,s,l){let c;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,c,l))).next(d=>{c.forEach((p,v)=>{const A=v.getKey();d.get(A)===null&&(d=d.insert(A,Ke.newInvalidDocument(A)))});let g=cl();return d.forEach((p,v)=>{const A=c.get(p);A!==void 0&&_l(A.mutation,v,jn.empty(),we.now()),Yc(n,v)&&(g=g.insert(p,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return G.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(l){return{id:l.id,version:l.version,createTime:ui(l.createTime)}}(n)),G.resolve()}getNamedQuery(t,n){return G.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(l){return{name:l.name,query:Y1(l.bundledQuery),readTime:ui(l.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.overlays=new ne(ct.comparator),this.Rr=new Map}getOverlay(t,n){return G.resolve(this.overlays.get(n))}getOverlays(t,n){const s=Cs();return G.forEach(n,l=>this.getOverlay(t,l).next(c=>{c!==null&&s.set(l,c)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((l,c)=>{this.Et(t,n,c)}),G.resolve()}removeOverlaysForBatchId(t,n,s){const l=this.Rr.get(s);return l!==void 0&&(l.forEach(c=>this.overlays=this.overlays.remove(c)),this.Rr.delete(s)),G.resolve()}getOverlaysForCollection(t,n,s){const l=Cs(),c=n.length+1,d=new ct(n.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const p=g.getNext().value,v=p.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&p.largestBatchId>s&&l.set(p.getKey(),p)}return G.resolve(l)}getOverlaysForCollectionGroup(t,n,s,l){let c=new ne((v,A)=>v-A);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let A=c.get(v.largestBatchId);A===null&&(A=Cs(),c=c.insert(v.largestBatchId,A)),A.set(v.getKey(),v)}}const g=Cs(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,A)=>g.set(v,A)),!(g.size()>=l)););return G.resolve(g)}Et(t,n,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.Rr.get(l.largestBatchId).delete(s.key);this.Rr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new w1(n,s));let c=this.Rr.get(n);c===void 0&&(c=Nt(),this.Rr.set(n,c)),this.Rr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.sessionToken=je.EMPTY_BYTE_STRING}getSessionToken(t){return G.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.Vr=new Re(Ue.mr),this.gr=new Re(Ue.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const s=new Ue(t,n);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.wr(new Ue(t,n))}Sr(t,n){t.forEach(s=>this.removeReference(s,n))}br(t){const n=new ct(new Wt([])),s=new Ue(n,t),l=new Ue(n,t+1),c=[];return this.gr.forEachInRange([s,l],d=>{this.wr(d),c.push(d.key)}),c}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new ct(new Wt([])),s=new Ue(n,t),l=new Ue(n,t+1);let c=Nt();return this.gr.forEachInRange([s,l],d=>{c=c.add(d.key)}),c}containsKey(t){const n=new Ue(t,0),s=this.Vr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class Ue{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return ct.comparator(t.key,n.key)||Rt(t.Cr,n.Cr)}static pr(t,n){return Rt(t.Cr,n.Cr)||ct.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Re(Ue.mr)}checkEmpty(t){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,l){const c=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new b1(c,n,s,l);this.mutationQueue.push(d);for(const g of l)this.Mr=this.Mr.add(new Ue(g.key,c)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return G.resolve(d)}lookupMutationBatch(t,n){return G.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,l=this.Nr(s),c=l<0?0:l;return G.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?pm:this.Fr-1)}getAllMutationBatches(t){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new Ue(n,0),l=new Ue(n,Number.POSITIVE_INFINITY),c=[];return this.Mr.forEachInRange([s,l],d=>{const g=this.Or(d.Cr);c.push(g)}),G.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Re(Rt);return n.forEach(l=>{const c=new Ue(l,0),d=new Ue(l,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([c,d],g=>{s=s.add(g.Cr)})}),G.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,l=s.length+1;let c=s;ct.isDocumentKey(c)||(c=c.child(""));const d=new Ue(new ct(c),0);let g=new Re(Rt);return this.Mr.forEachWhile(p=>{const v=p.key.path;return!!s.isPrefixOf(v)&&(v.length===l&&(g=g.add(p.Cr)),!0)},d),G.resolve(this.Br(g))}Br(t){const n=[];return t.forEach(s=>{const l=this.Or(s);l!==null&&n.push(l)}),n}removeMutationBatch(t,n){Ft(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return G.forEach(n.mutations,l=>{const c=new Ue(l.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,n){const s=new Ue(n,0),l=this.Mr.firstAfterOrEqual(s);return G.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,G.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.kr=t,this.docs=function(){return new ne(ct.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,l=this.docs.get(s),c=l?l.size:0,d=this.kr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(t,n){let s=Qi();return n.forEach(l=>{const c=this.docs.get(l);s=s.insert(l,c?c.document.mutableCopy():Ke.newInvalidDocument(l))}),G.resolve(s)}getDocumentsMatchingQuery(t,n,s,l){let c=Qi();const d=n.path,g=new ct(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:v,value:{document:A}}=p.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||LR(xR(A),s)<=0||(l.has(A.key)||Yc(n,A))&&(c=c.insert(A.key,A.mutableCopy()))}return G.resolve(c)}getAllFromCollectionGroup(t,n,s,l){mt()}qr(t,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new cI(this)}getSize(t){return G.resolve(this.size)}}class cI extends nI{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?n.push(this.Ir.addEntry(t,l)):this.Ir.removeEntry(s)}),G.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(t){this.persistence=t,this.Qr=new Ls(n=>vm(n),Em),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Im,this.targetCount=0,this.Kr=Ga.Un()}forEachTarget(t,n){return this.Qr.forEach((s,l)=>n(l)),G.resolve()}getLastRemoteSnapshotVersion(t){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return G.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.$r&&(this.$r=n),G.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Kr=new Ga(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,G.resolve()}updateTargetData(t,n){return this.zn(n),G.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(t,n,s){let l=0;const c=[];return this.Qr.forEach((d,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.Qr.delete(d),c.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),G.waitFor(c).next(()=>l)}getTargetCount(t){return G.resolve(this.targetCount)}getTargetData(t,n){const s=this.Qr.get(n)||null;return G.resolve(s)}addMatchingKeys(t,n,s){return this.Ur.yr(n,s),G.resolve()}removeMatchingKeys(t,n,s){this.Ur.Sr(n,s);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach(d=>{c.push(l.markPotentiallyOrphaned(t,d))}),G.waitFor(c)}removeMatchingKeysForTargetId(t,n){return this.Ur.br(n),G.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Ur.vr(n);return G.resolve(s)}containsKey(t,n){return G.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new qc(0),this.zr=!1,this.zr=!0,this.jr=new oI,this.referenceDelegate=t(this),this.Hr=new hI(this),this.indexManager=new X1,this.remoteDocumentCache=function(l){return new uI(l)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new K1(n),this.Yr=new sI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new aI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Wr[t.toKey()];return s||(s=new lI(n,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,s){it("MemoryPersistence","Starting transaction:",t);const l=new fI(this.Gr.next());return this.referenceDelegate.Zr(),s(l).next(c=>this.referenceDelegate.Xr(l).next(()=>c)).toPromise().then(c=>(l.raiseOnCommittedEvent(),c))}ei(t,n){return G.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,n)))}}class fI extends BR{constructor(t){super(),this.currentSequenceNumber=t}}class Cm{constructor(t){this.persistence=t,this.ti=new Im,this.ni=null}static ri(t){return new Cm(t)}get ii(){if(this.ni)return this.ni;throw mt()}addReference(t,n,s){return this.ti.addReference(s,n),this.ii.delete(s.toString()),G.resolve()}removeReference(t,n,s){return this.ti.removeReference(s,n),this.ii.add(s.toString()),G.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),G.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(l=>this.ii.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(l=>{l.forEach(c=>this.ii.add(c.toString()))}).next(()=>s.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ii,s=>{const l=ct.fromPath(s);return this.si(t,l).next(c=>{c||n.removeEntry(l,yt.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(s=>{s?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return G.or([()=>G.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class kc{constructor(t,n){this.persistence=t,this.oi=new Ls(s=>qR(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=eI(this,n)}static ri(t,n){return new kc(t,n)}Zr(){}Xr(t){return G.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>n.next(l=>s+l))}sr(t){let n=0;return this.rr(t,s=>{n++}).next(()=>n)}rr(t,n){return G.forEach(this.oi,(s,l)=>this.ar(t,s,l).next(c=>c?G.resolve():n(l)))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.qr(t,d=>this.ar(t,d,n).next(g=>{g||(s++,c.removeEntry(d,yt.min()))})).next(()=>c.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),G.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),G.resolve()}removeReference(t,n,s){return this.oi.set(s,t.currentSequenceNumber),G.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),G.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=mc(t.data.value)),n}ar(t,n,s){return G.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const l=this.oi.get(n);return G.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(t,n,s,l){this.targetId=t,this.fromCache=n,this.Hi=s,this.Ji=l}static Yi(t,n){let s=Nt(),l=Nt();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Dm(t,n.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return oS()?8:jR(Ye())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,s,l){const c={result:null};return this.rs(t,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.ss(t,n,l,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new dI;return this._s(t,n,d).next(g=>{if(c.result=g,this.Xi)return this.us(t,n,d,g.size)})}).next(()=>c.result)}us(t,n,s,l){return s.documentReadCount<this.es?(Na()<=Ot.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",Va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),G.resolve()):(Na()<=Ot.DEBUG&&it("QueryEngine","Query:",Va(n),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.ts*l?(Na()<=Ot.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",Va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,li(n))):G.resolve())}rs(t,n){if($_(n))return G.resolve(null);let s=li(n);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(n.limit!==null&&l===1&&(n=Ld(n,null,"F"),s=li(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(c=>{const d=Nt(...c);return this.ns.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,s).next(p=>{const v=this.cs(n,g);return this.ls(n,v,d,p.readTime)?this.rs(t,Ld(n,null,"F")):this.hs(t,v,n,p)}))})))}ss(t,n,s,l){return $_(n)||l.isEqual(yt.min())?G.resolve(null):this.ns.getDocuments(t,s).next(c=>{const d=this.cs(n,c);return this.ls(n,d,s,l)?G.resolve(null):(Na()<=Ot.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Va(n)),this.hs(t,d,n,PR(l,Tl)).next(g=>g))})}cs(t,n){let s=new Re(XE(t));return n.forEach((l,c)=>{Yc(t,c)&&(s=s.add(c))}),s}ls(t,n,s,l){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const c=t.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}_s(t,n,s){return Na()<=Ot.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",Va(n)),this.ns.getDocumentsMatchingQuery(t,n,Hr.min(),s)}hs(t,n,s,l){return this.ns.getDocumentsMatchingQuery(t,s,l).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="LocalStore",gI=3e8;class pI{constructor(t,n,s,l){this.persistence=t,this.Ps=n,this.serializer=l,this.Ts=new ne(Rt),this.Is=new Ls(c=>vm(c),Em),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function yI(r,t,n,s){return new pI(r,t,n,s)}async function _T(r,t){const n=Tt(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let l;return n.mutationQueue.getAllMutationBatches(s).next(c=>(l=c,n.As(t),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],g=[];let p=Nt();for(const v of l){d.push(v.batchId);for(const A of v.mutations)p=p.add(A.key)}for(const v of c){g.push(v.batchId);for(const A of v.mutations)p=p.add(A.key)}return n.localDocuments.getDocuments(s,p).next(v=>({Rs:v,removedBatchIds:d,addedBatchIds:g}))})})}function _I(r,t){const n=Tt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),c=n.ds.newChangeBuffer({trackRemovals:!0});return function(g,p,v,A){const C=v.batch,x=C.keys();let B=G.resolve();return x.forEach(Q=>{B=B.next(()=>A.getEntry(p,Q)).next(J=>{const $=v.docVersions.get(Q);Ft($!==null),J.version.compareTo($)<0&&(C.applyToRemoteDocument(J,v),J.isValidDocument()&&(J.setReadTime(v.commitVersion),A.addEntry(J)))})}),B.next(()=>g.mutationQueue.removeMutationBatch(p,C))}(n,s,t,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let p=Nt();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(p=p.add(g.batch.mutations[v].key));return p}(t))).next(()=>n.localDocuments.getDocuments(s,l))})}function vT(r){const t=Tt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function vI(r,t){const n=Tt(r),s=t.snapshotVersion;let l=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.ds.newChangeBuffer({trackRemovals:!0});l=n.Ts;const g=[];t.targetChanges.forEach((A,C)=>{const x=l.get(C);if(!x)return;g.push(n.Hr.removeMatchingKeys(c,A.removedDocuments,C).next(()=>n.Hr.addMatchingKeys(c,A.addedDocuments,C)));let B=x.withSequenceNumber(c.currentSequenceNumber);t.targetMismatches.get(C)!==null?B=B.withResumeToken(je.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):A.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(A.resumeToken,s)),l=l.insert(C,B),function(J,$,pt){return J.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=gI?!0:pt.addedDocuments.size+pt.modifiedDocuments.size+pt.removedDocuments.size>0}(x,B,A)&&g.push(n.Hr.updateTargetData(c,B))});let p=Qi(),v=Nt();if(t.documentUpdates.forEach(A=>{t.resolvedLimboDocuments.has(A)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,A))}),g.push(EI(c,d,t.documentUpdates).next(A=>{p=A.Vs,v=A.fs})),!s.isEqual(yt.min())){const A=n.Hr.getLastRemoteSnapshotVersion(c).next(C=>n.Hr.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(A)}return G.waitFor(g).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,p,v)).next(()=>p)}).then(c=>(n.Ts=l,c))}function EI(r,t,n){let s=Nt(),l=Nt();return n.forEach(c=>s=s.add(c)),t.getEntries(r,s).next(c=>{let d=Qi();return n.forEach((g,p)=>{const v=c.get(g);p.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(g)),p.isNoDocument()&&p.version.isEqual(yt.min())?(t.removeEntry(g,p.readTime),d=d.insert(g,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(t.addEntry(p),d=d.insert(g,p)):it(Om,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",p.version)}),{Vs:d,fs:l}})}function TI(r,t){const n=Tt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=pm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function AI(r,t){const n=Tt(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return n.Hr.getTargetData(s,t).next(c=>c?(l=c,G.resolve(l)):n.Hr.allocateTargetId(s).next(d=>(l=new kr(t,d,"TargetPurposeListen",s.currentSequenceNumber),n.Hr.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=n.Ts.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(s.targetId,s),n.Is.set(t,s.targetId)),s})}async function qd(r,t,n){const s=Tt(r),l=s.Ts.get(t),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!Ja(d))throw d;it(Om,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ts=s.Ts.remove(t),s.Is.delete(l.target)}function uv(r,t,n){const s=Tt(r);let l=yt.min(),c=Nt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,v,A){const C=Tt(p),x=C.Is.get(A);return x!==void 0?G.resolve(C.Ts.get(x)):C.Hr.getTargetData(v,A)}(s,d,li(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(d,g.targetId).next(p=>{c=p})}).next(()=>s.Ps.getDocumentsMatchingQuery(d,t,n?l:yt.min(),n?c:Nt())).next(g=>(SI(s,u1(t),g),{documents:g,gs:c})))}function SI(r,t,n){let s=r.Es.get(t)||yt.min();n.forEach((l,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),r.Es.set(t,s)}class cv{constructor(){this.activeTargetIds=g1()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class bI{constructor(){this.ho=new cv,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,s){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new cv,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="ConnectivityMonitor";class fv{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){it(hv,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){it(hv,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function Fd(){return lc===null?lc=function(){return 268435456+Math.round(2147483648*Math.random())}():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="RestConnection",RI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class II{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${s}/databases/${l}`,this.wo=this.databaseId.database===Cc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}So(t,n,s,l,c){const d=Fd(),g=this.bo(t,n.toUriEncodedString());it(vd,`Sending RPC '${t}' ${d}:`,g,s);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,l,c),this.vo(t,g,p,s).then(v=>(it(vd,`Received RPC '${t}' ${d}: `,v),v),v=>{throw ja(vd,`RPC '${t}' ${d} failed with error: `,v,"url: ",g,"request:",s),v})}Co(t,n,s,l,c,d){return this.So(t,n,s,l,c)}Do(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,c)=>t[c]=l),s&&s.headers.forEach((l,c)=>t[c]=l)}bo(t,n){const s=RI[t];return`${this.po}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Uo(t){this.ko(t)}Ko(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class DI extends II{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,s,l){const c=Fd();return new Promise((d,g)=>{const p=new bE;p.setWithCredentials(!0),p.listenOnce(wE.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case dc.NO_ERROR:const A=p.getResponseJson();it(Ge,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(A)),d(A);break;case dc.TIMEOUT:it(Ge,`RPC '${t}' ${c} timed out`),g(new ut(Y.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const C=p.getStatus();if(it(Ge,`RPC '${t}' ${c} failed with status:`,C,"response text:",p.getResponseText()),C>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const B=x?.error;if(B&&B.status&&B.message){const Q=function($){const pt=$.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(pt)>=0?pt:Y.UNKNOWN}(B.status);g(new ut(Q,B.message))}else g(new ut(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ut(Y.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{it(Ge,`RPC '${t}' ${c} completed.`)}});const v=JSON.stringify(l);it(Ge,`RPC '${t}' ${c} sending request:`,l),p.send(n,"POST",v,s,15)})}Wo(t,n,s){const l=Fd(),c=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=CE(),g=IE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const A=c.join("");it(Ge,`Creating RPC '${t}' stream ${l}: ${A}`,p);const C=d.createWebChannel(A,p);let x=!1,B=!1;const Q=new CI({Fo:$=>{B?it(Ge,`Not sending because RPC '${t}' stream ${l} is closed:`,$):(x||(it(Ge,`Opening RPC '${t}' stream ${l} transport.`),C.open(),x=!0),it(Ge,`RPC '${t}' stream ${l} sending:`,$),C.send($))},Mo:()=>C.close()}),J=($,pt,ft)=>{$.listen(pt,_t=>{try{ft(_t)}catch(jt){setTimeout(()=>{throw jt},0)}})};return J(C,ul.EventType.OPEN,()=>{B||(it(Ge,`RPC '${t}' stream ${l} transport opened.`),Q.Qo())}),J(C,ul.EventType.CLOSE,()=>{B||(B=!0,it(Ge,`RPC '${t}' stream ${l} transport closed`),Q.Uo())}),J(C,ul.EventType.ERROR,$=>{B||(B=!0,ja(Ge,`RPC '${t}' stream ${l} transport errored:`,$),Q.Uo(new ut(Y.UNAVAILABLE,"The operation could not be completed")))}),J(C,ul.EventType.MESSAGE,$=>{var pt;if(!B){const ft=$.data[0];Ft(!!ft);const _t=ft,jt=_t?.error||((pt=_t[0])===null||pt===void 0?void 0:pt.error);if(jt){it(Ge,`RPC '${t}' stream ${l} received error:`,jt);const vt=jt.status;let Dt=function(S){const I=pe[S];if(I!==void 0)return aT(I)}(vt),M=jt.message;Dt===void 0&&(Dt=Y.INTERNAL,M="Unknown error status: "+vt+" with message "+jt.message),B=!0,Q.Uo(new ut(Dt,M)),C.close()}else it(Ge,`RPC '${t}' stream ${l} received:`,ft),Q.Ko(ft)}}),J(g,RE.STAT_EVENT,$=>{$.stat===Vd.PROXY?it(Ge,`RPC '${t}' stream ${l} detected buffering proxy`):$.stat===Vd.NOPROXY&&it(Ge,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{Q.$o()},0),Q}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(r){return new M1(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n,s=1e3,l=1.5,c=6e4){this.Ti=t,this.timerId=n,this.Go=s,this.zo=l,this.jo=c,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),l=Math.max(0,n-s);l>0&&it("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,l,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="PersistentStream";class TT{constructor(t,n,s,l,c,d,g,p){this.Ti=t,this.n_=s,this.r_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ET(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.i_===n&&this.V_(s,l)},s=>{t(()=>{const l=new ut(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(l)})})}V_(t,n){const s=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(l=>{s(()=>this.m_(l))}),this.stream.onMessage(l=>{s(()=>++this.__==1?this.g_(l):this.onNext(l))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return it(dv,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(it(dv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OI extends TT{constructor(t,n,s,l,c,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=P1(this.serializer,t),s=function(c){if(!("targetChange"in c))return yt.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?yt.min():d.readTime?ui(d.readTime):yt.min()}(t);return this.listener.p_(n,s)}y_(t){const n={};n.database=Hd(this.serializer),n.addTarget=function(c,d){let g;const p=d.target;if(g=xd(p)?{documents:z1(c,p)}:{query:B1(c,p).ht},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=uT(c,d.resumeToken);const v=zd(c,d.expectedCount);v!==null&&(g.expectedCount=v)}else if(d.snapshotVersion.compareTo(yt.min())>0){g.readTime=Uc(c,d.snapshotVersion.toTimestamp());const v=zd(c,d.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,t);const s=H1(this.serializer,t);s&&(n.labels=s),this.I_(n)}w_(t){const n={};n.database=Hd(this.serializer),n.removeTarget=t,this.I_(n)}}class NI extends TT{constructor(t,n,s,l,c,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,l,d),this.serializer=c}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,n){return this.connection.Wo("Write",t,n)}g_(t){return Ft(!!t.streamToken),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){Ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const n=L1(t.writeResults,t.commitTime),s=ui(t.commitTime);return this.listener.v_(s,n)}C_(){const t={};t.database=Hd(this.serializer),this.I_(t)}b_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>x1(this.serializer,s))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{}class MI extends VI{constructor(t,n,s,l){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=l,this.F_=!1}M_(){if(this.F_)throw new ut(Y.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,s,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.So(t,Bd(n,s),l,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ut(Y.UNKNOWN,c.toString())})}Co(t,n,s,l,c){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Co(t,Bd(n,s),l,d,g,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ut(Y.UNKNOWN,d.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class UI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Gi(n),this.N_=!1):it("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class kI{constructor(t,n,s,l,c){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=c,this.z_.To(d=>{s.enqueueAndForget(async()=>{Bs(this)&&(it(Ps,"Restarting streams for network reachability change."),await async function(p){const v=Tt(p);v.W_.add(4),await Ul(v),v.j_.set("Unknown"),v.W_.delete(4),await Jc(v)}(this))})}),this.j_=new UI(s,l)}}async function Jc(r){if(Bs(r))for(const t of r.G_)await t(!0)}async function Ul(r){for(const t of r.G_)await t(!1)}function AT(r,t){const n=Tt(r);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Um(n)?Mm(n):to(n).c_()&&Vm(n,t))}function Nm(r,t){const n=Tt(r),s=to(n);n.K_.delete(t),s.c_()&&ST(n,t),n.K_.size===0&&(s.c_()?s.P_():Bs(n)&&n.j_.set("Unknown"))}function Vm(r,t){if(r.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(yt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}to(r).y_(t)}function ST(r,t){r.H_.Ne(t),to(r).w_(t)}function Mm(r){r.H_=new D1({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>r.K_.get(t)||null,it:()=>r.datastore.serializer.databaseId}),to(r).start(),r.j_.B_()}function Um(r){return Bs(r)&&!to(r).u_()&&r.K_.size>0}function Bs(r){return Tt(r).W_.size===0}function bT(r){r.H_=void 0}async function PI(r){r.j_.set("Online")}async function xI(r){r.K_.forEach((t,n)=>{Vm(r,t)})}async function LI(r,t){bT(r),Um(r)?(r.j_.q_(t),Mm(r)):r.j_.set("Unknown")}async function zI(r,t,n){if(r.j_.set("Online"),t instanceof lT&&t.state===2&&t.cause)try{await async function(l,c){const d=c.cause;for(const g of c.targetIds)l.K_.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.K_.delete(g),l.H_.removeTarget(g))}(r,t)}catch(s){it(Ps,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Pc(r,s)}else if(t instanceof yc?r.H_.We(t):t instanceof oT?r.H_.Ze(t):r.H_.je(t),!n.isEqual(yt.min()))try{const s=await vT(r.localStore);n.compareTo(s)>=0&&await function(c,d){const g=c.H_.ot(d);return g.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const A=c.K_.get(v);A&&c.K_.set(v,A.withResumeToken(p.resumeToken,d))}}),g.targetMismatches.forEach((p,v)=>{const A=c.K_.get(p);if(!A)return;c.K_.set(p,A.withResumeToken(je.EMPTY_BYTE_STRING,A.snapshotVersion)),ST(c,p);const C=new kr(A.target,p,v,A.sequenceNumber);Vm(c,C)}),c.remoteSyncer.applyRemoteEvent(g)}(r,n)}catch(s){it(Ps,"Failed to raise snapshot:",s),await Pc(r,s)}}async function Pc(r,t,n){if(!Ja(t))throw t;r.W_.add(1),await Ul(r),r.j_.set("Offline"),n||(n=()=>vT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{it(Ps,"Retrying IndexedDB access"),await n(),r.W_.delete(1),await Jc(r)})}function wT(r,t){return t().catch(n=>Pc(r,n,t))}async function th(r){const t=Tt(r),n=Qr(t);let s=t.U_.length>0?t.U_[t.U_.length-1].batchId:pm;for(;BI(t);)try{const l=await TI(t.localStore,s);if(l===null){t.U_.length===0&&n.P_();break}s=l.batchId,jI(t,l)}catch(l){await Pc(t,l)}RT(t)&&IT(t)}function BI(r){return Bs(r)&&r.U_.length<10}function jI(r,t){r.U_.push(t);const n=Qr(r);n.c_()&&n.S_&&n.b_(t.mutations)}function RT(r){return Bs(r)&&!Qr(r).u_()&&r.U_.length>0}function IT(r){Qr(r).start()}async function HI(r){Qr(r).C_()}async function qI(r){const t=Qr(r);for(const n of r.U_)t.b_(n.mutations)}async function FI(r,t,n){const s=r.U_.shift(),l=bm.from(s,t,n);await wT(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await th(r)}async function GI(r,t){t&&Qr(r).S_&&await async function(s,l){if(function(d){return I1(d)&&d!==Y.ABORTED}(l.code)){const c=s.U_.shift();Qr(s).h_(),await wT(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,l)),await th(s)}}(r,t),RT(r)&&IT(r)}async function mv(r,t){const n=Tt(r);n.asyncQueue.verifyOperationInProgress(),it(Ps,"RemoteStore received new credentials");const s=Bs(n);n.W_.add(3),await Ul(n),s&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Jc(n)}async function QI(r,t){const n=Tt(r);t?(n.W_.delete(2),await Jc(n)):t||(n.W_.add(2),await Ul(n),n.j_.set("Unknown"))}function to(r){return r.J_||(r.J_=function(n,s,l){const c=Tt(n);return c.M_(),new OI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{xo:PI.bind(null,r),No:xI.bind(null,r),Lo:LI.bind(null,r),p_:zI.bind(null,r)}),r.G_.push(async t=>{t?(r.J_.h_(),Um(r)?Mm(r):r.j_.set("Unknown")):(await r.J_.stop(),bT(r))})),r.J_}function Qr(r){return r.Y_||(r.Y_=function(n,s,l){const c=Tt(n);return c.M_(),new NI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)}(r.datastore,r.asyncQueue,{xo:()=>Promise.resolve(),No:HI.bind(null,r),Lo:GI.bind(null,r),D_:qI.bind(null,r),v_:FI.bind(null,r)}),r.G_.push(async t=>{t?(r.Y_.h_(),await th(r)):(await r.Y_.stop(),r.U_.length>0&&(it(Ps,`Stopping write stream with ${r.U_.length} pending writes`),r.U_=[]))})),r.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n,s,l,c){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=l,this.removalCallback=c,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,l,c){const d=Date.now()+s,g=new km(t,n,d,l,c);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(r,t){if(Gi("AsyncQueue",`${t}: ${r}`),Ja(r))return new ut(Y.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{static emptySet(t){return new La(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||ct.comparator(n.key,s.key):(n,s)=>ct.comparator(n.key,s.key),this.keyedMap=cl(),this.sortedSet=new ne(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof La)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=s.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new La;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.Z_=new ne(ct.comparator)}track(t){const n=t.doc.key,s=this.Z_.get(n);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(n):t.type===1&&s.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):mt():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,s)=>{t.push(s)}),t}}class Qa{constructor(t,n,s,l,c,d,g,p,v){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(t,n,s,l,c){const d=[];return n.forEach(g=>{d.push({type:0,doc:g})}),new Qa(t,n,La.emptySet(n),d,s,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==s[l].type||!n[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class YI{constructor(){this.queries=pv(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,s){const l=Tt(n),c=l.queries;l.queries=pv(),c.forEach((d,g)=>{for(const p of g.ta)p.onError(s)})})(this,new ut(Y.ABORTED,"Firestore shutting down"))}}function pv(){return new Ls(r=>YE(r),Kc)}async function XI(r,t){const n=Tt(r);let s=3;const l=t.query;let c=n.queries.get(l);c?!c.na()&&t.ra()&&(s=2):(c=new KI,s=t.ra()?0:1);try{switch(s){case 0:c.ea=await n.onListen(l,!0);break;case 1:c.ea=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const g=Pm(d,`Initialization of query '${Va(t.query)}' failed`);return void t.onError(g)}n.queries.set(l,c),c.ta.push(t),t.sa(n.onlineState),c.ea&&t.oa(c.ea)&&xm(n)}async function $I(r,t){const n=Tt(r),s=t.query;let l=3;const c=n.queries.get(s);if(c){const d=c.ta.indexOf(t);d>=0&&(c.ta.splice(d,1),c.ta.length===0?l=t.ra()?0:1:!c.na()&&t.ra()&&(l=2))}switch(l){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function WI(r,t){const n=Tt(r);let s=!1;for(const l of t){const c=l.query,d=n.queries.get(c);if(d){for(const g of d.ta)g.oa(l)&&(s=!0);d.ea=l}}s&&xm(n)}function ZI(r,t,n){const s=Tt(r),l=s.queries.get(t);if(l)for(const c of l.ta)c.onError(n);s.queries.delete(t)}function xm(r){r.ia.forEach(t=>{t.next()})}var Gd,yv;(yv=Gd||(Gd={}))._a="default",yv.Cache="cache";class JI{constructor(t,n,s){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Qa(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const s=n!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=Qa.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Gd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(t){this.key=t}}class DT{constructor(t){this.key=t}}class tC{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Nt(),this.mutatedKeys=Nt(),this.ya=XE(t),this.wa=new La(this.ya)}get Sa(){return this.fa}ba(t,n){const s=n?n.Da:new gv,l=n?n.wa:this.wa;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,g=!1;const p=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((A,C)=>{const x=l.get(A),B=Yc(this.query,C)?C:null,Q=!!x&&this.mutatedKeys.has(x.key),J=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let $=!1;x&&B?x.data.isEqual(B.data)?Q!==J&&(s.track({type:3,doc:B}),$=!0):this.va(x,B)||(s.track({type:2,doc:B}),$=!0,(p&&this.ya(B,p)>0||v&&this.ya(B,v)<0)&&(g=!0)):!x&&B?(s.track({type:0,doc:B}),$=!0):x&&!B&&(s.track({type:1,doc:x}),$=!0,(p||v)&&(g=!0)),$&&(B?(d=d.add(B),c=J?c.add(A):c.delete(A)):(d=d.delete(A),c=c.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),c=c.delete(A.key),s.track({type:1,doc:A})}return{wa:d,Da:s,ls:g,mutatedKeys:c}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,l){const c=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const d=t.Da.X_();d.sort((A,C)=>function(B,Q){const J=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return J(B)-J(Q)}(A.type,C.type)||this.ya(A.doc,C.doc)),this.Ca(s),l=l!=null&&l;const g=n&&!l?this.Fa():[],p=this.pa.size===0&&this.current&&!l?1:0,v=p!==this.ga;return this.ga=p,d.length!==0||v?{snapshot:new Qa(this.query,t.wa,c,d,t.mutatedKeys,p===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:g}:{Ma:g}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new gv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=Nt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const n=[];return t.forEach(s=>{this.pa.has(s)||n.push(new DT(s))}),this.pa.forEach(s=>{t.has(s)||n.push(new CT(s))}),n}Oa(t){this.fa=t.gs,this.pa=Nt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return Qa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Lm="SyncEngine";class eC{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class nC{constructor(t){this.key=t,this.Ba=!1}}class iC{constructor(t,n,s,l,c,d){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.La={},this.ka=new Ls(g=>YE(g),Kc),this.qa=new Map,this.Qa=new Set,this.$a=new ne(ct.comparator),this.Ua=new Map,this.Ka=new Im,this.Wa={},this.Ga=new Map,this.za=Ga.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function rC(r,t,n=!0){const s=kT(r);let l;const c=s.ka.get(t);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.Na()):l=await OT(s,t,n,!0),l}async function sC(r,t){const n=kT(r);await OT(n,t,!0,!1)}async function OT(r,t,n,s){const l=await AI(r.localStore,li(t)),c=l.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await aC(r,t,c,d==="current",l.resumeToken)),r.isPrimaryClient&&n&&AT(r.remoteStore,l),g}async function aC(r,t,n,s,l){r.Ha=(C,x,B)=>async function(J,$,pt,ft){let _t=$.view.ba(pt);_t.ls&&(_t=await uv(J.localStore,$.query,!1).then(({documents:M})=>$.view.ba(M,_t)));const jt=ft&&ft.targetChanges.get($.targetId),vt=ft&&ft.targetMismatches.get($.targetId)!=null,Dt=$.view.applyChanges(_t,J.isPrimaryClient,jt,vt);return vv(J,$.targetId,Dt.Ma),Dt.snapshot}(r,C,x,B);const c=await uv(r.localStore,t,!0),d=new tC(t,c.gs),g=d.ba(c.documents),p=Ml.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",l),v=d.applyChanges(g,r.isPrimaryClient,p);vv(r,n,v.Ma);const A=new eC(t,n,d);return r.ka.set(t,A),r.qa.has(n)?r.qa.get(n).push(t):r.qa.set(n,[t]),v.snapshot}async function oC(r,t,n){const s=Tt(r),l=s.ka.get(t),c=s.qa.get(l.targetId);if(c.length>1)return s.qa.set(l.targetId,c.filter(d=>!Kc(d,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await qd(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),n&&Nm(s.remoteStore,l.targetId),Qd(s,l.targetId)}).catch(Za)):(Qd(s,l.targetId),await qd(s.localStore,l.targetId,!0))}async function lC(r,t){const n=Tt(r),s=n.ka.get(t),l=n.qa.get(s.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Nm(n.remoteStore,s.targetId))}async function uC(r,t,n){const s=pC(r);try{const l=await function(d,g){const p=Tt(d),v=we.now(),A=g.reduce((B,Q)=>B.add(Q.key),Nt());let C,x;return p.persistence.runTransaction("Locally write mutations","readwrite",B=>{let Q=Qi(),J=Nt();return p.ds.getEntries(B,A).next($=>{Q=$,Q.forEach((pt,ft)=>{ft.isValidDocument()||(J=J.add(pt))})}).next(()=>p.localDocuments.getOverlayedDocuments(B,Q)).next($=>{C=$;const pt=[];for(const ft of g){const _t=A1(ft,C.get(ft.key).overlayedDocument);_t!=null&&pt.push(new zs(ft.key,_t,jE(_t.value.mapValue),qn.exists(!0)))}return p.mutationQueue.addMutationBatch(B,v,pt,g)}).next($=>{x=$;const pt=$.applyToLocalDocumentSet(C,J);return p.documentOverlayCache.saveOverlays(B,$.batchId,pt)})}).then(()=>({batchId:x.batchId,changes:WE(C)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,p){let v=d.Wa[d.currentUser.toKey()];v||(v=new ne(Rt)),v=v.insert(g,p),d.Wa[d.currentUser.toKey()]=v}(s,l.batchId,n),await kl(s,l.changes),await th(s.remoteStore)}catch(l){const c=Pm(l,"Failed to persist write");n.reject(c)}}async function NT(r,t){const n=Tt(r);try{const s=await vI(n.localStore,t);t.targetChanges.forEach((l,c)=>{const d=n.Ua.get(c);d&&(Ft(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?d.Ba=!0:l.modifiedDocuments.size>0?Ft(d.Ba):l.removedDocuments.size>0&&(Ft(d.Ba),d.Ba=!1))}),await kl(n,s,t)}catch(s){await Za(s)}}function _v(r,t,n){const s=Tt(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const l=[];s.ka.forEach((c,d)=>{const g=d.view.sa(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const p=Tt(d);p.onlineState=g;let v=!1;p.queries.forEach((A,C)=>{for(const x of C.ta)x.sa(g)&&(v=!0)}),v&&xm(p)}(s.eventManager,t),l.length&&s.La.p_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function cC(r,t,n){const s=Tt(r);s.sharedClientState.updateQueryState(t,"rejected",n);const l=s.Ua.get(t),c=l&&l.key;if(c){let d=new ne(ct.comparator);d=d.insert(c,Ke.newNoDocument(c,yt.min()));const g=Nt().add(c),p=new Wc(yt.min(),new Map,new ne(Rt),d,g);await NT(s,p),s.$a=s.$a.remove(c),s.Ua.delete(t),zm(s)}else await qd(s.localStore,t,!1).then(()=>Qd(s,t,n)).catch(Za)}async function hC(r,t){const n=Tt(r),s=t.batch.batchId;try{const l=await _I(n.localStore,t);MT(n,s,null),VT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await kl(n,l)}catch(l){await Za(l)}}async function fC(r,t,n){const s=Tt(r);try{const l=await function(d,g){const p=Tt(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let A;return p.mutationQueue.lookupMutationBatch(v,g).next(C=>(Ft(C!==null),A=C.keys(),p.mutationQueue.removeMutationBatch(v,C))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,A,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,A)).next(()=>p.localDocuments.getDocuments(v,A))})}(s.localStore,t);MT(s,t,n),VT(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await kl(s,l)}catch(l){await Za(l)}}function VT(r,t){(r.Ga.get(t)||[]).forEach(n=>{n.resolve()}),r.Ga.delete(t)}function MT(r,t,n){const s=Tt(r);let l=s.Wa[s.currentUser.toKey()];if(l){const c=l.get(t);c&&(n?c.reject(n):c.resolve(),l=l.remove(t)),s.Wa[s.currentUser.toKey()]=l}}function Qd(r,t,n=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.qa.get(t))r.ka.delete(s),n&&r.La.Ja(s,n);r.qa.delete(t),r.isPrimaryClient&&r.Ka.br(t).forEach(s=>{r.Ka.containsKey(s)||UT(r,s)})}function UT(r,t){r.Qa.delete(t.path.canonicalString());const n=r.$a.get(t);n!==null&&(Nm(r.remoteStore,n),r.$a=r.$a.remove(t),r.Ua.delete(n),zm(r))}function vv(r,t,n){for(const s of n)s instanceof CT?(r.Ka.addReference(s.key,t),dC(r,s)):s instanceof DT?(it(Lm,"Document no longer in limbo: "+s.key),r.Ka.removeReference(s.key,t),r.Ka.containsKey(s.key)||UT(r,s.key)):mt()}function dC(r,t){const n=t.key,s=n.path.canonicalString();r.$a.get(n)||r.Qa.has(s)||(it(Lm,"New document in limbo: "+n),r.Qa.add(s),zm(r))}function zm(r){for(;r.Qa.size>0&&r.$a.size<r.maxConcurrentLimboResolutions;){const t=r.Qa.values().next().value;r.Qa.delete(t);const n=new ct(Wt.fromString(t)),s=r.za.next();r.Ua.set(s,new nC(n)),r.$a=r.$a.insert(n,s),AT(r.remoteStore,new kr(li(Tm(n.path)),s,"TargetPurposeLimboResolution",qc.ae))}}async function kl(r,t,n){const s=Tt(r),l=[],c=[],d=[];s.ka.isEmpty()||(s.ka.forEach((g,p)=>{d.push(s.Ha(p,t,n).then(v=>{var A;if((v||n)&&s.isPrimaryClient){const C=v?!v.fromCache:(A=n?.targetChanges.get(p.targetId))===null||A===void 0?void 0:A.current;s.sharedClientState.updateQueryState(p.targetId,C?"current":"not-current")}if(v){l.push(v);const C=Dm.Yi(p.targetId,v);c.push(C)}}))}),await Promise.all(d),s.La.p_(l),await async function(p,v){const A=Tt(p);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",C=>G.forEach(v,x=>G.forEach(x.Hi,B=>A.persistence.referenceDelegate.addReference(C,x.targetId,B)).next(()=>G.forEach(x.Ji,B=>A.persistence.referenceDelegate.removeReference(C,x.targetId,B)))))}catch(C){if(!Ja(C))throw C;it(Om,"Failed to update sequence numbers: "+C)}for(const C of v){const x=C.targetId;if(!C.fromCache){const B=A.Ts.get(x),Q=B.snapshotVersion,J=B.withLastLimboFreeSnapshotVersion(Q);A.Ts=A.Ts.insert(x,J)}}}(s.localStore,c))}async function mC(r,t){const n=Tt(r);if(!n.currentUser.isEqual(t)){it(Lm,"User change. New user:",t.toKey());const s=await _T(n.localStore,t);n.currentUser=t,function(c,d){c.Ga.forEach(g=>{g.forEach(p=>{p.reject(new ut(Y.CANCELLED,d))})}),c.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await kl(n,s.Rs)}}function gC(r,t){const n=Tt(r),s=n.Ua.get(t);if(s&&s.Ba)return Nt().add(s.key);{let l=Nt();const c=n.qa.get(t);if(!c)return l;for(const d of c){const g=n.ka.get(d);l=l.unionWith(g.view.Sa)}return l}}function kT(r){const t=Tt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=cC.bind(null,t),t.La.p_=WI.bind(null,t.eventManager),t.La.Ja=ZI.bind(null,t.eventManager),t}function pC(r){const t=Tt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fC.bind(null,t),t}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Zc(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return yI(this.persistence,new mI,t.initialUser,this.serializer)}Xa(t){return new yT(Cm.ri,this.serializer)}Za(t){return new bI}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class yC extends xc{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){Ft(this.persistence.referenceDelegate instanceof kc);const s=this.persistence.referenceDelegate.garbageCollector;return new J1(s,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new yT(s=>kc.ri(s,n),this.serializer)}}class Kd{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_v(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=mC.bind(null,this.syncEngine),await QI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new YI}()}createDatastore(t){const n=Zc(t.databaseInfo.databaseId),s=function(c){return new DI(c)}(t.databaseInfo);return function(c,d,g,p){return new MI(c,d,g,p)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,l,c,d,g){return new kI(s,l,c,d,g)}(this.localStore,this.datastore,t.asyncQueue,n=>_v(this.syncEngine,n,0),function(){return fv.D()?new fv:new wI}())}createSyncEngine(t,n){return function(l,c,d,g,p,v,A){const C=new iC(l,c,d,g,p,v);return A&&(C.ja=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(l){const c=Tt(l);it(Ps,"RemoteStore shutting down."),c.W_.add(5),await Ul(c),c.z_.shutdown(),c.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kd.provider={build:()=>new Kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Gi("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class vC{constructor(t,n,s,l,c){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=l,this.user=Qe.UNAUTHENTICATED,this.clientId=NE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{it(Kr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(it(Kr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Pm(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Td(r,t){r.asyncQueue.verifyOperationInProgress(),it(Kr,"Initializing OfflineComponentProvider");const n=r.configuration;await t.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await _T(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function Ev(r,t){r.asyncQueue.verifyOperationInProgress();const n=await EC(r);it(Kr,"Initializing OnlineComponentProvider"),await t.initialize(n,r.configuration),r.setCredentialChangeListener(s=>mv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>mv(t.remoteStore,l)),r._onlineComponents=t}async function EC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){it(Kr,"Using user provided OfflineComponentProvider");try{await Td(r,r._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(l){return l.name==="FirebaseError"?l.code===Y.FAILED_PRECONDITION||l.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await Td(r,new xc)}}else it(Kr,"Using default OfflineComponentProvider"),await Td(r,new yC(void 0));return r._offlineComponents}async function PT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(it(Kr,"Using user provided OnlineComponentProvider"),await Ev(r,r._uninitializedComponentsProvider._online)):(it(Kr,"Using default OnlineComponentProvider"),await Ev(r,new Kd))),r._onlineComponents}function TC(r){return PT(r).then(t=>t.syncEngine)}async function Tv(r){const t=await PT(r),n=t.eventManager;return n.onListen=rC.bind(null,t.syncEngine),n.onUnlisten=oC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=sC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=lC.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(r,t,n){if(!n)throw new ut(Y.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function AC(r,t,n,s){if(t===!0&&s===!0)throw new ut(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Sv(r){if(!ct.isDocumentKey(r))throw new ut(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function bv(r){if(ct.isDocumentKey(r))throw new ut(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Bm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":mt()}function Br(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new ut(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bm(r);throw new ut(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firestore.googleapis.com",wv=!0;class Rv{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new ut(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=wv}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:wv;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pT;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<W1)throw new ut(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}AC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xT((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ut(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ut(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ut(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class eh{constructor(t,n,s,l){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ut(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new IR;switch(s.type){case"firstParty":return new NR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ut(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Av.get(n);s&&(it("ComponentProvider","Removing Datastore"),Av.delete(n),s.terminate())}(this),Promise.resolve()}}function SC(r,t,n,s={}){var l;const c=(r=Br(r,eh))._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:r._getEmulatorOptions()}),g=`${t}:${n}`;c.host!==zT&&c.host!==g&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:g,ssl:!1,emulatorOptions:s});if(!Vs(p,d)&&(r._setSettings(p),s.mockUserToken)){let v,A;if(typeof s.mockUserToken=="string")v=s.mockUserToken,A=Qe.MOCK_USER;else{v=tS(s.mockUserToken,(l=r._app)===null||l===void 0?void 0:l.options.projectId);const C=s.mockUserToken.sub||s.mockUserToken.user_id;if(!C)throw new ut(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Qe(C)}r._authCredentials=new CR(new DE(v,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new nh(this.firestore,t,this._query)}}class dn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new dn(this.firestore,t,this._key)}}class jr extends nh{constructor(t,n,s){super(t,n,Tm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new dn(this.firestore,null,new ct(t))}withConverter(t){return new jr(this.firestore,t,this._path)}}function BT(r,t,...n){if(r=mn(r),LT("collection","path",t),r instanceof eh){const s=Wt.fromString(t,...n);return bv(s),new jr(r,null,s)}{if(!(r instanceof dn||r instanceof jr))throw new ut(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Wt.fromString(t,...n));return bv(s),new jr(r.firestore,null,s)}}function jm(r,t,...n){if(r=mn(r),arguments.length===1&&(t=NE.newId()),LT("doc","path",t),r instanceof eh){const s=Wt.fromString(t,...n);return Sv(s),new dn(r,null,new ct(s))}{if(!(r instanceof dn||r instanceof jr))throw new ut(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Wt.fromString(t,...n));return Sv(s),new dn(r.firestore,r instanceof jr?r.converter:null,new ct(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="AsyncQueue";class Cv{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ET(this,"async_queue_retry"),this.Su=()=>{const s=Ed();s&&it(Iv,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.bu=t;const n=Ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Os;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Ja(t))throw t;it(Iv,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const l=function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),g}(s);throw Gi("INTERNAL UNHANDLED ERROR: ",l),s}).then(s=>(this.pu=!1,s))));return this.bu=n,n}enqueueAfterDelay(t,n,s){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const l=km.createAndSchedule(this,t,n,s,c=>this.Fu(c));return this.fu.push(l),l}Du(){this.gu&&mt()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}function Dv(r){return function(n,s){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of s)if(c in l&&typeof l[c]=="function")return!0;return!1}(r,["next","error","complete"])}class Ka extends eh{constructor(t,n,s,l){super(t,n,s,l),this.type="firestore",this._queue=new Cv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Cv(t),this._firestoreClient=void 0,await t}}}function bC(r,t){const n=typeof r=="object"?r:Fv(),s=typeof r=="string"?r:Cc,l=im(n,"firestore").getImmediate({identifier:s});if(!l._initialized){const c=ZA("firestore");c&&SC(l,...c)}return l}function jT(r){if(r._terminated)throw new ut(Y.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||wC(r),r._firestoreClient}function wC(r){var t,n,s;const l=r._freezeSettings(),c=function(g,p,v,A){return new QR(g,p,v,A.host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,xT(A.experimentalLongPollingOptions),A.useFetchStreams)}(r._databaseId,((t=r._app)===null||t===void 0?void 0:t.options.appId)||"",r._persistenceKey,l);r._componentsProvider||!((n=l.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=l.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:l.localCache._offlineComponentProvider,_online:l.localCache._onlineComponentProvider}),r._firestoreClient=new vC(r._authCredentials,r._appCheckCredentials,r._queue,c,r._componentsProvider&&function(g){const p=g?._online.build();return{_offline:g?._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ya(je.fromBase64String(t))}catch(n){throw new ut(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ya(je.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ut(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ut(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ut(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Rt(this._lat,t._lat)||Rt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==l[c])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=/^__.*__$/;class IC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new zs(t,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(t,this.data,n,this.fieldTransforms)}}function qT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class Gm{constructor(t,n,s,l,c,d){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=l,c===void 0&&this.Bu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Gm(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.ku({path:s,Qu:!1});return l.$u(t),l}Uu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),l=this.ku({path:s,Qu:!1});return l.Bu(),l}Ku(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Lc(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(qT(this.Lu)&&RC.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class CC{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Zc(t)}ju(t,n,s,l=!1){return new Gm({Lu:t,methodName:n,zu:s,path:Be.emptyPath(),Qu:!1,Gu:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FT(r){const t=r._freezeSettings(),n=Zc(r._databaseId);return new CC(r._databaseId,!!t.ignoreUndefinedProperties,n)}function GT(r,t,n,s,l,c={}){const d=r.ju(c.merge||c.mergeFields?2:0,t,n,l);XT("Data must be an object, but it was:",d,s);const g=KT(s,d);let p,v;if(c.merge)p=new jn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const A=[];for(const C of c.mergeFields){const x=DC(t,C,n);if(!d.contains(x))throw new ut(Y.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);NC(A,x)||A.push(x)}p=new jn(A),v=d.fieldTransforms.filter(C=>p.covers(C.field))}else p=null,v=d.fieldTransforms;return new IC(new Vn(g),p,v)}function QT(r,t){if(YT(r=mn(r)))return XT("Unsupported field value:",t,r),KT(r,t);if(r instanceof HT)return function(s,l){if(!qT(l.Lu))throw l.Wu(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Wu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(l);c&&l.fieldTransforms.push(c)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,l){const c=[];let d=0;for(const g of s){let p=QT(g,l.Ku(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}}(r,t)}return function(s,l){if((s=mn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return p1(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=we.fromDate(s);return{timestampValue:Uc(l.serializer,c)}}if(s instanceof we){const c=new we(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uc(l.serializer,c)}}if(s instanceof qm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ya)return{bytesValue:uT(l.serializer,s._byteString)};if(s instanceof dn){const c=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw l.Wu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Rm(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof Fm)return function(d,g){return{mapValue:{fields:{[zE]:{stringValue:BE},[Dc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw g.Wu("VectorValues must only contain numeric values.");return Am(g.serializer,v)})}}}}}}(s,l);throw l.Wu(`Unsupported field value: ${Bm(s)}`)}(r,t)}function KT(r,t){const n={};return ME(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xs(r,(s,l)=>{const c=QT(l,t.qu(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function YT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof we||r instanceof qm||r instanceof Ya||r instanceof dn||r instanceof HT||r instanceof Fm)}function XT(r,t,n){if(!YT(n)||!function(l){return typeof l=="object"&&l!==null&&(Object.getPrototypeOf(l)===Object.prototype||Object.getPrototypeOf(l)===null)}(n)){const s=Bm(n);throw s==="an object"?t.Wu(r+" a custom object"):t.Wu(r+" "+s)}}function DC(r,t,n){if((t=mn(t))instanceof Hm)return t._internalPath;if(typeof t=="string")return $T(r,t);throw Lc("Field path arguments must be of type string or ",r,!1,void 0,n)}const OC=new RegExp("[~\\*/\\[\\]]");function $T(r,t,n){if(t.search(OC)>=0)throw Lc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Hm(...t.split("."))._internalPath}catch{throw Lc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Lc(r,t,n,s,l){const c=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${s}`),d&&(p+=` in document ${l}`),p+=")"),new ut(Y.INVALID_ARGUMENT,g+r+p)}function NC(r,t){return r.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t,n,s,l,c){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new VC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ZT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VC extends WT{data(){return super.data()}}function ZT(r,t){return typeof t=="string"?$T(r,t):t instanceof Hm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ut(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UC{convertValue(t,n="none"){switch(Gr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw mt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return xs(t,(l,c)=>{s[l]=this.convertValue(c,n)}),s}convertVectorValue(t){var n,s,l;const c=(l=(s=(n=t.fields)===null||n===void 0?void 0:n[Dc].arrayValue)===null||s===void 0?void 0:s.values)===null||l===void 0?void 0:l.map(d=>ce(d.doubleValue));return new Fm(c)}convertGeoPoint(t){return new qm(ce(t.latitude),ce(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Gc(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Al(t));default:return null}}convertTimestamp(t){const n=qr(t);return new we(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Wt.fromString(t);Ft(gT(s));const l=new Sl(s.get(1),s.get(3)),c=new ct(s.popFirst(5));return l.isEqual(n)||Gi(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r,t,n){let s;return s=r?r.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class t0 extends WT{constructor(t,n,s,l,c,d){super(t,n,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=c}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new _c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(ZT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class _c extends t0{data(t={}){return super.data(t)}}class kC{constructor(t,n,s,l){this._firestore=t,this._userDataWriter=n,this._snapshot=l,this.metadata=new fl(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new _c(this._firestore,this._userDataWriter,s.key,s,new fl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ut(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const p=new _c(l._firestore,l._userDataWriter,g.doc.key,g.doc,new fl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const p=new _c(l._firestore,l._userDataWriter,g.doc.key,g.doc,new fl(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let v=-1,A=-1;return g.type!==0&&(v=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:PC(g.type),doc:p,oldIndex:v,newIndex:A}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}class e0 extends UC{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ya(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function xC(r,t,n){r=Br(r,dn);const s=Br(r.firestore,Ka),l=JT(r.converter,t);return Qm(s,[GT(FT(s),"setDoc",r._key,l,r.converter!==null,n).toMutation(r._key,qn.none())])}function LC(r){return Qm(Br(r.firestore,Ka),[new Sm(r._key,qn.none())])}function zC(r,t){const n=Br(r.firestore,Ka),s=jm(r),l=JT(r.converter,t);return Qm(n,[GT(FT(r.firestore),"addDoc",s._key,l,r.converter!==null,{}).toMutation(s._key,qn.exists(!1))]).then(()=>s)}function BC(r,...t){var n,s,l;r=mn(r);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof t[d]!="object"||Dv(t[d])||(c=t[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Dv(t[d])){const C=t[d];t[d]=(n=C.next)===null||n===void 0?void 0:n.bind(C),t[d+1]=(s=C.error)===null||s===void 0?void 0:s.bind(C),t[d+2]=(l=C.complete)===null||l===void 0?void 0:l.bind(C)}let p,v,A;if(r instanceof dn)v=Br(r.firestore,Ka),A=Tm(r._key.path),p={next:C=>{t[d]&&t[d](jC(v,r,C))},error:t[d+1],complete:t[d+2]};else{const C=Br(r,nh);v=Br(C.firestore,Ka),A=C._query;const x=new e0(v);p={next:B=>{t[d]&&t[d](new kC(v,x,C,B))},error:t[d+1],complete:t[d+2]},MC(r._query)}return function(x,B,Q,J){const $=new _C(J),pt=new JI(B,$,Q);return x.asyncQueue.enqueueAndForget(async()=>XI(await Tv(x),pt)),()=>{$.su(),x.asyncQueue.enqueueAndForget(async()=>$I(await Tv(x),pt))}}(jT(v),A,g,p)}function Qm(r,t){return function(s,l){const c=new Os;return s.asyncQueue.enqueueAndForget(async()=>uC(await TC(s),l,c)),c.promise}(jT(r),t)}function jC(r,t,n){const s=n.docs.get(t._key),l=new e0(r);return new t0(r,l,t._key,s,new fl(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(l){Wa=l})(Xa),za(new Ms("firestore",(s,{instanceIdentifier:l,options:c})=>{const d=s.getProvider("app").getImmediate(),g=new Ka(new DR(s.getProvider("auth-internal")),new VR(d,s.getProvider("app-check-internal")),function(v,A){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ut(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(v.options.projectId,A)}(d,l),d);return c=Object.assign({useFetchStreams:n},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Lr(M_,U_,t),Lr(M_,U_,"esm2017")})();const HC={apiKey:"AIzaSyCSRvJn_B__2T0CL0-3RRGRz7f1bXTCSLI",authDomain:"learningstories-a4558.firebaseapp.com",projectId:"learningstories-a4558",storageBucket:"learningstories-a4558.firebasestorage.app",messagingSenderId:"695422300730",appId:"1:695422300730:web:ca6f358101f7481b067b03",measurementId:"G-D0WJBYXWYV"},qC=qv(HC),Km=SR(),ih=bC(qC),FC=async()=>{const r=new Bi;try{const t=await Vw(Km,r);return console.log("User logged in successfully "+t.user.email),t.user}catch(t){return console.error("Something went wrong while logging in "+t),t}},GC=async()=>{try{await fw(Km),console.log("User logged out successfully")}catch(r){console.error("Something went wrong while logging out "+r)}},QC=()=>Km.currentUser,KC=({signIn:r,signOut:t,user:n})=>W.jsxs(W.Fragment,{children:[n&&W.jsxs(W.Fragment,{children:[W.jsxs("p",{children:["Logged in as: ",n.email]}),W.jsxs("p",{children:["Also known as: ",n.displayName]}),W.jsx("img",{src:n.photoURL,alt:"Profile capturedImage"})]}),W.jsx("button",{onClick:r,children:"Sign in"}),W.jsx("button",{onClick:t,children:"Sign out"})]}),YC=()=>{const[r,t]=ee.useState(null),n=async()=>{await FC(),t(QC())},s=async()=>{await GC(),t(null)};return W.jsx(KC,{signIn:n,signOut:s,user:r})},XC=({addCustomer:r,customers:t,removeCustomer:n,updateCustomer:s})=>{const[l,c]=ee.useState(null),[d,g]=ee.useState(null),[p,v]=ee.useState(null),[A,C]=ee.useState(null),x=()=>{if(!l||!d)return;const B={name:l,email:d};if(console.log(A),console.log(B),p){const Q={...B,key:A.key};s(Q)}else r(B)};return W.jsxs(W.Fragment,{children:[W.jsx("div",{children:W.jsxs("form",{children:[W.jsx("h2",{children:p?"Update Customer":"Add Customer"}),W.jsx("input",{type:"text",className:"name",onChange:B=>c(B.target.value)}),W.jsx("input",{type:"text",className:"email",onChange:B=>g(B.target.value)}),W.jsx("button",{onClick:x,type:"submit",children:p?"Update":"Add"})]})}),W.jsxs("div",{children:[W.jsx("h2",{children:"Customers"}),W.jsx("div",{children:t.map(B=>W.jsxs("div",{className:"customer-name",children:[W.jsxs("p",{children:["Name: ",B.name]}),W.jsxs("p",{children:["Email: ",B.email]}),W.jsx("button",{onClick:()=>n(B),type:"submit",children:"Remove"}),W.jsx("button",{onClick:()=>{v(!0),C(B)},type:"submit",children:"Edit"})]},B.key))})]})]})},Yd=(r,t)=>t.some(n=>r instanceof n);let Ov,Nv;function $C(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Xd=new WeakMap,Ad=new WeakMap,rh=new WeakMap;function ZC(r){const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Ns(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",c),r.addEventListener("error",d)});return rh.set(t,r),t}function JC(r){if(Xd.has(r))return;const t=new Promise((n,s)=>{const l=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Xd.set(r,t)}let $d={get(r,t,n){if(r instanceof IDBTransaction){if(t==="done")return Xd.get(r);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(r[t])},set(r,t,n){return r[t]=n,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function n0(r){$d=r($d)}function tD(r){return WC().includes(r)?function(...t){return r.apply(Wd(this),t),Ns(this.request)}:function(...t){return Ns(r.apply(Wd(this),t))}}function eD(r){return typeof r=="function"?tD(r):(r instanceof IDBTransaction&&JC(r),Yd(r,$C())?new Proxy(r,$d):r)}function Ns(r){if(r instanceof IDBRequest)return ZC(r);if(Ad.has(r))return Ad.get(r);const t=eD(r);return t!==r&&(Ad.set(r,t),rh.set(t,r)),t}const Wd=r=>rh.get(r);function nD(r,t,{blocked:n,upgrade:s,blocking:l,terminated:c}={}){const d=indexedDB.open(r,t),g=Ns(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Ns(d.result),p.oldVersion,p.newVersion,Ns(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const iD=["get","getKey","getAll","getAllKeys","count"],rD=["put","add","delete","clear"],Sd=new Map;function Vv(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Sd.get(t))return Sd.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,l=rD.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||iD.includes(n)))return;const c=async function(d,...g){const p=this.transaction(d,l?"readwrite":"readonly");let v=p.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),l&&p.done]))[0]};return Sd.set(t,c),c}n0(r=>({...r,get:(t,n,s)=>Vv(t,n)||r.get(t,n,s),has:(t,n)=>!!Vv(t,n)||r.has(t,n)}));const sD=["continue","continuePrimaryKey","advance"],Mv={},Zd=new WeakMap,i0=new WeakMap,aD={get(r,t){if(!sD.includes(t))return r[t];let n=Mv[t];return n||(n=Mv[t]=function(...s){Zd.set(this,i0.get(this)[t](...s))}),n}};async function*oD(...r){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...r)),!t)return;t=t;const n=new Proxy(t,aD);for(i0.set(n,t),rh.set(n,Wd(t));t;)yield n,t=await(Zd.get(n)||t.continue()),Zd.delete(n)}function Uv(r,t){return t===Symbol.asyncIterator&&Yd(r,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Yd(r,[IDBIndex,IDBObjectStore])}n0(r=>({...r,get(t,n,s){return Uv(t,n)?oD:r.get(t,n,s)},has(t,n){return Uv(t,n)||r.has(t,n)}}));const lD="indexeddb-learning-story",uD=1,cD="customers";class hD{constructor(){this.db=null,this.dbName=lD,this.version=uD,this.storeName=cD}async migrateToVersion1(){console.log("migrate from version 0 to version 1"),this.db.objectStoreNames.contains(this.storeName)||(this.db.createObjectStore(this.storeName,{keyPath:"key",autoIncrement:!0}),console.log(`${this.storeName} store created`))}async upgradeDB(t,n,s,l){console.log(`upgrade from ${n} to ${s} needed`),this.db=t,n<1&&await this.migrateToVersion1(),await l.done}async initDB(){this.db=await nD(this.dbName,this.version,{upgrade:(t,n,s,l)=>this.upgradeDB(t,n,s,l)}),console.log(`${this.dbName} initDB`)}async addCustomer(t){return await this.db.add(this.storeName,t)}async getCustomers(){return await this.db.getAll(this.storeName)}async removeCustomer(t){return await this.db.delete(this.storeName,t)}async updateCustomer(t){return await this.db.put(this.storeName,t)}}class fD extends hD{constructor(){super()}async generateIDForCustomer(t){return{key:Date.now(),...t}}async addCustomer(t){return await super.addCustomer(await this.generateIDForCustomer(t))}async getCustomers(){return super.getCustomers()}async removeCustomer(t){return console.log(t),await super.removeCustomer(t)}async updateCustomer(t){return await super.updateCustomer(t)}}const dl=new fD;await dl.initDB();const dD=()=>{const[r,t]=ee.useState({}),[n,s]=ee.useState([]);ee.useEffect(()=>{l()},[]);const l=async()=>{const p=await dl.getCustomers();s(p)},c=async p=>{const v=await dl.addCustomer(p);t(v)},d=async p=>{console.log(p),await dl.removeCustomer(p.key),l()},g=async p=>{await dl.updateCustomer(p),l()};return W.jsx(XC,{addCustomer:c,customers:n,removeCustomer:d,updateCustomer:g})},mD=({startCamera:r,captureHandler:t,stopCamera:n,selectCamera:s,webcams:l,videoRef:c,capturedImage:d})=>W.jsx(W.Fragment,{children:W.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[W.jsxs("div",{children:[W.jsx("h2",{children:"Webcam-Feature"}),W.jsx("button",{onClick:r,children:"Start camera"}),W.jsx("button",{onClick:t,children:"Capture Image"}),W.jsx("button",{onClick:n,children:"Stop camera"}),W.jsx("video",{ref:c,autoPlay:!0,width:"640",height:"480"}),W.jsx("h3",{children:"Webcams"}),W.jsx("label",{htmlFor:"camera-select",children:"Available webcams:"}),W.jsxs("select",{name:"cameras",id:"camera-select",onChange:s,children:[W.jsx("option",{value:"",children:"Select a camera"}),l.map((g,p)=>W.jsx("option",{value:g.deviceId,children:g.label||`Camera ${p+1}`},g.deviceId))]})]}),W.jsx("div",{children:d&&W.jsx("img",{src:d,alt:"Picture"})})]})}),gD=()=>{const[r,t]=ee.useState([]),[n,s]=ee.useState(!1),[l,c]=ee.useState(null),[d,g]=ee.useState(null),p=ee.useRef(null),v=()=>{if(!n)return;const B={audio:!1,video:l?{deviceId:{exact:l}}:!0},Q=p.current;console.log(Q),navigator.mediaDevices.getUserMedia(B).then(J=>{Q.srcObject=J,Q.onloadedmetadata=$=>{Q.play()}}).catch(J=>{console.error("Something went wrong ...",J)})},A=()=>{const B=p.current;B.srcObject&&B.srcObject.getTracks().forEach(Q=>Q.stop())},C=()=>{if(!l)return;const B=p.current,Q=document.createElement("canvas");Q.width=B.videoWidth,Q.height=B.videoHeight,Q.getContext("2d").drawImage(B,0,0,Q.width,Q.height);const J=Q.toDataURL("image/png");g(J),Q.toBlob($=>{const pt=new ClipboardItem({"image/png":$});navigator.clipboard.write([pt])})},x=B=>{const Q=B.target.value;Q?(c(Q),s(!0)):(c(null),s(!1))};return ee.useEffect(()=>{(async()=>{const Q=await navigator.mediaDevices.enumerateDevices();t(Q.filter(J=>J.kind==="videoinput"))})()},[]),W.jsx(mD,{startCamera:v,captureHandler:C,stopCamera:A,selectCamera:x,webcams:r,videoRef:p,capturedImage:d})},pD=({getUserLocation:r,userLocation:t})=>W.jsxs("div",{children:[W.jsx("h2",{children:"Get user location"}),t&&W.jsxs("span",{children:["Location: ",t.latitude," | ",t.longitude]}),W.jsx("button",{onClick:r,children:"Get current location"})]}),yD=()=>{const[r,t]=ee.useState(null),n=async()=>{navigator.geolocation.getCurrentPosition(s=>{const{latitude:l,longitude:c}=s.coords;t({latitude:l,longitude:c})},s=>{console.error("Error getting location",s),t(null)})};return W.jsx(pD,{getUserLocation:n,userLocation:r})},_D=({name:r,setName:t,email:n,setEmail:s,customers:l,onSubmit:c,onDelete:d,onUpdate:g})=>W.jsxs(W.Fragment,{children:[W.jsxs("form",{onSubmit:c,children:[W.jsx("input",{type:"text",placeholder:"Name",value:r,onChange:p=>t(p.target.value)}),W.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:p=>s(p.target.value)}),W.jsx("button",{type:"submit",children:"Save"})]}),W.jsx("span",{children:"Customers"}),l&&l.length>0&&l.map((p,v)=>W.jsxs("div",{children:[W.jsx("p",{children:p.name}),W.jsx("button",{onClick:()=>d(p.id),children:"Delete"}),W.jsx("button",{onClick:()=>g(p),children:"Edit"})]},p.id))]}),vD=async r=>{try{await zC(BT(ih,"customers_learningstory"),r),console.log("User saved successfully")}catch(t){console.error("Something went wrong while saving customer",t)}},ED=async r=>{try{await LC(jm(ih,"customers_learningstory",r))}catch(t){console.error("Error deleting customer",t)}},TD=async(r,t)=>{try{await xC(jm(ih,"customers_learningstory",r),t)}catch(n){console.error("Error updating customer",n)}},AD=r=>BC(BT(ih,"customers_learningstory"),t=>{const n=t.docs.map(s=>({id:s.id,...s.data()}));r(n)}),SD=()=>{const[r,t]=ee.useState(""),[n,s]=ee.useState(""),[l,c]=ee.useState([]),[d,g]=ee.useState(null);ee.useEffect(()=>{const x=AD(c);return()=>x()},[]);const p=()=>({name:r,email:n}),v=async x=>{x.preventDefault();const B=p();d?await TD(d,B):await vD(B),s(""),t(""),g(null)},A=async x=>{await ED(x)},C=async x=>{t(x.name),s(x.email),g(x.id)};return W.jsx(_D,{name:r,setName:t,email:n,setEmail:s,customers:l,onSubmit:v,onDelete:A,onUpdate:C})};function bD(){return W.jsxs(W.Fragment,{children:[W.jsxs("div",{children:[W.jsx("h1",{children:"Cache LearningStory"}),W.jsx(qA,{}),";"]}),W.jsxs("div",{children:[W.jsx("h1",{children:"Firebase Service"}),W.jsx(YC,{})]}),W.jsxs("div",{children:[W.jsx("h1",{children:"IndexDB"}),W.jsx(dD,{})]}),W.jsxs("div",{children:[W.jsx("h1",{children:"Native Device Features/PWA"}),W.jsx(gD,{}),W.jsx(yD,{})]}),W.jsxs("div",{children:[W.jsx("h1",{children:"Firestore"}),W.jsx(SD,{})]})]})}xA.createRoot(document.getElementById("root")).render(W.jsx(ee.StrictMode,{children:W.jsx(bD,{})}));
